
> langplug-frontend@1.0.0 lint
> eslint src --max-warnings 0 --format json

[{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\__tests__\\App.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\ApiError.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\ApiRequestOptions.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":3,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[120,123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[120,123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[269,272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[269,272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\ApiResult.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[86,89],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[86,89],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\CancelablePromise.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\OpenAPI.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\core\\request.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[828,831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[828,831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-ignore\" because it alters compilation errors.","line":38,"column":3,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":38,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-prototype-builtins","severity":2,"message":"Do not access Object.prototype method 'hasOwnProperty' from target object.","line":77,"column":22,"nodeType":"CallExpression","messageId":"prototypeBuildIn","endLine":77,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-ignore\" because it alters compilation errors.","line":125,"column":3,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":125,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-ignore\" because it alters compilation errors.","line":127,"column":3,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":127,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-ignore\" because it alters compilation errors.","line":129,"column":3,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":129,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Do not use \"@ts-ignore\" because it alters compilation errors.","line":131,"column":3,"nodeType":"Line","messageId":"tsDirectiveComment","endLine":131,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\client\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\BackendReadinessCheck.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkReadiness'. Either include it or remove the dependency array.","line":210,"column":6,"nodeType":"ArrayExpression","endLine":210,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [attemptCount, checkReadiness]","fix":{"range":[4783,4797],"text":"[attemptCount, checkReadiness]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { OpenAPI } from '@/services/api'\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: linear-gradient(135deg, #141414 0%, #1a1a1a 100%);\n  color: white;\n  padding: 20px;\n`\n\nconst LoadingContent = styled.div`\n  text-align: center;\n  max-width: 600px;\n`\n\nconst Logo = styled.h1`\n  font-size: 48px;\n  font-weight: bold;\n  color: #e50914;\n  margin-bottom: 20px;\n`\n\nconst LoadingText = styled.p`\n  font-size: 18px;\n  color: #b3b3b3;\n  margin-bottom: 30px;\n  line-height: 1.5;\n`\n\nconst ProgressDots = styled.div`\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n  margin-top: 20px;\n`\n\nconst Dot = styled.div<{ $delay: number }>`\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: #e50914;\n  animation: pulse 1.4s infinite ease-in-out both;\n  animation-delay: ${props => props.$delay}s;\n\n  @keyframes pulse {\n    0%, 80%, 100% {\n      transform: scale(0);\n      opacity: 0.5;\n    }\n    40% {\n      transform: scale(1);\n      opacity: 1;\n    }\n  }\n`\n\nconst StatusText = styled.div`\n  font-size: 14px;\n  color: #666;\n  margin-top: 30px;\n`\n\nconst ProgressBar = styled.div`\n  width: 100%;\n  max-width: 400px;\n  height: 8px;\n  background: #333;\n  border-radius: 4px;\n  overflow: hidden;\n  margin: 20px auto;\n`\n\nconst ProgressFill = styled.div<{ $progress: number }>`\n  height: 100%;\n  width: ${props => props.$progress}%;\n  background: linear-gradient(90deg, #e50914 0%, #ff2d3a 100%);\n  transition: width 0.3s ease;\n  border-radius: 4px;\n`\n\nconst RetryButton = styled.button`\n  background: #e50914;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  margin-top: 20px;\n  transition: background 0.2s;\n\n  &:hover {\n    background: #f40612;\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n`\n\nconst ErrorText = styled.p`\n  color: #ff4444;\n  font-size: 16px;\n  margin: 20px 0;\n`\n\nconst HelpText = styled.div`\n  font-size: 14px;\n  color: #888;\n  margin-top: 30px;\n  line-height: 1.6;\n\n  ul {\n    text-align: left;\n    margin: 10px auto;\n    max-width: 400px;\n    padding-left: 20px;\n  }\n\n  li {\n    margin: 8px 0;\n  }\n`\n\ninterface BackendReadinessCheckProps {\n  children: React.ReactNode\n}\n\nexport const BackendReadinessCheck: React.FC<BackendReadinessCheckProps> = ({ children }) => {\n  const [isReady, setIsReady] = useState(false)\n  const [message, setMessage] = useState('Initializing server...')\n  const [attemptCount, setAttemptCount] = useState(0)\n  const [hasError, setHasError] = useState(false)\n  const [errorDetails, setErrorDetails] = useState('')\n  const [progress, setProgress] = useState(0)\n\n  const checkReadiness = async () => {\n    try {\n      const response = await fetch(`${OpenAPI.BASE}/readiness`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setMessage(data.message || 'Server is ready!')\n        setProgress(100)\n        setIsReady(true)\n        setHasError(false)\n        return true\n      } else if (response.status === 503) {\n        const data = await response.json()\n        setMessage(data.message || 'Services are still initializing. Please wait...')\n        setAttemptCount(prev => prev + 1)\n        // Gradual progress up to 90%\n        setProgress(prev => Math.min(prev + 5, 90))\n        setHasError(false)\n        return false\n      } else {\n        setMessage('Unexpected server response. Retrying...')\n        setAttemptCount(prev => prev + 1)\n        setProgress(prev => Math.min(prev + 2, 80))\n        return false\n      }\n    } catch (error) {\n      // Backend might not be running yet or network error\n      setMessage('Waiting for backend server to start...')\n      setAttemptCount(prev => prev + 1)\n      setProgress(prev => Math.min(prev + 3, 70))\n      \n      // After 30 attempts (1 minute), show error\n      if (attemptCount > 30) {\n        setHasError(true)\n        setErrorDetails('Cannot connect to backend server. Please ensure the server is running.')\n      }\n      return false\n    }\n  }\n\n  useEffect(() => {\n    let mounted = true\n    let pollInterval: NodeJS.Timeout | null = null\n\n    const poll = async () => {\n      if (!mounted) return\n      const success = await checkReadiness()\n      if (success && pollInterval) {\n        clearInterval(pollInterval)\n      }\n    }\n\n    // Initial check\n    poll()\n\n    // Poll every 2 seconds\n    pollInterval = setInterval(poll, 2000)\n\n    return () => {\n      mounted = false\n      if (pollInterval) clearInterval(pollInterval)\n    }\n  }, [attemptCount])\n\n  const handleRetry = () => {\n    setAttemptCount(0)\n    setHasError(false)\n    setErrorDetails('')\n    setProgress(0)\n    setMessage('Retrying connection...')\n    checkReadiness()\n  }\n\n  if (!isReady) {\n    return (\n      <LoadingContainer>\n        <LoadingContent>\n          <Logo>LangPlug</Logo>\n          <LoadingText>\n            {message}\n            {attemptCount > 5 && !hasError && (\n              <>\n                <br />\n                <br />\n                This may take 5-10 minutes on first run while AI models are downloaded.\n              </>\n            )}\n          </LoadingText>\n\n          {hasError ? (\n            <>\n              <ErrorText>{errorDetails}</ErrorText>\n              <HelpText>\n                <strong>Troubleshooting steps:</strong>\n                <ul>\n                  <li>Ensure the backend server is running on port 8000</li>\n                  <li>Check that no firewall is blocking the connection</li>\n                  <li>Verify the backend URL is correctly configured</li>\n                  <li>Try refreshing the page or clicking retry below</li>\n                </ul>\n              </HelpText>\n              <RetryButton onClick={handleRetry}>\n                Retry Connection\n              </RetryButton>\n            </>\n          ) : (\n            <>\n              <ProgressBar>\n                <ProgressFill $progress={progress} />\n              </ProgressBar>\n              <ProgressDots>\n                <Dot $delay={0} />\n                <Dot $delay={0.2} />\n                <Dot $delay={0.4} />\n              </ProgressDots>\n              <StatusText>\n                {progress > 0 && `${progress}% ÔÇó `}\n                Attempt {attemptCount} {attemptCount > 10 && '(This is taking longer than usual...)'}\n              </StatusText>\n            </>\n          )}\n        </LoadingContent>\n      </LoadingContainer>\n    )\n  }\n\n  return <>{children}</>\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ChunkedLearningFlow.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7711,7714],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7711,7714],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9238,9241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9238,9241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":315,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11186,11189],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11186,11189],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentChunk', 'currentPhase', and 'processChunk'. Either include them or remove the dependency array.","line":459,"column":6,"nodeType":"ArrayExpression","endLine":459,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [chunks, currentChunk, currentPhase, processChunk, profileLoaded]","fix":{"range":[16399,16422],"text":"[chunks, currentChunk, currentPhase, processChunk, profileLoaded]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'chunks.length' and 'processChunk'. Either include them or remove the dependency array.","line":467,"column":6,"nodeType":"ArrayExpression","endLine":467,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [chunks.length, currentChunk, currentPhase, processChunk, profileLoaded]","fix":{"range":[16750,16793],"text":"[chunks.length, currentChunk, currentPhase, processChunk, profileLoaded]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":488,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":488,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17379,17382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17379,17382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport { toast } from 'react-hot-toast'\r\nimport { ProcessingScreen } from './ProcessingScreen'\r\nimport { VocabularyGame } from './VocabularyGame'\r\nimport { ChunkedLearningPlayer } from './ChunkedLearningPlayer'\r\nimport { handleApiError } from '@/services/api'\r\nimport {\r\n  getTaskProgressApiProcessProgressTaskIdGet,\r\n  processChunkApiProcessChunkPost,\r\n  profileGetApiProfileGet,\r\n  markWordKnownApiVocabularyMarkKnownPost,\r\n} from '@/client/services.gen'\r\nimport { logger } from '@/services/logger'\r\nimport type { VideoInfo, ProcessingStatus, VocabularyWord } from '@/types'\r\n\r\ninterface ChunkData {\r\n  chunkNumber: number\r\n  startTime: number // in seconds\r\n  endTime: number // in seconds\r\n  vocabulary: VocabularyWord[]\r\n  subtitlePath?: string\r\n  translationPath?: string\r\n  isProcessed: boolean\r\n}\r\n\r\ninterface ProfileLanguageSummary {\r\n  code: string\r\n  name: string\r\n}\r\n\r\ninterface UserProfileResponse {\r\n  native_language: ProfileLanguageSummary\r\n  target_language: ProfileLanguageSummary\r\n  language_runtime?: {\r\n    native: string\r\n    target: string\r\n    translation_service?: string\r\n    translation_model?: string\r\n  }\r\n}\r\n\r\ninterface ChunkedLearningFlowProps {\r\n  videoInfo: VideoInfo\r\n  chunkDurationMinutes?: number // Default 0.5 minutes (30 seconds)\r\n  onComplete?: () => void // Called when entire episode is completed\r\n}\r\n\r\nexport const ChunkedLearningFlow: React.FC<ChunkedLearningFlowProps> = ({\r\n  videoInfo,\r\n  chunkDurationMinutes = 0.5,\r\n  onComplete\r\n}) => {\r\n  const navigate = useNavigate()\r\n  const { series, episode: _episode } = useParams<{ series: string; episode: string }>()\r\n\r\n  // State management\r\n  const [currentPhase, setCurrentPhase] = useState<'processing' | 'game' | 'video'>('processing')\r\n  const [currentChunk, setCurrentChunk] = useState(0)\r\n  const [chunks, setChunks] = useState<ChunkData[]>([])\r\n  const [processingStatus, setProcessingStatus] = useState<ProcessingStatus>({\r\n    status: 'processing',\r\n    progress: 0,\r\n    current_step: 'Initializing',\r\n    message: 'Starting processing...'\r\n  })\r\n  const [_taskId, setTaskId] = useState<string | null>(null)\r\n  const [gameWords, setGameWords] = useState<VocabularyWord[]>([])\r\n  const [learnedWords, setLearnedWords] = useState<Set<string>>(new Set())\r\n  const [activeLanguages, setActiveLanguages] = useState<{\r\n    native: ProfileLanguageSummary\r\n    target: ProfileLanguageSummary\r\n  } | null>(null)\r\n  const [profileLoaded, setProfileLoaded] = useState(false)\r\n\r\n  // Calculate total chunks based on video duration\r\n  useEffect(() => {\r\n    logger.info('ChunkedLearningFlow', `­ƒÄ¼ Initializing chunks for video: ${videoInfo.path}`)\r\n    const videoDurationMinutes = videoInfo.duration || 25 // Assume 25 minutes if not provided\r\n    const totalChunks = Math.ceil(videoDurationMinutes / chunkDurationMinutes)\r\n\r\n    logger.info('ChunkedLearningFlow', `Video duration: ${videoDurationMinutes} min, Chunk size: ${chunkDurationMinutes} min, Total chunks: ${totalChunks}`)\r\n\r\n    const newChunks: ChunkData[] = []\r\n    for (let i = 0; i < totalChunks; i++) {\r\n      newChunks.push({\r\n        chunkNumber: i + 1,\r\n        startTime: i * chunkDurationMinutes * 60,\r\n        endTime: Math.min((i + 1) * chunkDurationMinutes * 60, videoDurationMinutes * 60),\r\n        vocabulary: [],\r\n        isProcessed: false  // Always mark as not processed to force reprocessing\r\n      })\r\n    }\r\n    setChunks(newChunks)\r\n  }, [videoInfo.duration, chunkDurationMinutes, videoInfo.path])\r\n\r\n  useEffect(() => {\r\n    let isMounted = true\r\n\r\n    const loadProfileLanguages = async () => {\r\n      try {\r\n        const profile = await profileGetApiProfileGet() as unknown as UserProfileResponse\r\n        if (!isMounted || !profile) {\r\n          return\r\n        }\r\n\r\n        logger.info('ChunkedLearningFlow', 'Loaded user profile with languages', {\r\n          native: profile.native_language?.name,\r\n          target: profile.target_language?.name,\r\n        })\r\n        setActiveLanguages({\r\n          native: profile.native_language,\r\n          target: profile.target_language,\r\n        })\r\n        setProfileLoaded(true)\r\n      } catch (error) {\r\n        logger.warn('ChunkedLearningFlow', 'Failed to load user language preferences', error)\r\n      }\r\n    }\r\n\r\n    loadProfileLanguages()\r\n\r\n    return () => {\r\n      isMounted = false\r\n    }\r\n  }, [])\r\n\r\n  // Format time for display\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = seconds % 60\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`\r\n  }\r\n\r\n  // Process current chunk\r\n  const processChunk = async (chunkIndex: number) => {\r\n    logger.info('ChunkedLearningFlow', `Processing chunk ${chunkIndex + 1}/${chunks.length}`)\r\n\r\n    if (chunkIndex >= chunks.length) {\r\n      logger.info('ChunkedLearningFlow', 'All chunks processed! Episode completed!')\r\n      toast.success('Episode completed!')\r\n      onComplete?.()\r\n      return\r\n    }\r\n\r\n    const chunk = chunks[chunkIndex]\r\n\r\n    logger.info('ChunkedLearningFlow', 'Processing chunk details', {\r\n      chunkNumber: chunk.chunkNumber,\r\n      startTime: chunk.startTime,\r\n      endTime: chunk.endTime,\r\n      videoPath: videoInfo.path\r\n    })\r\n\r\n    setCurrentPhase('processing')\r\n    setProcessingStatus({\r\n      status: 'processing',\r\n      progress: 0,\r\n      current_step: 'Processing chunk',\r\n      message: `Processing segment ${formatTime(chunk.startTime)} - ${formatTime(chunk.endTime)}`\r\n    })\r\n\r\n    try {\r\n      const response = await processChunkApiProcessChunkPost({\r\n        requestBody: {\r\n          video_path: videoInfo.path,\r\n          start_time: chunk.startTime,\r\n          end_time: chunk.endTime,\r\n        },\r\n      }) as { task_id: string; status?: string }\r\n\r\n      setTaskId(response.task_id)\r\n\r\n      logger.info('ChunkedLearningFlow', 'Backend task started', {\r\n        taskId: response.task_id,\r\n        chunkIndex: chunkIndex + 1,\r\n        status: response.status || 'started'\r\n      })\r\n\r\n      // Start polling for progress\r\n      pollProgress(response.task_id, chunkIndex)\r\n    } catch (error) {\r\n      logger.error('ChunkedLearningFlow', 'Failed to start chunk processing', error)\r\n      handleApiError(error, 'ChunkedLearningFlow.processChunk')\r\n      toast.error('Failed to process chunk')\r\n    }\r\n  }\r\n\r\n  // Poll for processing progress\r\n  const pollProgress = async (taskId: string, chunkIndex: number) => {\r\n    const maxAttempts = 120\r\n    let attempts = 0\r\n    let pollInterval = 3000 // Poll every 3 seconds\r\n\r\n    const poll = async () => {\r\n      try {\r\n        const progress = await getTaskProgressApiProcessProgressTaskIdGet({ taskId }) as ProcessingStatus\r\n        logger.info('ChunkedLearningFlow', 'Progress update', {\r\n          status: progress.status,\r\n          progress: progress.progress,\r\n          step: progress.current_step,\r\n          vocabularyCount: progress.vocabulary?.length || 0\r\n        })\r\n        setProcessingStatus(progress)\r\n\r\n        if (progress.status === 'completed') {\r\n          logger.info('ChunkedLearningFlow', 'Processing completed', {\r\n            chunkIndex: chunkIndex + 1,\r\n            vocabularyCount: progress.vocabulary?.length || 0,\r\n            subtitlePath: progress.subtitle_path,\r\n            translationPath: progress.translation_path\r\n          })\r\n\r\n          // Validate vocabulary data - fail fast if missing\r\n          if (!progress.vocabulary) {\r\n            throw new Error('Processing completed but vocabulary data is missing from response')\r\n          }\r\n\r\n          const vocabularyWithIds = progress.vocabulary.map((word: any) => {\r\n            if (!word.lemma) {\r\n              throw new Error(`Word \"${word.word}\" is missing required lemma field`)\r\n            }\r\n            return {\r\n              ...word,\r\n              lemma: word.lemma\r\n            }\r\n          })\r\n\r\n          const updatedChunks = [...chunks]\r\n          updatedChunks[chunkIndex] = {\r\n            ...updatedChunks[chunkIndex],\r\n            vocabulary: vocabularyWithIds,\r\n            subtitlePath: progress.subtitle_path,\r\n            translationPath: progress.translation_path || undefined,\r\n            isProcessed: true\r\n          }\r\n\r\n          logger.userAction('Entering vocabulary game phase', 'ChunkedLearningFlow', {\r\n            wordsToLearn: progress.vocabulary?.length || 0,\r\n            chunkIndex: chunkIndex + 1\r\n          })\r\n\r\n          // Set game phase BEFORE updating chunks to prevent useEffect race condition\r\n          setCurrentPhase('game')\r\n          setGameWords(vocabularyWithIds)\r\n          setChunks(updatedChunks)\r\n          return\r\n        }\r\n\r\n        if (progress.status === 'error') {\r\n          logger.error('ChunkedLearningFlow', `Processing failed: ${progress.message}`)\r\n          toast.error(`Processing failed: ${progress.message}`)\r\n          return\r\n        }\r\n\r\n        attempts++\r\n        if (attempts < maxAttempts) {\r\n          setTimeout(poll, pollInterval)\r\n        } else {\r\n          logger.error('ChunkedLearningFlow', 'Processing timeout')\r\n          toast.error('Processing timeout')\r\n        }\r\n      } catch (error: any) {\r\n        logger.error('ChunkedLearningFlow', 'Error polling progress', error)\r\n\r\n        // Check if this is an authentication error (401 Unauthorized)\r\n        if (error?.response?.status === 401 || error?.status === 401) {\r\n          logger.error('ChunkedLearningFlow', 'Authentication failed - stopping polling')\r\n          toast.error('Session expired. Please log in again.')\r\n\r\n          // Clear authentication and redirect to login\r\n          localStorage.removeItem('access_token')\r\n          localStorage.removeItem('refresh_token')\r\n          localStorage.removeItem('user_id')\r\n          navigate('/login')\r\n          return\r\n        }\r\n\r\n        attempts++\r\n        if (attempts < maxAttempts) {\r\n          // Exponential backoff: increase interval each time, max 30 seconds\r\n          pollInterval = Math.min(pollInterval * 1.5, 30000)\r\n          setTimeout(poll, pollInterval)\r\n        } else {\r\n          logger.error('ChunkedLearningFlow', 'Processing failed after max attempts')\r\n          toast.error('Processing failed. Please try again.')\r\n        }\r\n      }\r\n    }\r\n\r\n    poll()\r\n  }\r\n\r\n  // Handle individual word answers in the game with improved error handling\r\n  const handleWordAnswered = async (word: string, known: boolean) => {\r\n    const wordData = gameWords.find(w => w.word === word)\r\n    if (!wordData) {\r\n      logger.warn('ChunkedLearningFlow', 'Cannot save word progress - word not found', { word })\r\n      toast.error(`Cannot save progress for \"${word}\" - word data missing`)\r\n      return\r\n    }\r\n\r\n    // Show optimistic feedback immediately\r\n    const loadingToast = toast.loading(`Saving progress for \"${word}\"...`)\r\n\r\n    try {\r\n      // Use lemma-based API endpoint\r\n      const res = await markWordKnownApiVocabularyMarkKnownPost({\r\n        requestBody: {\r\n          lemma: wordData.lemma,\r\n          word: wordData.word,\r\n          language: 'de',\r\n          known: known\r\n        }\r\n      }) as any\r\n\r\n      const respWord = res?.word ?? word\r\n      const respLemma = res?.lemma ?? wordData.lemma\r\n      const respLevel = res?.level ?? wordData.difficulty_level\r\n      logger.info('ChunkedLearningFlow', 'Word progress saved to database', {\r\n        word: respWord,\r\n        lemma: respLemma,\r\n        level: respLevel,\r\n        known\r\n      })\r\n\r\n      // Dismiss loading toast and show success\r\n      toast.dismiss(loadingToast)\r\n      toast.success('Ô£ô Progress saved', { duration: 1500 })\r\n    } catch (error) {\r\n      logger.error('ChunkedLearningFlow', 'Failed to save word progress', { word, error })\r\n      toast.dismiss(loadingToast)\r\n      toast.error(`Failed to save progress for \"${word}\". Please try again.`, { duration: 3000 })\r\n      // Let error propagate - fail fast, no silent retries\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // Handle game completion with second-pass filtering\r\n  const handleGameComplete = async (knownWords: string[], unknownWords: string[]) => {\r\n    logger.userAction('Vocabulary game completed', 'ChunkedLearningFlow', {\r\n      knownWords: knownWords.length,\r\n      unknownWords: unknownWords.length,\r\n      totalWords: knownWords.length + unknownWords.length,\r\n      chunkIndex: currentChunk + 1\r\n    })\r\n\r\n    setLearnedWords(prev => new Set([...prev, ...knownWords]))\r\n\r\n    // Re-process chunk to get filtered subtitles with updated vocabulary\r\n    logger.info('ChunkedLearningFlow', 'Re-processing chunk with updated vocabulary knowledge')\r\n    toast.loading('Updating subtitles based on your progress...', { duration: 2000 })\r\n\r\n    try {\r\n      // Re-process the current chunk - this will fetch fresh user vocabulary progress\r\n      await processChunk(currentChunk)\r\n\r\n      logger.info('ChunkedLearningFlow', 'Chunk re-processed with updated vocabulary')\r\n    } catch (error) {\r\n      logger.error('ChunkedLearningFlow', 'Failed to reprocess chunk after game', { error })\r\n      // Continue anyway - user can still watch with old subtitles\r\n      toast.error('Failed to update subtitles, but you can continue watching')\r\n    }\r\n\r\n    logger.userAction('Entering video playback phase', 'ChunkedLearningFlow', {\r\n      chunkIndex: currentChunk + 1,\r\n      totalLearnedWords: learnedWords.size + knownWords.length\r\n    })\r\n    setCurrentPhase('video')\r\n  }\r\n\r\n  // Handle skipping vocabulary game\r\n  const handleSkipGame = () => {\r\n    // Copy subtitle paths from processing status to chunk data\r\n    if (processingStatus && currentChunk < chunks.length) {\r\n      const updatedChunks = [...chunks]\r\n      updatedChunks[currentChunk] = {\r\n        ...updatedChunks[currentChunk],\r\n        subtitlePath: processingStatus.subtitle_path,\r\n        translationPath: processingStatus.translation_path || undefined\r\n      }\r\n      setChunks(updatedChunks)\r\n      logger.info('ChunkedLearningFlow', 'Updated chunk with subtitle paths', {\r\n        chunkIndex: currentChunk + 1,\r\n        subtitlePath: processingStatus.subtitle_path,\r\n        translationPath: processingStatus.translation_path || undefined\r\n      })\r\n    }\r\n\r\n    logger.userAction('Skipped vocabulary game', 'ChunkedLearningFlow', {\r\n      chunkIndex: currentChunk + 1,\r\n      vocabularyCount: processingStatus?.vocabulary?.length || 0\r\n    })\r\n    setCurrentPhase('video')\r\n  }\r\n\r\n  const advanceToNextChunk = (reason: 'completed' | 'skipped') => {\r\n    if (currentChunk < chunks.length - 1) {\r\n      logger.userAction(\r\n        reason === 'completed'\r\n          ? 'Chunk video completed, advancing'\r\n          : 'Chunk skipped, advancing to next segment',\r\n        'ChunkedLearningFlow',\r\n        {\r\n          completedChunk: currentChunk + 1,\r\n          nextChunk: currentChunk + 2,\r\n          totalChunks: chunks.length,\r\n          progressPercent: Math.round(((currentChunk + 1) / chunks.length) * 100)\r\n        }\r\n      )\r\n      setCurrentChunk(prev => prev + 1)\r\n      setCurrentPhase('processing')\r\n    } else {\r\n      logger.userAction(\r\n        reason === 'completed'\r\n          ? 'Episode completed!'\r\n          : 'Episode skipped to completion',\r\n        'ChunkedLearningFlow',\r\n        {\r\n          totalChunks: chunks.length,\r\n          totalLearnedWords: learnedWords.size,\r\n          videoTitle: videoInfo?.title\r\n        }\r\n      )\r\n      onComplete?.()\r\n    }\r\n  }\r\n\r\n  // Handle video completion\r\n  const handleVideoComplete = () => {\r\n    advanceToNextChunk('completed')\r\n  }\r\n\r\n  const handleSkipChunk = () => {\r\n    advanceToNextChunk('skipped')\r\n  }\r\n\r\n  const handleBackToEpisodes = () => {\r\n    const targetSeries = series || videoInfo.series\r\n    logger.userAction('Returned to episode selection', 'ChunkedLearningFlow', {\r\n      series: targetSeries,\r\n      currentChunk: currentChunk + 1,\r\n      totalChunks: chunks.length\r\n    })\r\n\r\n    if (targetSeries) {\r\n      navigate(`/episodes/${encodeURIComponent(targetSeries)}`)\r\n    } else {\r\n      navigate('/')\r\n    }\r\n  }\r\n\r\n  // Start processing first chunk on mount (after profile is loaded)\r\n  useEffect(() => {\r\n    if (chunks.length > 0 && currentChunk === 0 && currentPhase === 'processing' && profileLoaded) {\r\n      logger.info('ChunkedLearningFlow', '­ƒÜÇ Starting processing of first chunk')\r\n      processChunk(0)\r\n    }\r\n  }, [chunks, profileLoaded])\r\n\r\n  // Start processing when advancing to subsequent chunks\r\n  useEffect(() => {\r\n    if (chunks.length > 0 && currentChunk > 0 && currentPhase === 'processing' && profileLoaded) {\r\n      logger.info('ChunkedLearningFlow', `­ƒÜÇ Starting processing of chunk ${currentChunk + 1}`)\r\n      processChunk(currentChunk)\r\n    }\r\n  }, [currentChunk, currentPhase, profileLoaded])\r\n\r\n  // Render based on current phase\r\n  const renderPhase = () => {\r\n    const chunk = chunks[currentChunk]\r\n    if (!chunk) return null\r\n\r\n    switch (currentPhase) {\r\n      case 'processing':\r\n        return (\r\n          <ProcessingScreen\r\n            status={processingStatus}\r\n            chunkNumber={currentChunk + 1}\r\n            totalChunks={chunks.length}\r\n            chunkDuration={`${formatTime(chunk.startTime)} - ${formatTime(chunk.endTime)}`}\r\n          />\r\n        )\r\n\r\n      case 'game':\r\n        return (\r\n          <VocabularyGame\r\n            words={gameWords as any}\r\n            onWordAnswered={handleWordAnswered}\r\n            onComplete={handleGameComplete}\r\n            onSkip={handleSkipGame}\r\n            episodeTitle={videoInfo.title}\r\n            chunkInfo={{\r\n              current: currentChunk + 1,\r\n              total: chunks.length,\r\n              duration: `${formatTime(chunk.startTime)} - ${formatTime(chunk.endTime)}`\r\n            }}\r\n          />\r\n        )\r\n\r\n      case 'video':\r\n        logger.info('ChunkedLearningFlow', 'Rendering video player', {\r\n          subtitlePath: chunk.subtitlePath,\r\n          translationPath: chunk.translationPath,\r\n          chunkIndex: currentChunk,\r\n          targetLanguage: activeLanguages?.target?.name,\r\n          nativeLanguage: activeLanguages?.native?.name,\r\n        })\r\n        return (\r\n          <ChunkedLearningPlayer\r\n            videoPath={videoInfo.path}\r\n            series={videoInfo.series}\r\n            episode={videoInfo.episode}\r\n            subtitlePath={chunk.subtitlePath}\r\n            translationPath={chunk.translationPath}\r\n            startTime={chunk.startTime}\r\n            endTime={chunk.endTime}\r\n            onComplete={handleVideoComplete}\r\n            onSkipChunk={handleSkipChunk}\r\n            onBack={handleBackToEpisodes}\r\n            learnedWords={Array.from(learnedWords)}\r\n            chunkInfo={{\r\n              current: currentChunk + 1,\r\n              total: chunks.length,\r\n              duration: `${formatTime(chunk.startTime)} - ${formatTime(chunk.endTime)}`\r\n            }}\r\n            targetLanguage={activeLanguages?.target}\r\n            nativeLanguage={activeLanguages?.native}\r\n          />\r\n        )\r\n\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {renderPhase()}\r\n    </>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ChunkedLearningPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ChunkedLearningPlayer.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":666,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":666,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14073,14182],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'setSubtitleMode' and 'toggleFullscreen'. Either include them or remove the dependency array.","line":825,"column":6,"nodeType":"ArrayExpression","endLine":825,"endColumn":61,"suggestions":[{"desc":"Update the dependencies array to be: [resetControlsTimeout, toggleFullscreen, setSubtitleMode, startTime, currentTime, endTime]","fix":{"range":[19800,19855],"text":"[resetControlsTimeout, toggleFullscreen, setSubtitleMode, startTime, currentTime, endTime]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'containerRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'containerRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":877,"column":24,"nodeType":"Identifier","endLine":877,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'nativeLanguageName', 'targetLanguageName', and 'translationIndices'. Either include them or remove the dependency array.","line":948,"column":6,"nodeType":"ArrayExpression","endLine":948,"endColumn":93,"suggestions":[{"desc":"Update the dependencies array to be: [subtitlePath, translationPath, series, startTime, endTime, buildSubtitleUrl, parseSRT, translationIndices, targetLanguageName, nativeLanguageName]","fix":{"range":[23865,23952],"text":"[subtitlePath, translationPath, series, startTime, endTime, buildSubtitleUrl, parseSRT, translationIndices, targetLanguageName, nativeLanguageName]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport styled from 'styled-components'\r\nimport ReactPlayer from 'react-player'\r\nimport {\r\n  PlayIcon,\r\n  PauseIcon,\r\n  SpeakerWaveIcon,\r\n  SpeakerXMarkIcon,\r\n  CheckCircleIcon,\r\n  MinusIcon,\r\n  PlusIcon,\r\n  ArrowLeftIcon,\r\n  ForwardIcon,\r\n  LanguageIcon,\r\n  EyeSlashIcon\r\n} from '@heroicons/react/24/solid'\r\nimport { apiClient } from '@/services/api-client'\r\nimport { buildVideoStreamUrl } from '@/services/api'\r\nimport { logger } from '@/services/logger'\r\nimport { useSubtitlePreferences, type SubtitleMode } from '@/hooks/useSubtitlePreferences'\r\n\r\n// Styled Components\r\nconst PlayerContainer = styled.div`\r\n  background: #000;\r\n  min-height: 100vh;\r\n  position: relative;\r\n  overflow: hidden;\r\n`\r\n\r\nconst VideoWrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100vh;\r\n  background: #000;\r\n  cursor: none;\r\n\r\n  &.show-cursor {\r\n    cursor: default;\r\n  }\r\n\r\n  &.fullscreen {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 9999;\r\n  }\r\n`\r\n\r\nconst ControlsOverlay = styled.div<{ $visible: boolean; $mobile?: boolean }>`\r\n  position: absolute;\r\n  inset: 0;\r\n  background: linear-gradient(\r\n    transparent 0%,\r\n    transparent 60%,\r\n    rgba(0, 0, 0, 0.3) 85%,\r\n    rgba(0, 0, 0, 0.9) 100%\r\n  );\r\n  opacity: ${props => props.$visible ? 1 : 0};\r\n  transition: opacity 0.3s ease;\r\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\r\n  z-index: 10;\r\n\r\n  ${props => props.$mobile && `\r\n    padding: 12px;\r\n    background: rgba(0, 0, 0, 0.7);\r\n  `}\r\n`\r\n\r\nconst TopControls = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20px 24px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  pointer-events: auto;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 16px;\r\n  }\r\n`\r\n\r\nconst TopLeftControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 12px;\r\n  }\r\n`\r\n\r\nconst ChunkInfo = styled.div`\r\n  background: rgba(0, 0, 0, 0.8);\r\n  border-radius: 8px;\r\n  padding: 12px 20px;\r\n  color: white;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 8px 16px;\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst ChunkLabel = styled.div`\r\n  font-size: 12px;\r\n  color: #b3b3b3;\r\n  margin-bottom: 4px;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 11px;\r\n  }\r\n`\r\n\r\nconst ChunkDetails = styled.div`\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst PlayerControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 12px;\r\n  }\r\n`\r\n\r\nconst StickyBackButton = styled.button`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: rgba(0, 0, 0, 0.65);\r\n  color: white;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  padding: 10px 16px;\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.12);\r\n    transform: translateY(-1px);\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 8px 12px;\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst StickyNavContainer = styled.div`\r\n  position: absolute;\r\n  top: 16px;\r\n  left: 24px;\r\n  z-index: 30;\r\n\r\n  @media (max-width: 768px) {\r\n    left: 16px;\r\n    top: 12px;\r\n  }\r\n`\r\n\r\nconst LearnedWordsBadge = styled.div`\r\n  background: rgba(34, 197, 94, 0.2);\r\n  border: 1px solid #22c55e;\r\n  color: #22c55e;\r\n  border-radius: 8px;\r\n  padding: 8px 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  backdrop-filter: blur(10px);\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 6px 12px;\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst BottomControls = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 16px 24px 24px;\r\n  pointer-events: auto;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 12px 16px 16px;\r\n  }\r\n`\r\n\r\nconst ProgressContainer = styled.div`\r\n  margin-bottom: 16px;\r\n`\r\n\r\nconst ProgressBar = styled.div`\r\n  width: 100%;\r\n  height: 6px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  transition: height 0.2s;\r\n\r\n  &:hover {\r\n    height: 8px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    height: 8px;\r\n  }\r\n`\r\n\r\nconst ProgressFill = styled.div<{ $progress: number }>`\r\n  width: ${props => props.$progress}%;\r\n  height: 100%;\r\n  background: #e50914;\r\n  border-radius: 3px;\r\n  position: relative;\r\n  transition: width 0.1s ease;\r\n\r\n  &::after {\r\n    content: '';\r\n    position: absolute;\r\n    right: 0;\r\n    top: 50%;\r\n    width: 12px;\r\n    height: 12px;\r\n    background: #e50914;\r\n    border: 2px solid white;\r\n    border-radius: 50%;\r\n    transform: translate(50%, -50%);\r\n    opacity: 0;\r\n    transition: opacity 0.2s;\r\n  }\r\n\r\n  ${ProgressBar}:hover &::after {\r\n    opacity: 1;\r\n  }\r\n`\r\n\r\nconst ControlsRow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 8px;\r\n  }\r\n`\r\n\r\nconst LeftControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 12px;\r\n  }\r\n`\r\n\r\nconst RightControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 12px;\r\n  }\r\n`\r\n\r\nconst ControlButton = styled.button<{ $large?: boolean }>`\r\n  background: transparent;\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: ${props => props.$large ? '12px' : '8px'};\r\n  border-radius: 6px;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 6px;\r\n  min-width: ${props => props.$large ? '48px' : '40px'};\r\n  min-height: ${props => props.$large ? '48px' : '40px'};\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    transform: scale(1.05);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.95);\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    min-width: ${props => props.$large ? '44px' : '36px'};\r\n    min-height: ${props => props.$large ? '44px' : '36px'};\r\n    padding: ${props => props.$large ? '10px' : '6px'};\r\n  }\r\n`\r\n\r\nconst VolumeControl = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 6px;\r\n  }\r\n`\r\n\r\nconst VolumeSlider = styled.input`\r\n  width: 80px;\r\n  height: 4px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  outline: none;\r\n  border-radius: 2px;\r\n  cursor: pointer;\r\n\r\n  &::-webkit-slider-thumb {\r\n    appearance: none;\r\n    width: 16px;\r\n    height: 16px;\r\n    background: white;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n    border: 2px solid #e50914;\r\n  }\r\n\r\n  &::-moz-range-thumb {\r\n    width: 16px;\r\n    height: 16px;\r\n    background: white;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n    border: 2px solid #e50914;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 60px;\r\n  }\r\n`\r\n\r\nconst TimeDisplay = styled.div`\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  min-width: 100px;\r\n  text-align: right;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 12px;\r\n    min-width: 80px;\r\n  }\r\n`\r\n\r\nconst SubtitleDisplay = styled.div`\r\n  position: absolute;\r\n  bottom: 120px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  text-align: center;\r\n  max-width: 90%;\r\n  pointer-events: none;\r\n  z-index: 5;\r\n\r\n  @media (max-width: 768px) {\r\n    bottom: 100px;\r\n    max-width: 95%;\r\n  }\r\n`\r\n\r\nconst SubtitleText = styled.div`\r\n  background: rgba(0, 0, 0, 0.9);\r\n  padding: 12px 24px;\r\n  border-radius: 8px;\r\n  backdrop-filter: blur(10px);\r\n  display: inline-block;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 8px 16px;\r\n  }\r\n`\r\n\r\n// SubtitleLabel removed - labels are no longer shown as it's obvious which language is which\r\n// const SubtitleLabel = styled.span`\r\n//   display: block;\r\n//   font-size: 12px;\r\n//   letter-spacing: 0.12em;\r\n//   text-transform: uppercase;\r\n//   margin-bottom: 4px;\r\n//   color: rgba(248, 250, 252, 0.65);\r\n//\r\n//   @media (max-width: 768px) {\r\n//     font-size: 10px;\r\n//     margin-bottom: 2px;\r\n//   }\r\n// `\r\n\r\nconst OriginalSubtitle = styled.div`\r\n  color: #ffd700;\r\n  font-size: 20px;\r\n  line-height: 1.4;\r\n  font-weight: 600;\r\n  margin-bottom: 8px;\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 16px;\r\n    margin-bottom: 6px;\r\n  }\r\n`\r\n\r\nconst TranslatedSubtitle = styled.div`\r\n  color: #ffffff;\r\n  font-size: 16px;\r\n  line-height: 1.3;\r\n  opacity: 0.9;\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 14px;\r\n  }\r\n`\r\n\r\nconst SettingsMenu = styled.div<{ $visible: boolean }>`\r\n  position: absolute;\r\n  bottom: 60px;\r\n  right: 24px;\r\n  background: rgba(0, 0, 0, 0.95);\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  min-width: 200px;\r\n  opacity: ${props => props.$visible ? 1 : 0};\r\n  transform: ${props => props.$visible ? 'translateY(0)' : 'translateY(10px)'};\r\n  transition: all 0.2s ease;\r\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  z-index: 20;\r\n\r\n  @media (max-width: 768px) {\r\n    right: 16px;\r\n    min-width: 180px;\r\n  }\r\n`\r\n\r\nconst MenuSection = styled.div`\r\n  margin-bottom: 16px;\r\n\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n`\r\n\r\nconst MenuLabel = styled.div`\r\n  color: #b3b3b3;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  margin-bottom: 8px;\r\n  text-transform: uppercase;\r\n`\r\n\r\nconst MenuButton = styled.button<{ $active?: boolean }>`\r\n  width: 100%;\r\n  background: ${props => props.$active ? 'rgba(229, 9, 20, 0.2)' : 'transparent'};\r\n  border: none;\r\n  color: ${props => props.$active ? '#e50914' : 'white'};\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  text-align: left;\r\n  transition: all 0.2s ease;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.1);\r\n  }\r\n`\r\n\r\nconst CompletionOverlay = styled.div`\r\n  position: absolute;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.95);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  color: white;\r\n  z-index: 100;\r\n  backdrop-filter: blur(10px);\r\n`\r\n\r\nconst CompletionContent = styled.div`\r\n  text-align: center;\r\n  max-width: 500px;\r\n  padding: 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 16px;\r\n    max-width: 90%;\r\n  }\r\n`\r\n\r\nconst CompletionTitle = styled.h2`\r\n  font-size: 32px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 24px;\r\n  }\r\n`\r\n\r\nconst CompletionMessage = styled.p`\r\n  font-size: 18px;\r\n  color: #b3b3b3;\r\n  margin-bottom: 32px;\r\n  line-height: 1.5;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 16px;\r\n    margin-bottom: 24px;\r\n  }\r\n`\r\n\r\nconst ContinueButton = styled.button`\r\n  background: #e50914;\r\n  color: white;\r\n  border: none;\r\n  padding: 16px 32px;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: #f40612;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 8px 20px rgba(229, 9, 20, 0.3);\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 12px 24px;\r\n    font-size: 15px;\r\n  }\r\n`\r\n\r\n// Types\r\ninterface SubtitleEntry {\r\n  start: number\r\n  end: number\r\n  text: string\r\n  translation?: string\r\n}\r\n\r\ninterface ChunkedLearningPlayerProps {\r\n  videoPath: string\r\n  series: string\r\n  episode: string\r\n  subtitlePath?: string\r\n  translationPath?: string\r\n  translationIndices?: number[]  // Indices of subtitles that still need translation\r\n  startTime: number\r\n  endTime: number\r\n  onComplete: () => void\r\n  onSkipChunk?: () => void\r\n  onBack?: () => void\r\n  learnedWords?: string[]\r\n  chunkInfo?: {\r\n    current: number\r\n    total: number\r\n    duration: string\r\n  }\r\n  targetLanguage?: { code: string; name: string }\r\n  nativeLanguage?: { code: string; name: string }\r\n}\r\n\r\ntype PlaybackSpeed = 0.5 | 0.75 | 1 | 1.25 | 1.5 | 2\r\n\r\nexport const ChunkedLearningPlayer: React.FC<ChunkedLearningPlayerProps> = ({\r\n  videoPath: _videoPath,\r\n  series,\r\n  episode,\r\n  subtitlePath,\r\n  translationPath,\r\n  translationIndices,\r\n  startTime,\r\n  endTime,\r\n  onComplete,\r\n  onSkipChunk,\r\n  onBack,\r\n  learnedWords = [],\r\n  chunkInfo,\r\n  targetLanguage,\r\n  nativeLanguage,\r\n}) => {\r\n  // Refs\r\n  const playerRef = useRef<ReactPlayer>(null)\r\n  const controlsTimeoutRef = useRef<NodeJS.Timeout>()\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Core player state\r\n  const [playing, setPlaying] = useState(false)\r\n  const [volume, setVolume] = useState(1)\r\n  const [muted, setMuted] = useState(false)\r\n  const [currentTime, setCurrentTime] = useState(startTime)\r\n  const [playbackRate, setPlaybackRate] = useState<PlaybackSpeed>(1)\r\n  const [isFullscreen, setIsFullscreen] = useState(false)\r\n  const [videoReady, setVideoReady] = useState(false)\r\n\r\n  // UI state\r\n  const [showControls, setShowControls] = useState(true)\r\n  const [showSettings, setShowSettings] = useState(false)\r\n  const [showCompletion, setShowCompletion] = useState(false)\r\n  const [isMobile, setIsMobile] = useState(false)\r\n\r\n  // Subtitle state with persistence\r\n  const [subtitleMode, setSubtitleMode] = useSubtitlePreferences('original')\r\n  const [currentSubtitle, setCurrentSubtitle] = useState<{ original: string; translation: string }>({\r\n    original: '',\r\n    translation: ''\r\n  })\r\n  const [subtitles, setSubtitles] = useState<SubtitleEntry[]>([])\r\n  const [translations, setTranslations] = useState<SubtitleEntry[]>([])\r\n\r\n  // Log to check what languages are being passed\r\n  useEffect(() => {\r\n    if (targetLanguage || nativeLanguage) {\r\n      console.log('ChunkedLearningPlayer languages:', {\r\n        targetLanguage,\r\n        nativeLanguage,\r\n      })\r\n    }\r\n  }, [targetLanguage, nativeLanguage])\r\n\r\n  const targetLanguageName = targetLanguage?.name || 'German'\r\n  const nativeLanguageName = nativeLanguage?.name || 'Spanish'\r\n\r\n  // Debug language preferences (only log when languages change)\r\n  useEffect(() => {\r\n    logger.debug('ChunkedLearningPlayer', 'Language configuration', {\r\n      targetLanguage: targetLanguageName,\r\n      nativeLanguage: nativeLanguageName\r\n    })\r\n  }, [targetLanguageName, nativeLanguageName])\r\n  const subtitleModeLabels: Record<SubtitleMode, string> = {\r\n    off: 'Off',\r\n    original: `${targetLanguageName} Only`,\r\n    translation: `${nativeLanguageName} Only`,\r\n    both: 'Both Languages',\r\n  }\r\n  const isLastChunk = chunkInfo ? chunkInfo.current >= chunkInfo.total : false\r\n  const skipButtonLabel = isLastChunk ? 'Finish Episode' : 'Skip Chunk'\r\n  const subtitleOptions: Array<{ value: SubtitleMode; label: string }> = [\r\n    { value: 'off', label: subtitleModeLabels.off },\r\n    { value: 'original', label: subtitleModeLabels.original },\r\n    { value: 'translation', label: subtitleModeLabels.translation },\r\n    { value: 'both', label: subtitleModeLabels.both },\r\n  ]\r\n\r\n  // Calculate progress and duration\r\n  const chunkDuration = endTime - startTime\r\n  const progress = Math.max(0, Math.min(100, ((currentTime - startTime) / chunkDuration) * 100))\r\n\r\n  // Format time display\r\n  const formatTime = useCallback((seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = Math.floor(seconds % 60)\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`\r\n  }, [])\r\n\r\n  // Parse SRT format subtitles\r\n  const parseSRT = useCallback((srtContent: string): SubtitleEntry[] => {\r\n    const entries: SubtitleEntry[] = []\r\n    const blocks = srtContent.trim().split(/\\n\\s*\\n/)\r\n\r\n    for (const block of blocks) {\r\n      const lines = block.split('\\n')\r\n      if (lines.length >= 3) {\r\n        const timeMatch = lines[1].match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3}) --> (\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/)\r\n        if (timeMatch) {\r\n          const start = parseInt(timeMatch[1]) * 3600 + parseInt(timeMatch[2]) * 60 + parseInt(timeMatch[3]) + parseInt(timeMatch[4]) / 1000\r\n          const end = parseInt(timeMatch[5]) * 3600 + parseInt(timeMatch[6]) * 60 + parseInt(timeMatch[7]) + parseInt(timeMatch[8]) / 1000\r\n\r\n          const textLines = lines.slice(2)\r\n          let originalText = ''\r\n          let translation = ''\r\n\r\n          if (textLines.length > 0 && textLines[0].includes('|')) {\r\n            const parts = textLines[0].split('|')\r\n            originalText = parts[0].trim()\r\n            translation = parts[1]?.trim() || ''\r\n          } else {\r\n            originalText = textLines.join(' ')\r\n          }\r\n\r\n          entries.push({ start, end, text: originalText, translation })\r\n        }\r\n      }\r\n    }\r\n\r\n    return entries\r\n  }, [])\r\n\r\n  // Build subtitle URL\r\n  const buildSubtitleUrl = useCallback((path: string): string => {\r\n    let subtitleUrl = ''\r\n    if (path.includes('\\\\') || path.includes(':')) {\r\n      const pathParts = path.replace(/\\\\/g, '/').split('/')\r\n      const videosIndex = pathParts.findIndex(p => p.toLowerCase() === 'videos')\r\n      if (videosIndex !== -1 && videosIndex < pathParts.length - 1) {\r\n        const relativePath = pathParts.slice(videosIndex + 1).join('/')\r\n        subtitleUrl = `/api/videos/subtitles/${encodeURIComponent(relativePath)}`\r\n      } else {\r\n        const filename = pathParts[pathParts.length - 1]\r\n        subtitleUrl = `/api/videos/subtitles/${encodeURIComponent(`${series}/${filename}`)}`\r\n      }\r\n    } else {\r\n      subtitleUrl = `/api/videos/subtitles/${encodeURIComponent(path)}`\r\n    }\r\n\r\n    const fullSubtitleUrl = subtitleUrl.startsWith('http')\r\n      ? subtitleUrl\r\n      : `${import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'}${subtitleUrl}`\r\n\r\n    return fullSubtitleUrl\r\n  }, [series])\r\n\r\n  // Auto-hide controls\r\n  const resetControlsTimeout = useCallback(() => {\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current)\r\n    }\r\n\r\n    setShowControls(true)\r\n\r\n    if (playing && !showSettings) {\r\n      controlsTimeoutRef.current = setTimeout(() => {\r\n        setShowControls(false)\r\n      }, 3000)\r\n    }\r\n  }, [playing, showSettings])\r\n\r\n  // Keyboard shortcuts\r\n  const handleKeyPress = useCallback((e: KeyboardEvent) => {\r\n    if (e.target instanceof HTMLInputElement) return\r\n\r\n    switch (e.code) {\r\n      case 'Space':\r\n        e.preventDefault()\r\n        setPlaying(prev => !prev)\r\n        break\r\n      case 'ArrowLeft':\r\n        e.preventDefault()\r\n        if (playerRef.current) {\r\n          const newTime = Math.max(startTime, currentTime - 10)\r\n          playerRef.current.seekTo(newTime)\r\n          setCurrentTime(newTime)\r\n        }\r\n        break\r\n      case 'ArrowRight':\r\n        e.preventDefault()\r\n        if (playerRef.current) {\r\n          const newTime = Math.min(endTime, currentTime + 10)\r\n          playerRef.current.seekTo(newTime)\r\n          setCurrentTime(newTime)\r\n        }\r\n        break\r\n      case 'KeyF':\r\n        e.preventDefault()\r\n        toggleFullscreen()\r\n        break\r\n      case 'KeyM':\r\n        e.preventDefault()\r\n        setMuted(prev => !prev)\r\n        break\r\n      case 'KeyS':\r\n        e.preventDefault()\r\n        setSubtitleMode((prev: SubtitleMode) => {\r\n          const modes: SubtitleMode[] = ['off', 'original', 'translation', 'both']\r\n          const currentIndex = modes.indexOf(prev)\r\n          return modes[(currentIndex + 1) % modes.length]\r\n        })\r\n        break\r\n    }\r\n\r\n    resetControlsTimeout()\r\n  }, [currentTime, startTime, endTime, resetControlsTimeout])\r\n\r\n  // Fullscreen handling\r\n  const toggleFullscreen = useCallback(() => {\r\n    if (!containerRef.current) return\r\n\r\n    if (!isFullscreen) {\r\n      if (containerRef.current.requestFullscreen) {\r\n        containerRef.current.requestFullscreen()\r\n      }\r\n    } else {\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen()\r\n      }\r\n    }\r\n  }, [isFullscreen])\r\n\r\n  // Handle fullscreen changes\r\n  useEffect(() => {\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement)\r\n    }\r\n\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange)\r\n    return () => document.removeEventListener('fullscreenchange', handleFullscreenChange)\r\n  }, [])\r\n\r\n  // Mobile detection\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768)\r\n    }\r\n\r\n    checkMobile()\r\n    window.addEventListener('resize', checkMobile)\r\n    return () => window.removeEventListener('resize', checkMobile)\r\n  }, [])\r\n\r\n  // Keyboard event listeners\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleKeyPress)\r\n    return () => document.removeEventListener('keydown', handleKeyPress)\r\n  }, [handleKeyPress])\r\n\r\n  // Mouse move handler\r\n  useEffect(() => {\r\n    const handleMouseMove = () => resetControlsTimeout()\r\n\r\n    if (containerRef.current) {\r\n      containerRef.current.addEventListener('mousemove', handleMouseMove)\r\n      return () => {\r\n        if (containerRef.current) {\r\n          containerRef.current.removeEventListener('mousemove', handleMouseMove)\r\n        }\r\n      }\r\n    }\r\n  }, [resetControlsTimeout])\r\n\r\n  // Load subtitles\r\n  useEffect(() => {\r\n    logger.info('ChunkedLearningPlayer', 'Loading subtitles...', {\r\n      subtitlePath,\r\n      translationPath,\r\n      translationIndices,\r\n      startTime,\r\n      endTime\r\n    })\r\n\r\n    const normalizeEntries = (entries: SubtitleEntry[]): SubtitleEntry[] => {\r\n      const duration = endTime - startTime\r\n\r\n      return entries\r\n        .map(entry => {\r\n          const isAbsolute = entry.start >= startTime && startTime > 0\r\n          const relativeStart = isAbsolute ? entry.start - startTime : entry.start\r\n          const relativeEnd = isAbsolute ? entry.end - startTime : entry.end\r\n\r\n          return {\r\n            ...entry,\r\n            start: Math.max(0, relativeStart),\r\n            end: Math.max(0, relativeEnd),\r\n          }\r\n        })\r\n        .filter(entry => entry.start <= duration && entry.end >= 0)\r\n    }\r\n\r\n    // Load target-language subtitles\r\n    if (subtitlePath) {\r\n      const fullSubtitleUrl = buildSubtitleUrl(subtitlePath)\r\n\r\n      apiClient.get(fullSubtitleUrl, {\r\n        params: { _ts: Date.now() }\r\n      })\r\n        .then(response => {\r\n          const parsedSubs = parseSRT(response.data as string)\r\n          const normalizedSubs = normalizeEntries(parsedSubs)\r\n          setSubtitles(normalizedSubs)\r\n          logger.info('ChunkedLearningPlayer', `Loaded ${targetLanguageName} subtitles: ${normalizedSubs.length} entries`)\r\n        })\r\n        .catch(error => {\r\n          logger.error('ChunkedLearningPlayer', 'Failed to load subtitles', error)\r\n        })\r\n    } else {\r\n      logger.warn('ChunkedLearningPlayer', 'No subtitle path provided')\r\n    }\r\n\r\n    // Load native-language translations\r\n    if (translationPath) {\r\n      const fullTranslationUrl = buildSubtitleUrl(translationPath)\r\n\r\n      apiClient.get(fullTranslationUrl, {\r\n        params: { _ts: Date.now() }\r\n      })\r\n        .then(response => {\r\n          const parsedTranslations = parseSRT(response.data as string)\r\n          const normalizedTranslations = normalizeEntries(parsedTranslations)\r\n          setTranslations(normalizedTranslations)\r\n          logger.info('ChunkedLearningPlayer', `Loaded ${nativeLanguageName} translations: ${normalizedTranslations.length} entries`)\r\n        })\r\n        .catch(error => {\r\n          logger.warn('ChunkedLearningPlayer', 'Failed to load translations', error)\r\n        })\r\n    }\r\n  }, [subtitlePath, translationPath, series, startTime, endTime, buildSubtitleUrl, parseSRT])\r\n\r\n  // Handle video ready - seek to startTime and begin playback (only once per chunk)\r\n  const handleVideoReady = useCallback(() => {\r\n    // Prevent infinite loop - only initialize once per chunk\r\n    if (videoReady) {\r\n      return\r\n    }\r\n\r\n    logger.info('ChunkedLearningPlayer', 'Video ready, seeking to chunk start', {\r\n      startTime,\r\n      endTime,\r\n      chunkDuration: endTime - startTime\r\n    })\r\n    setVideoReady(true)\r\n\r\n    if (playerRef.current) {\r\n      // Seek to the chunk's start time\r\n      playerRef.current.seekTo(startTime, 'seconds')\r\n\r\n      // Start playing after a short delay to ensure seek completes\r\n      setTimeout(() => {\r\n        setPlaying(true)\r\n        logger.info('ChunkedLearningPlayer', 'Playback started')\r\n      }, 200)\r\n    }\r\n  }, [startTime, endTime, videoReady])\r\n\r\n  // Reset video ready state when chunk changes\r\n  useEffect(() => {\r\n    logger.info('ChunkedLearningPlayer', 'Chunk changed, resetting player state', {\r\n      startTime,\r\n      endTime\r\n    })\r\n    setVideoReady(false)\r\n    setPlaying(false)\r\n  }, [startTime, endTime])\r\n\r\n  // Handle video progress\r\n  const handleProgress = useCallback((state: { playedSeconds: number }) => {\r\n    setCurrentTime(state.playedSeconds)\r\n\r\n    const relativeTime = Math.max(0, state.playedSeconds - startTime)\r\n    const clampedTime = Math.min(relativeTime, chunkDuration)\r\n\r\n    // Update current subtitles\r\n    const currentSubIndex = subtitles.findIndex(sub =>\r\n      clampedTime >= sub.start && clampedTime <= sub.end\r\n    )\r\n    const currentSub = currentSubIndex >= 0 ? subtitles[currentSubIndex] : null\r\n\r\n    const currentTranslation = translations.find(trans =>\r\n      clampedTime >= trans.start && clampedTime <= trans.end\r\n    )\r\n\r\n    // Check if this subtitle index needs translation\r\n    // If translationIndices is provided, only show translation for those indices\r\n    // If not provided, show all translations (backward compatibility)\r\n    const shouldShowTranslation = translationIndices\r\n      ? translationIndices.includes(currentSubIndex)\r\n      : true\r\n\r\n    // Log when translation filtering is applied\r\n    if (translationIndices && currentSubIndex >= 0) {\r\n      logger.debug('ChunkedLearningPlayer', 'Translation filtering', {\r\n        subtitleIndex: currentSubIndex,\r\n        shouldShowTranslation,\r\n        translationIndices: translationIndices.slice(0, 5) // Log first 5 for brevity\r\n      })\r\n    }\r\n\r\n    const translationText = shouldShowTranslation && currentTranslation\r\n      ? (currentTranslation.translation && currentTranslation.translation.trim().length > 0\r\n        ? currentTranslation.translation\r\n        : currentTranslation.text || '')\r\n      : ''\r\n\r\n    setCurrentSubtitle({\r\n      original: currentSub?.text || '',\r\n      translation: translationText\r\n    })\r\n\r\n    // Check if chunk is complete\r\n    if (state.playedSeconds >= endTime && !showCompletion) {\r\n      setPlaying(false)\r\n      setShowCompletion(true)\r\n    }\r\n  }, [subtitles, translations, translationIndices, endTime, showCompletion, startTime, chunkDuration])\r\n\r\n  // Handle seeking\r\n  const handleSeek = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\r\n    const bounds = e.currentTarget.getBoundingClientRect()\r\n    const x = e.clientX - bounds.left\r\n    const percentage = x / bounds.width\r\n    const seekTime = startTime + (chunkDuration * percentage)\r\n\r\n    if (playerRef.current) {\r\n      playerRef.current.seekTo(seekTime)\r\n      setCurrentTime(seekTime)\r\n    }\r\n  }, [startTime, chunkDuration])\r\n\r\n  // Render subtitles based on mode\r\n  const renderSubtitles = () => {\r\n    if (subtitleMode === 'off') return null\r\n\r\n    const showOriginal = subtitleMode === 'original' || subtitleMode === 'both'\r\n    const showTranslation = subtitleMode === 'translation' || subtitleMode === 'both'\r\n\r\n    if (!showOriginal && !showTranslation) return null\r\n    if (!currentSubtitle.original && !currentSubtitle.translation) return null\r\n\r\n    return (\r\n      <SubtitleDisplay>\r\n        <SubtitleText>\r\n          {showOriginal && currentSubtitle.original && (\r\n            <OriginalSubtitle>\r\n              {currentSubtitle.original}\r\n            </OriginalSubtitle>\r\n          )}\r\n          {showTranslation && currentSubtitle.translation && (\r\n            <TranslatedSubtitle>\r\n              {currentSubtitle.translation}\r\n            </TranslatedSubtitle>\r\n          )}\r\n        </SubtitleText>\r\n      </SubtitleDisplay>\r\n    )\r\n  }\r\n\r\n  // Video URL\r\n  const videoUrl = buildVideoStreamUrl(series, episode)\r\n\r\n  const handleSkip = useCallback(() => {\r\n    setPlaying(false)\r\n    setShowCompletion(false)\r\n    if (onSkipChunk) {\r\n      onSkipChunk()\r\n    } else {\r\n      onComplete()\r\n    }\r\n  }, [onSkipChunk, onComplete])\r\n\r\n  return (\r\n    <PlayerContainer ref={containerRef}>\r\n      <VideoWrapper\r\n        className={`${showControls ? 'show-cursor' : ''} ${isFullscreen ? 'fullscreen' : ''}`}\r\n        onClick={resetControlsTimeout}\r\n      >\r\n        <ReactPlayer\r\n          ref={playerRef}\r\n          url={videoUrl}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          playing={playing}\r\n          volume={volume}\r\n          muted={muted}\r\n          playbackRate={playbackRate}\r\n          controls={false}\r\n          onReady={handleVideoReady}\r\n          onProgress={handleProgress}\r\n          progressInterval={100}\r\n        />\r\n\r\n        {onBack && (\r\n          <StickyNavContainer>\r\n            <StickyBackButton onClick={onBack}>\r\n              <ArrowLeftIcon className=\"w-5 h-5\" />\r\n              <span>Back to Episodes</span>\r\n            </StickyBackButton>\r\n          </StickyNavContainer>\r\n        )}\r\n\r\n        {renderSubtitles()}\r\n\r\n        <ControlsOverlay $visible={showControls} $mobile={isMobile}>\r\n          <TopControls>\r\n            <TopLeftControls>\r\n              {chunkInfo && (\r\n                <ChunkInfo>\r\n                  <ChunkLabel>Playing Chunk</ChunkLabel>\r\n                  <ChunkDetails>\r\n                    {chunkInfo.current} of {chunkInfo.total} ÔÇó {chunkInfo.duration}\r\n                  </ChunkDetails>\r\n                </ChunkInfo>\r\n              )}\r\n            </TopLeftControls>\r\n\r\n            <PlayerControls>\r\n              {learnedWords.length > 0 && (\r\n                <LearnedWordsBadge>\r\n                  <CheckCircleIcon className=\"w-4 h-4\" />\r\n                  <span>{learnedWords.length} learned</span>\r\n                </LearnedWordsBadge>\r\n              )}\r\n\r\n              <ControlButton onClick={() => setShowSettings(!showSettings)}>\r\n                ÔÜÖ´©Å\r\n              </ControlButton>\r\n            </PlayerControls>\r\n          </TopControls>\r\n\r\n          <BottomControls>\r\n            <ProgressContainer>\r\n              <ProgressBar onClick={handleSeek}>\r\n                <ProgressFill $progress={progress} />\r\n              </ProgressBar>\r\n            </ProgressContainer>\r\n\r\n            <ControlsRow>\r\n              <LeftControls>\r\n                <ControlButton $large onClick={() => setPlaying(!playing)}>\r\n                  {playing ? (\r\n                    <PauseIcon className=\"w-6 h-6\" />\r\n                  ) : (\r\n                    <PlayIcon className=\"w-6 h-6\" />\r\n                  )}\r\n                </ControlButton>\r\n\r\n                <VolumeControl>\r\n                  <ControlButton onClick={() => setMuted(!muted)}>\r\n                    {muted ? (\r\n                      <SpeakerXMarkIcon className=\"w-5 h-5\" />\r\n                    ) : (\r\n                      <SpeakerWaveIcon className=\"w-5 h-5\" />\r\n                    )}\r\n                  </ControlButton>\r\n                  {!isMobile && (\r\n                    <VolumeSlider\r\n                      type=\"range\"\r\n                      min={0}\r\n                      max={1}\r\n                      step={0.1}\r\n                      value={volume}\r\n                      onChange={(e) => setVolume(parseFloat(e.target.value))}\r\n                    />\r\n                  )}\r\n                </VolumeControl>\r\n\r\n                <TimeDisplay>\r\n                  {formatTime(currentTime - startTime)} / {formatTime(chunkDuration)}\r\n                </TimeDisplay>\r\n              </LeftControls>\r\n\r\n              <RightControls>\r\n                <ControlButton\r\n                  onClick={handleSkip}\r\n                  title={skipButtonLabel}\r\n                >\r\n                  <ForwardIcon className=\"w-5 h-5\" />\r\n                  <span>{skipButtonLabel}</span>\r\n                </ControlButton>\r\n\r\n                <ControlButton\r\n                  onClick={() => {\r\n                    const modes: SubtitleMode[] = ['off', 'original', 'translation', 'both']\r\n                    const currentIndex = modes.indexOf(subtitleMode)\r\n                    setSubtitleMode(modes[(currentIndex + 1) % modes.length])\r\n                  }}\r\n                  title={`Subtitles: ${subtitleModeLabels[subtitleMode]}`}\r\n                >\r\n                  {subtitleMode === 'off' ? (\r\n                    <EyeSlashIcon className=\"w-5 h-5\" />\r\n                  ) : (\r\n                    <LanguageIcon className=\"w-5 h-5\" />\r\n                  )}\r\n                </ControlButton>\r\n\r\n                <ControlButton onClick={toggleFullscreen}>\r\n                  {isFullscreen ? (\r\n                    <MinusIcon className=\"w-5 h-5\" />\r\n                  ) : (\r\n                    <PlusIcon className=\"w-5 h-5\" />\r\n                  )}\r\n                </ControlButton>\r\n              </RightControls>\r\n            </ControlsRow>\r\n          </BottomControls>\r\n        </ControlsOverlay>\r\n\r\n        <SettingsMenu $visible={showSettings}>\r\n          <MenuSection>\r\n            <MenuLabel>Playback Speed</MenuLabel>\r\n            {([0.5, 0.75, 1, 1.25, 1.5, 2] as PlaybackSpeed[]).map(speed => (\r\n              <MenuButton\r\n                key={speed}\r\n                $active={playbackRate === speed}\r\n                onClick={() => setPlaybackRate(speed)}\r\n              >\r\n                {speed}x {speed === 1 && '(Normal)'}\r\n              </MenuButton>\r\n            ))}\r\n          </MenuSection>\r\n\r\n          <MenuSection>\r\n            <MenuLabel>Subtitles</MenuLabel>\r\n            {subtitleOptions.map(option => (\r\n              <MenuButton\r\n                key={option.value}\r\n                $active={subtitleMode === option.value}\r\n                onClick={() => setSubtitleMode(option.value)}\r\n              >\r\n                {option.label}\r\n              </MenuButton>\r\n            ))}\r\n          </MenuSection>\r\n        </SettingsMenu>\r\n\r\n        {showCompletion && (\r\n          <CompletionOverlay>\r\n            <CompletionContent>\r\n              <CompletionTitle>Chunk Complete! ­ƒÄë</CompletionTitle>\r\n              <CompletionMessage>\r\n                Excellent work! You&apos;ve completed this segment and learned {learnedWords.length} new words.\r\n                {chunkInfo && chunkInfo.current < chunkInfo.total && (\r\n                  <> Ready for the next chunk?</>\r\n                )}\r\n              </CompletionMessage>\r\n              <ContinueButton onClick={onComplete}>\r\n                {chunkInfo && chunkInfo.current < chunkInfo.total\r\n                  ? 'Continue to Next Chunk'\r\n                  : 'Complete Episode'\r\n                }\r\n              </ContinueButton>\r\n            </CompletionContent>\r\n          </CompletionOverlay>\r\n        )}\r\n      </VideoWrapper>\r\n    </PlayerContainer>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\EpisodeSelection.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadEpisodes'. Either include it or remove the dependency array.","line":234,"column":6,"nodeType":"ArrayExpression","endLine":234,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [loadEpisodes, series]","fix":{"range":[4898,4906],"text":"[loadEpisodes, series]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { ArrowLeftIcon, PlayIcon, ClockIcon, CheckCircleIcon } from '@heroicons/react/24/solid'\nimport { toast } from 'react-hot-toast'\nimport { Container, NetflixButton, ErrorMessage } from '@/styles/GlobalStyles'\nimport { handleApiError } from '@/services/api'\nimport {\n  filterSubtitlesApiProcessFilterSubtitlesPost,\n  getTaskProgressApiProcessProgressTaskIdGet,\n  getVideosApiVideosGet,\n  // TODO: translateSubtitlesApiProcessTranslateSubtitlesPost endpoint doesn't exist in backend\n  // Investigate if this should use filterSubtitlesApiProcessFilterSubtitlesPost instead\n} from '@/client/services.gen'\nimport { useAuthStore } from '@/store/useAuthStore'\nimport type { VideoInfo, ProcessingStatus } from '@/types'\n\nconst Header = styled.header`\n  padding: 20px 0;\n  background: rgba(0, 0, 0, 0.9);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n`\n\nconst Nav = styled.nav`\n  display: flex;\n  align-items: center;\n  gap: 24px;\n`\n\nconst BackButton = styled.button`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  background: transparent;\n  color: white;\n  border: none;\n  font-size: 16px;\n  cursor: pointer;\n  transition: color 0.3s ease;\n\n  &:hover {\n    color: #e50914;\n  }\n`\n\nconst Logo = styled.h1`\n  color: #e50914;\n  font-size: 28px;\n  font-weight: bold;\n`\n\nconst SeriesHeader = styled.section`\n  padding: 40px 0;\n  text-align: center;\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.8) 0%,\n    rgba(0, 0, 0, 0.4) 50%,\n    rgba(0, 0, 0, 0.8) 100%\n  );\n`\n\nconst SeriesTitle = styled.h1`\n  font-size: 42px;\n  font-weight: bold;\n  margin-bottom: 16px;\n  color: white;\n\n  @media (max-width: 768px) {\n    font-size: 28px;\n  }\n`\n\nconst SeriesInfo = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 24px;\n  color: #b3b3b3;\n  font-size: 16px;\n  margin-bottom: 24px;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 12px;\n  }\n`\n\nconst InfoItem = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`\n\nconst SeriesDescription = styled.p`\n  font-size: 18px;\n  color: #b3b3b3;\n  max-width: 800px;\n  margin: 0 auto 32px;\n  line-height: 1.6;\n`\n\nconst EpisodeGrid = styled.div`\n  display: grid;\n  gap: 24px;\n  max-width: 1000px;\n  margin: 0 auto;\n`\n\nconst EpisodeCard = styled.div`\n  display: grid;\n  grid-template-columns: 200px 1fr auto;\n  gap: 20px;\n  background: rgba(0, 0, 0, 0.6);\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.8);\n    border-color: #e50914;\n    transform: translateY(-2px);\n  }\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: 16px;\n  }\n`\n\nconst EpisodeThumbnail = styled.div`\n  height: 120px;\n  background: linear-gradient(135deg, #e50914, #b00610);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n\n  &::after {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.3);\n  }\n`\n\nconst PlayIconOverlay = styled.div`\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1;\n`\n\nconst EpisodeInfo = styled.div`\n  padding: 16px 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`\n\nconst EpisodeTitle = styled.h3`\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 8px;\n  color: white;\n`\n\nconst EpisodeNumber = styled.span`\n  color: #e50914;\n  font-size: 14px;\n  font-weight: 500;\n  margin-bottom: 4px;\n`\n\nconst EpisodeMeta = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 8px;\n  font-size: 14px;\n  color: #b3b3b3;\n`\n\nconst EpisodeDescription = styled.p`\n  color: #b3b3b3;\n  font-size: 14px;\n  line-height: 1.4;\n`\n\nconst EpisodeActions = styled.div`\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n`\n\nconst PlayButton = styled(NetflixButton)`\n  padding: 12px 20px;\n  font-size: 14px;\n  min-width: 120px;\n`\n\nconst LoadingContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n`\n\nexport const EpisodeSelection: React.FC = () => {\n  const { series } = useParams<{ series: string }>()\n  const [episodes, setEpisodes] = useState<VideoInfo[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [processingTasks, setProcessingTasks] = useState<Set<string>>(new Set())\n  const [progressData, setProgressData] = useState<Record<string, ProcessingStatus>>({})\n\n  const { user: _user } = useAuthStore()\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (series) {\n      loadEpisodes()\n    }\n  }, [series])\n\n  const loadEpisodes = async () => {\n    try {\n      setLoading(true)\n      const videoList = await getVideosApiVideosGet()\n      const seriesEpisodes = videoList.filter(video => video.series === series)\n\n      // Sort episodes by episode number\n      const sortedEpisodes = seriesEpisodes.sort((a, b) => {\n        const aNum = parseInt(a.episode.match(/\\d+/)?.[0] || '0')\n        const bNum = parseInt(b.episode.match(/\\d+/)?.[0] || '0')\n        return aNum - bNum\n      })\n\n      setEpisodes(sortedEpisodes)\n    } catch (error) {\n      handleApiError(error, 'EpisodeSelection.loadEpisodes')\n      setError('Failed to load episodes')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Poll for progress updates with exponential backoff\n  const pollProgress = async (taskId: string, episodePath: string, taskType: 'transcription' | 'filtering' | 'translation' = 'transcription') => {\n    const maxAttempts = 120 // Reduced from 180, with longer intervals\n    let attempts = 0\n    let pollInterval = 5000 // Start at 5 seconds\n\n    const poll = async () => {\n      try {\n        const progress = await getTaskProgressApiProcessProgressTaskIdGet({ taskId }) as ProcessingStatus\n        setProgressData(prev => ({ ...prev, [episodePath]: progress }))\n\n        if (progress.status === 'completed') {\n          handleTaskComplete(episodePath, taskType)\n          return\n        }\n\n        if (progress.status === 'error') {\n          handleTaskError(episodePath, progress.message || 'Unknown error')\n          return\n        }\n\n        attempts++\n        if (attempts < maxAttempts) {\n          // Exponential backoff: increase interval each time, max 30 seconds\n          pollInterval = Math.min(pollInterval * 1.5, 30000)\n          setTimeout(poll, pollInterval)\n        } else {\n          handleTaskError(episodePath, 'Processing timeout')\n        }\n      } catch (error) {\n        console.error('Error polling progress:', error)\n        attempts++\n        if (attempts < maxAttempts) {\n          // Exponential backoff on error\n          pollInterval = Math.min(pollInterval * 1.5, 30000)\n          setTimeout(poll, pollInterval)\n        } else {\n          handleTaskError(episodePath, 'Failed to get progress')\n        }\n      }\n    }\n\n    poll()\n  }\n\n  // Handle progress completion\n  const handleTaskComplete = (episodePath: string, taskType: 'transcription' | 'filtering' | 'translation') => {\n    // Remove from processing tasks\n    setProcessingTasks(prev => {\n      const newSet = new Set(prev)\n      newSet.delete(episodePath)\n      return newSet\n    })\n\n    // Clear progress data\n    setProgressData(prev => {\n      const newData = { ...prev }\n      delete newData[episodePath]\n      return newData\n    })\n\n    if (taskType === 'transcription') {\n      toast.success('Episode is ready for learning!', { id: 'transcription' })\n      // Update episode status\n      setEpisodes(prev => prev.map(ep =>\n        ep.path === episodePath ? { ...ep, has_subtitles: true } : ep\n      ))\n    } else if (taskType === 'filtering') {\n      toast.success('Episode filtering completed!', { id: 'filtering' })\n    } else if (taskType === 'translation') {\n      toast.success('Episode translation completed!', { id: 'translation' })\n    }\n  }\n\n  // Handle progress error\n  const handleTaskError = (episodePath: string, errorMessage: string) => {\n    // Remove from processing tasks\n    setProcessingTasks(prev => {\n      const newSet = new Set(prev)\n      newSet.delete(episodePath)\n      return newSet\n    })\n\n    // Clear progress data\n    setProgressData(prev => {\n      const newData = { ...prev }\n      delete newData[episodePath]\n      return newData\n    })\n\n    toast.error(`Processing failed: ${errorMessage}`, { id: 'transcription' })\n  }\n\n  const handlePlayEpisode = async (episode: VideoInfo) => {\n    // Navigate directly to the chunked learning flow\n    navigate(`/learn/${encodeURIComponent(episode.series)}/${encodeURIComponent(episode.episode)}`, {\n      state: { videoInfo: episode }\n    })\n  }\n\n  const _handleFilterEpisode = async (episode: VideoInfo) => {\n    try {\n      setProcessingTasks(prev => new Set(prev).add(episode.path))\n      toast.loading('Filtering episode subtitles...', { id: 'filtering' })\n\n      // Start filtering\n      const result = await filterSubtitlesApiProcessFilterSubtitlesPost({\n        requestBody: { video_path: episode.path },\n      }) as { task_id: string }\n\n      // Start polling progress\n      pollProgress(result.task_id, episode.path, 'filtering')\n    } catch (error) {\n      setProcessingTasks(prev => {\n        const newSet = new Set(prev)\n        newSet.delete(episode.path)\n        return newSet\n      })\n      handleApiError(error, 'EpisodeSelection.startFiltering')\n      toast.error('Failed to start filtering', { id: 'filtering' })\n    }\n  }\n\n  const _handleTranslateEpisode = async (episode: VideoInfo) => {\n    try {\n      setProcessingTasks(prev => new Set(prev).add(episode.path))\n      toast.loading('Translating episode subtitles...', { id: 'translating' })\n\n      // TODO: translateSubtitlesApiProcessTranslateSubtitlesPost endpoint doesn't exist\n      // Need to investigate correct endpoint or remove this feature\n      throw new Error('Translation endpoint not implemented')\n\n      // pollProgress(result.task_id, episode.path, 'translation')\n    } catch (error) {\n      setProcessingTasks(prev => {\n        const newSet = new Set(prev)\n        newSet.delete(episode.path)\n        return newSet\n      })\n      handleApiError(error, 'EpisodeSelection.startTranslation')\n      toast.error('Failed to start translation', { id: 'translating' })\n    }\n  }\n\n  const _handleRunFullPipeline = (episode: VideoInfo) => {\n    // Navigate to the dedicated pipeline page\n    navigate(`/pipeline/${encodeURIComponent(series || '')}/${encodeURIComponent(episode.episode)}`)\n  }\n\n  const getEpisodeStatus = (episode: VideoInfo) => {\n    if (processingTasks.has(episode.path)) return 'processing'\n    if (episode.has_subtitles) return 'ready'\n    return 'available'\n  }\n\n  const _getStatusText = (status: string) => {\n    switch (status) {\n      case 'ready': return 'Ready to Learn'\n      case 'processing': return 'Processing...'\n      default: return 'Will Process'\n    }\n  }\n\n  const _getProgressData = (episode: VideoInfo): ProcessingStatus | null => {\n    return progressData[episode.path] || null\n  }\n\n  if (!series) {\n    return <ErrorMessage>Series not found</ErrorMessage>\n  }\n\n  return (\n    <>\n      <Header>\n        <Container>\n          <Nav>\n            <BackButton onClick={() => navigate('/')}>\n              <ArrowLeftIcon className=\"w-5 h-5\" />\n              Back to Series\n            </BackButton>\n            <Logo>LangPlug</Logo>\n          </Nav>\n        </Container>\n      </Header>\n\n      <SeriesHeader>\n        <Container>\n          <SeriesTitle>{decodeURIComponent(series)}</SeriesTitle>\n          <SeriesInfo>\n            <InfoItem>\n              <CheckCircleIcon className=\"w-5 h-5\" />\n              {episodes.length} Episodes\n            </InfoItem>\n            <InfoItem>\n              <ClockIcon className=\"w-5 h-5\" />\n              ~5 min segments\n            </InfoItem>\n            <InfoItem>\n              German Learning\n            </InfoItem>\n          </SeriesInfo>\n          <SeriesDescription>\n            Learn German through engaging TV episodes. Our interactive system will help you master new vocabulary\n            by focusing on the most challenging words for your level.\n          </SeriesDescription>\n        </Container>\n      </SeriesHeader>\n\n      <Container>\n        <div style={{ padding: '40px 0' }}>\n          {loading && (\n            <LoadingContainer>\n              <div className=\"loading-spinner\" />\n            </LoadingContainer>\n          )}\n\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n\n          {!loading && !error && episodes.length > 0 && (\n            <EpisodeGrid>\n              {episodes.map((episode, index) => {\n                const status = getEpisodeStatus(episode)\n                const isProcessing = status === 'processing'\n\n                return (\n                  <EpisodeCard key={episode.path}>\n                    <EpisodeThumbnail>\n                      <PlayIconOverlay>\n                        <PlayIcon className=\"w-4 h-4 text-gray-800\" />\n                      </PlayIconOverlay>\n                    </EpisodeThumbnail>\n\n                    <EpisodeInfo>\n                      <EpisodeNumber>Episode {index + 1}</EpisodeNumber>\n                      <EpisodeTitle>{episode.title}</EpisodeTitle>\n                      <EpisodeMeta>\n                        <span>Season {episode.season}</span>\n                        <span>ÔÇó</span>\n                        <span>German Audio</span>\n                        {episode.has_subtitles && (\n                          <>\n                            <span>ÔÇó</span>\n                            <span>Subtitles Ready</span>\n                          </>\n                        )}\n                      </EpisodeMeta>\n                      <EpisodeDescription>\n                        Interactive German learning experience with vocabulary games\n                        and subtitle-based comprehension exercises.\n                      </EpisodeDescription>\n                    </EpisodeInfo>\n\n                    <EpisodeActions>\n                      <PlayButton\n                        onClick={() => handlePlayEpisode(episode)}\n                        disabled={isProcessing}\n                      >\n                        <PlayIcon className=\"w-5 h-5 mr-2\" />\n                        Play\n                      </PlayButton>\n                    </EpisodeActions>\n                  </EpisodeCard>\n                )\n              })}\n            </EpisodeGrid>\n          )}\n        </div>\n      </Container>\n    </>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":102,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":102,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ErrorInfo, ReactNode } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ErrorContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  padding: 2rem;\r\n  text-align: center;\r\n`;\r\n\r\nconst ErrorTitle = styled.h1`\r\n  font-size: 3rem;\r\n  margin-bottom: 1rem;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst ErrorMessage = styled.p`\r\n  font-size: 1.25rem;\r\n  margin-bottom: 2rem;\r\n  max-width: 600px;\r\n  opacity: 0.9;\r\n`;\r\n\r\nconst ErrorButton = styled.button`\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border: 2px solid rgba(255, 255, 255, 0.3);\r\n  color: white;\r\n  padding: 1rem 2rem;\r\n  border-radius: 50px;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  backdrop-filter: blur(10px);\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.3);\r\n    border-color: rgba(255, 255, 255, 0.5);\r\n    transform: translateY(-2px);\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  sectionName?: string;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <ErrorContainer>\r\n          <ErrorTitle>­ƒÿÁ</ErrorTitle>\r\n          <ErrorTitle>Oops!</ErrorTitle>\r\n          <ErrorMessage>\r\n            {this.props.sectionName || 'Something'} encountered an unexpected error.\r\n            Don't worry, it happens to the best of us!\r\n          </ErrorMessage>\r\n          <ErrorButton\r\n            onClick={() => window.location.reload()}\r\n          >\r\n            ­ƒöä Refresh Page\r\n          </ErrorButton>\r\n        </ErrorContainer>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport { ErrorBoundary };\r\n\r\n// Hook for imperatively throwing errors to the nearest error boundary\r\nexport function useErrorHandler() {\r\n  const [error, setError] = React.useState<Error | null>(null);\r\n\r\n  React.useEffect(() => {\r\n    if (error) {\r\n      throw error;\r\n    }\r\n  }, [error]);\r\n\r\n  return setError;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\LanguageSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\LearningPlayer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadSegmentWords'. Either include it or remove the dependency array.","line":318,"column":6,"nodeType":"ArrayExpression","endLine":318,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [videoInfo, navigate, loadSegmentWords]","fix":{"range":[8063,8084],"text":"[videoInfo, navigate, loadSegmentWords]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'segmentIndex' is defined but never used. Allowed unused args must match /^_/u.","line":335,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":335,"endColumn":55},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":412,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":416,"endColumn":6},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":488,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":488,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13722,13798],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":685,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":685,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20404,20407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20404,20407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react'\r\nimport { useParams, useNavigate, useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport ReactPlayer from 'react-player'\r\nimport {\r\n  PlayIcon,\r\n  PauseIcon,\r\n  SpeakerWaveIcon,\r\n  SpeakerXMarkIcon,\r\n  ArrowLeftIcon,\r\n  ForwardIcon,\r\n  LanguageIcon\r\n} from '@heroicons/react/24/solid'\r\nimport { toast } from 'react-hot-toast'\r\nimport { NetflixButton } from '@/styles/GlobalStyles'\r\nimport { VocabularyGame } from './VocabularyGame'\r\nimport { buildVideoStreamUrl, handleApiError } from '@/services/api'\r\nimport { getBlockingWordsApiVocabularyBlockingWordsGet } from '@/client/services.gen'\r\nimport { useGameStore } from '@/store/useGameStore'\r\nimport type { VideoInfo, VocabularyWord } from '@/types'\r\n\r\nconst PlayerContainer = styled.div`\r\n  background: #000;\r\n  min-height: 100vh;\r\n  position: relative;\r\n`\r\n\r\nconst VideoWrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100vh;\r\n  background: #000;\r\n`\r\n\r\nconst ControlsOverlay = styled.div<{ $visible: boolean }>`\r\n  position: absolute;\r\n  inset: 0;\r\n  background: linear-gradient(\r\n    transparent 0%,\r\n    rgba(0, 0, 0, 0.3) 70%,\r\n    rgba(0, 0, 0, 0.8) 100%\r\n  );\r\n  opacity: ${props => props.$visible ? 1 : 0};\r\n  transition: opacity 0.3s ease;\r\n  pointer-events: ${props => props.$visible ? 'auto' : 'none'};\r\n`\r\n\r\nconst TopControls = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20px;\r\n  background: linear-gradient(\r\n    rgba(0, 0, 0, 0.8) 0%,\r\n    transparent 100%\r\n  );\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n`\r\n\r\nconst BackButton = styled.button`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: background 0.3s ease;\r\n\r\n  &:hover {\r\n    background: rgba(0, 0, 0, 0.9);\r\n  }\r\n`\r\n\r\nconst VideoTitle = styled.h1`\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: white;\r\n  flex: 1;\r\n`\r\n\r\nconst SegmentInfo = styled.div`\r\n  color: #b3b3b3;\r\n  font-size: 14px;\r\n  text-align: right;\r\n`\r\n\r\nconst BottomControls = styled.div`\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  padding: 20px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n`\r\n\r\nconst ProgressSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`\r\n\r\nconst ProgressBar = styled.div`\r\n  height: 4px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 2px;\r\n  cursor: pointer;\r\n  position: relative;\r\n`\r\n\r\nconst ProgressFill = styled.div<{ $progress: number }>`\r\n  height: 100%;\r\n  background: #e50914;\r\n  border-radius: 2px;\r\n  width: ${props => props.$progress}%;\r\n  transition: width 0.1s ease;\r\n`\r\n\r\nconst TimeInfo = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  color: #b3b3b3;\r\n`\r\n\r\nconst SegmentProgress = styled.div`\r\n  text-align: center;\r\n  color: white;\r\n`\r\n\r\nconst Controls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst PlayControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n`\r\n\r\nconst ControlButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  padding: 8px;\r\n  border-radius: 50%;\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.1);\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n  }\r\n`\r\n\r\nconst VolumeControl = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n`\r\n\r\nconst VolumeSlider = styled.input`\r\n  width: 100px;\r\n  height: 4px;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-radius: 2px;\r\n  outline: none;\r\n  cursor: pointer;\r\n\r\n  &::-webkit-slider-thumb {\r\n    appearance: none;\r\n    width: 12px;\r\n    height: 12px;\r\n    background: #e50914;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nconst RightControls = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n`\r\n\r\nconst SubtitleToggle = styled(NetflixButton)<{ $mode: string }>`\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n  background: ${props => props.$mode !== 'OFF' ? '#e50914' : 'rgba(255, 255, 255, 0.2)'};\r\n  min-width: 80px;\r\n\r\n  &:hover {\r\n    background: ${props => props.$mode !== 'OFF' ? '#f40612' : 'rgba(255, 255, 255, 0.3)'};\r\n  }\r\n`\r\n\r\nconst NextSegmentButton = styled(NetflixButton)`\r\n  padding: 8px 16px;\r\n  font-size: 14px;\r\n`\r\n\r\nconst FileInput = styled.input`\r\n  display: none;\r\n`\r\n\r\nconst SubtitleDisplay = styled.div`\r\n  position: absolute;\r\n  bottom: 150px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  max-width: 80%;\r\n  text-align: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n`\r\n\r\nconst SubtitleLine = styled.div<{ $language: 'DE' | 'ES' | 'UPLOAD' }>`\r\n  background: rgba(0, 0, 0, 0.85);\r\n  padding: 12px 24px;\r\n  border-radius: 8px;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  border-left: 4px solid ${props => {\r\n    switch (props.$language) {\r\n      case 'DE': return '#ffd700'; // Gold for German\r\n      case 'ES': return '#00ff88'; // Green for Spanish/English\r\n      case 'UPLOAD': return '#ff6b35'; // Orange for uploaded\r\n      default: return '#ffffff';\r\n    }\r\n  }};\r\n  color: ${props => {\r\n    switch (props.$language) {\r\n      case 'DE': return '#ffd700';\r\n      case 'ES': return '#00ff88';\r\n      case 'UPLOAD': return '#ff6b35';\r\n      default: return '#ffffff';\r\n    }\r\n  }};\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);\r\n`\r\n\r\nconst LoadingOverlay = styled.div`\r\n  position: absolute;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  color: white;\r\n  z-index: 10;\r\n`\r\n\r\nexport const LearningPlayer: React.FC = () => {\r\n  const { series: _series, episode: _episode } = useParams<{ series: string; episode: string }>()\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n\r\n  const videoInfo = location.state?.videoInfo as VideoInfo\r\n\r\n  // Player state\r\n  const [playing, setPlaying] = useState(false)\r\n  const [volume, setVolume] = useState(1)\r\n  const [muted, setMuted] = useState(false)\r\n  const [progress, setProgress] = useState(0)\r\n  const [duration, setDuration] = useState(0)\r\n  const [currentTime, setCurrentTime] = useState(0)\r\n  const [controlsVisible, setControlsVisible] = useState(true)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  // Learning state\r\n  const [currentSegment, setCurrentSegment] = useState(0)\r\n  const [segmentWords, setSegmentWords] = useState<VocabularyWord[]>([])\r\n  const [showVocabularyGame, setShowVocabularyGame] = useState(false)\r\n  const [segmentComplete, setSegmentComplete] = useState(false)\r\n\r\n  // Subtitle system state\r\n  type SubtitleMode = 'OFF' | 'DE' | 'ES' | 'DE+ES' | 'UPLOAD'\r\n  const [subtitleMode, setSubtitleMode] = useState<SubtitleMode>('OFF')\r\n  const [uploadedSubtitles, setUploadedSubtitles] = useState<Array<{start: number, end: number, text: string}>>([])\r\n  const [currentUploadedSubtitle, setCurrentUploadedSubtitle] = useState('')\r\n  const [originalSubtitles, _setOriginalSubtitles] = useState<Array<{start: number, end: number, text: string}>>([])\r\n  const [currentOriginalSubtitle, setCurrentOriginalSubtitle] = useState('')\r\n  const [translatedSubtitles, _setTranslatedSubtitles] = useState<Array<{start: number, end: number, text: string}>>([])\r\n  const [currentTranslatedSubtitle, setCurrentTranslatedSubtitle] = useState('')\r\n\r\n  const { showSubtitles: _showSubtitles, toggleSubtitles: _toggleSubtitles, markWordKnown } = useGameStore()\r\n  const playerRef = useRef<ReactPlayer>(null)\r\n  const controlsTimeoutRef = useRef<NodeJS.Timeout>()\r\n\r\n  const SEGMENT_DURATION = 300 // 5 minutes\r\n\r\n  useEffect(() => {\r\n    if (!videoInfo) {\r\n      navigate('/')\r\n      return\r\n    }\r\n\r\n    // Start with vocabulary check for first segment\r\n    loadSegmentWords(0)\r\n  }, [videoInfo, navigate])\r\n\r\n  useEffect(() => {\r\n    // Hide controls after 3 seconds of inactivity\r\n    if (controlsVisible && playing) {\r\n      controlsTimeoutRef.current = setTimeout(() => {\r\n        setControlsVisible(false)\r\n      }, 3000)\r\n    }\r\n\r\n    return () => {\r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [controlsVisible, playing])\r\n\r\n  const loadSegmentWords = async (segmentIndex: number) => {\r\n    if (!videoInfo) return\r\n\r\n    setLoading(true)\r\n    try {\r\n      const blockingWordsResponse = await getBlockingWordsApiVocabularyBlockingWordsGet({\r\n        videoPath: videoInfo.path,\r\n      }) as { blocking_words?: VocabularyWord[] } | VocabularyWord[]\r\n\r\n      const words = Array.isArray(blockingWordsResponse)\r\n        ? blockingWordsResponse\r\n        : blockingWordsResponse?.blocking_words ?? []\r\n\r\n      setSegmentWords(words)\r\n      setShowVocabularyGame(words.length > 0)\r\n    } catch (error) {\r\n      handleApiError(error, 'LearningPlayer.handleError')\r\n      toast.error('Failed to load vocabulary words')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleProgress = (state: { played: number; playedSeconds: number }) => {\r\n    setProgress(state.played * 100)\r\n    setCurrentTime(state.playedSeconds)\r\n\r\n    // Update subtitles based on mode\r\n    if (subtitleMode === 'UPLOAD' && uploadedSubtitles.length > 0) {\r\n      const currentSub = uploadedSubtitles.find(sub =>\r\n        state.playedSeconds >= sub.start && state.playedSeconds <= sub.end\r\n      )\r\n      setCurrentUploadedSubtitle(currentSub?.text || '')\r\n    }\r\n\r\n    if ((subtitleMode === 'DE' || subtitleMode === 'DE+ES') && originalSubtitles.length > 0) {\r\n      const currentSub = originalSubtitles.find(sub =>\r\n        state.playedSeconds >= sub.start && state.playedSeconds <= sub.end\r\n      )\r\n      setCurrentOriginalSubtitle(currentSub?.text || '')\r\n    }\r\n\r\n    if ((subtitleMode === 'ES' || subtitleMode === 'DE+ES') && translatedSubtitles.length > 0) {\r\n      const currentSub = translatedSubtitles.find(sub =>\r\n        state.playedSeconds >= sub.start && state.playedSeconds <= sub.end\r\n      )\r\n      setCurrentTranslatedSubtitle(currentSub?.text || '')\r\n    }\r\n\r\n    // Check if we've completed the current 5-minute segment\r\n    const segmentEnd = (currentSegment + 1) * SEGMENT_DURATION\r\n    if (state.playedSeconds >= segmentEnd && !segmentComplete) {\r\n      setPlaying(false)\r\n      setSegmentComplete(true)\r\n\r\n      // Load words for next segment\r\n      setTimeout(() => {\r\n        const nextSegment = currentSegment + 1\r\n        setCurrentSegment(nextSegment)\r\n        setSegmentComplete(false)\r\n        loadSegmentWords(nextSegment)\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  const handleVocabularyComplete = () => {\r\n    setShowVocabularyGame(false)\r\n    setPlaying(true)\r\n\r\n    // Seek to the start of current segment\r\n    const seekTime = currentSegment * SEGMENT_DURATION\r\n    if (playerRef.current) {\r\n      playerRef.current.seekTo(seekTime, 'seconds')\r\n    }\r\n  }\r\n\r\n  const handleWordAnswered = async (word: string, known: boolean) => {\r\n    try {\r\n      await markWordKnown(word, known)\r\n    } catch (error) {\r\n      throw error // Re-throw to let VocabularyGame handle it\r\n    }\r\n  }\r\n\r\n  const handleSkipVocabulary = () => {\r\n    setShowVocabularyGame(false)\r\n    setPlaying(true)\r\n\r\n    const seekTime = currentSegment * SEGMENT_DURATION\r\n    if (playerRef.current) {\r\n      playerRef.current.seekTo(seekTime, 'seconds')\r\n    }\r\n  }\r\n\r\n  const handlePlayPause = () => {\r\n    setPlaying(!playing)\r\n    setControlsVisible(true)\r\n  }\r\n\r\n  const handleMouseMove = () => {\r\n    setControlsVisible(true)\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current)\r\n    }\r\n  }\r\n\r\n  const handleProgressClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    const bounds = e.currentTarget.getBoundingClientRect()\r\n    const clickX = e.clientX - bounds.left\r\n    const percentage = clickX / bounds.width\r\n    const seekTime = percentage * duration\r\n\r\n    if (playerRef.current) {\r\n      playerRef.current.seekTo(seekTime, 'seconds')\r\n    }\r\n  }\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = Math.floor(seconds % 60)\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`\r\n  }\r\n\r\n  const parseSRT = (srtContent: string) => {\r\n    const subtitles: Array<{start: number, end: number, text: string}> = []\r\n    const blocks = srtContent.trim().split(/\\n\\s*\\n/)\r\n\r\n    for (const block of blocks) {\r\n      const lines = block.split('\\n')\r\n      if (lines.length >= 3) {\r\n        const timeMatch = lines[1].match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3}) --> (\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/)\r\n        if (timeMatch) {\r\n          const start = parseInt(timeMatch[1]) * 3600 + parseInt(timeMatch[2]) * 60 + parseInt(timeMatch[3]) + parseInt(timeMatch[4]) / 1000\r\n          const end = parseInt(timeMatch[5]) * 3600 + parseInt(timeMatch[6]) * 60 + parseInt(timeMatch[7]) + parseInt(timeMatch[8]) / 1000\r\n          const text = lines.slice(2).join(' ').trim()\r\n\r\n          subtitles.push({ start, end, text })\r\n        }\r\n      }\r\n    }\r\n\r\n    return subtitles\r\n  }\r\n\r\n  const handleSRTUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0]\r\n    if (file && file.name.endsWith('.srt')) {\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        const content = e.target?.result as string\r\n        const parsedSubtitles = parseSRT(content)\r\n        setUploadedSubtitles(parsedSubtitles)\r\n        setSubtitleMode('UPLOAD')\r\n        console.log('Loaded uploaded subtitles:', parsedSubtitles.length, 'entries')\r\n      }\r\n      reader.readAsText(file)\r\n    }\r\n  }\r\n\r\n  const cycleSubtitleMode = () => {\r\n    const modes: SubtitleMode[] = ['OFF', 'DE', 'ES', 'DE+ES', 'UPLOAD']\r\n    const currentIndex = modes.indexOf(subtitleMode)\r\n    const nextIndex = (currentIndex + 1) % modes.length\r\n    setSubtitleMode(modes[nextIndex])\r\n  }\r\n\r\n  const getSubtitleModeDisplay = () => {\r\n    switch (subtitleMode) {\r\n      case 'OFF': return 'Off'\r\n      case 'DE': return 'DE'\r\n      case 'ES': return 'ES'\r\n      case 'DE+ES': return 'DE+ES'\r\n      case 'UPLOAD': return 'Upload'\r\n      default: return 'Off'\r\n    }\r\n  }\r\n\r\n  const getCurrentSegmentTime = () => {\r\n    const segmentStart = currentSegment * SEGMENT_DURATION\r\n    const segmentProgress = Math.max(0, currentTime - segmentStart)\r\n    return Math.min(segmentProgress, SEGMENT_DURATION)\r\n  }\r\n\r\n  if (!videoInfo) {\r\n    return null\r\n  }\r\n\r\n  const videoUrl = buildVideoStreamUrl(videoInfo.series, videoInfo.episode)\r\n  const segmentProgress = (getCurrentSegmentTime() / SEGMENT_DURATION) * 100\r\n\r\n  return (\r\n    <PlayerContainer onMouseMove={handleMouseMove}>\r\n      <VideoWrapper>\r\n        <ReactPlayer\r\n          ref={playerRef}\r\n          url={videoUrl}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          playing={playing}\r\n          volume={volume}\r\n          muted={muted}\r\n          controls={false}\r\n          onProgress={handleProgress}\r\n          onDuration={setDuration}\r\n          onReady={() => setLoading(false)}\r\n          onBuffer={() => setLoading(true)}\r\n          onBufferEnd={() => setLoading(false)}\r\n          progressInterval={1000}\r\n        />\r\n\r\n        {loading && (\r\n          <LoadingOverlay>\r\n            <div className=\"loading-spinner\" />\r\n            <p style={{ marginTop: '16px' }}>Loading...</p>\r\n          </LoadingOverlay>\r\n        )}\r\n\r\n        <ControlsOverlay $visible={controlsVisible}>\r\n          <TopControls>\r\n            <BackButton onClick={() => navigate(-1)}>\r\n              <ArrowLeftIcon className=\"w-4 h-4\" />\r\n              Back\r\n            </BackButton>\r\n\r\n            <VideoTitle>{videoInfo.title}</VideoTitle>\r\n\r\n            <SegmentInfo>\r\n              <div>Segment {currentSegment + 1}</div>\r\n              <div>{formatTime(getCurrentSegmentTime())} / {formatTime(SEGMENT_DURATION)}</div>\r\n            </SegmentInfo>\r\n          </TopControls>\r\n\r\n          <BottomControls>\r\n            <ProgressSection>\r\n              <ProgressBar onClick={handleProgressClick}>\r\n                <ProgressFill $progress={progress} />\r\n              </ProgressBar>\r\n\r\n              <TimeInfo>\r\n                <span>{formatTime(currentTime)}</span>\r\n\r\n                <SegmentProgress>\r\n                  Segment Progress: {Math.round(segmentProgress)}%\r\n                </SegmentProgress>\r\n\r\n                <span>{formatTime(duration)}</span>\r\n              </TimeInfo>\r\n            </ProgressSection>\r\n\r\n            <Controls>\r\n              <PlayControls>\r\n                <ControlButton onClick={handlePlayPause}>\r\n                  {playing ? (\r\n                    <PauseIcon className=\"w-6 h-6\" />\r\n                  ) : (\r\n                    <PlayIcon className=\"w-6 h-6\" />\r\n                  )}\r\n                </ControlButton>\r\n\r\n                <VolumeControl>\r\n                  <ControlButton onClick={() => setMuted(!muted)}>\r\n                    {muted ? (\r\n                      <SpeakerXMarkIcon className=\"w-5 h-5\" />\r\n                    ) : (\r\n                      <SpeakerWaveIcon className=\"w-5 h-5\" />\r\n                    )}\r\n                  </ControlButton>\r\n\r\n                  <VolumeSlider\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max=\"1\"\r\n                    step=\"0.1\"\r\n                    value={muted ? 0 : volume}\r\n                    onChange={(e) => {\r\n                      const value = parseFloat(e.target.value)\r\n                      setVolume(value)\r\n                      setMuted(value === 0)\r\n                    }}\r\n                  />\r\n                </VolumeControl>\r\n              </PlayControls>\r\n\r\n              <RightControls>\r\n                <SubtitleToggle\r\n                  $mode={subtitleMode}\r\n                  onClick={() => {\r\n                    if (subtitleMode === 'UPLOAD') {\r\n                      // Trigger file upload when in upload mode and clicked again\r\n                      document.getElementById('srt-upload')?.click()\r\n                    } else {\r\n                      cycleSubtitleMode()\r\n                    }\r\n                  }}\r\n                >\r\n                  <LanguageIcon className=\"w-4 h-4 inline mr-2\" />\r\n                  {getSubtitleModeDisplay()}\r\n                </SubtitleToggle>\r\n\r\n                <FileInput\r\n                  type=\"file\"\r\n                  accept=\".srt\"\r\n                  id=\"srt-upload\"\r\n                  onChange={handleSRTUpload}\r\n                />\r\n\r\n                <NextSegmentButton onClick={() => {\r\n                  const nextSegment = currentSegment + 1\r\n                  setCurrentSegment(nextSegment)\r\n                  loadSegmentWords(nextSegment)\r\n                  setPlaying(false)\r\n                }}>\r\n                  <ForwardIcon className=\"w-4 h-4 inline mr-2\" />\r\n                  Next Segment\r\n                </NextSegmentButton>\r\n              </RightControls>\r\n            </Controls>\r\n          </BottomControls>\r\n        </ControlsOverlay>\r\n\r\n        {subtitleMode !== 'OFF' && (\r\n          <SubtitleDisplay>\r\n            {subtitleMode === 'DE' && currentOriginalSubtitle && (\r\n              <SubtitleLine $language=\"DE\">{currentOriginalSubtitle}</SubtitleLine>\r\n            )}\r\n\r\n            {subtitleMode === 'ES' && currentTranslatedSubtitle && (\r\n              <SubtitleLine $language=\"ES\">{currentTranslatedSubtitle}</SubtitleLine>\r\n            )}\r\n\r\n            {subtitleMode === 'DE+ES' && (\r\n              <>\r\n                {currentOriginalSubtitle && (\r\n                  <SubtitleLine $language=\"DE\">{currentOriginalSubtitle}</SubtitleLine>\r\n                )}\r\n                {currentTranslatedSubtitle && (\r\n                  <SubtitleLine $language=\"ES\">{currentTranslatedSubtitle}</SubtitleLine>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {subtitleMode === 'UPLOAD' && currentUploadedSubtitle && (\r\n              <SubtitleLine $language=\"UPLOAD\">{currentUploadedSubtitle}</SubtitleLine>\r\n            )}\r\n          </SubtitleDisplay>\r\n        )}\r\n      </VideoWrapper>\r\n\r\n      {showVocabularyGame && (\r\n        <VocabularyGame\r\n          words={segmentWords as any}\r\n          onWordAnswered={handleWordAnswered}\r\n          onComplete={handleVocabularyComplete}\r\n          onSkip={handleSkipVocabulary}\r\n          isLoading={loading}\r\n        />\r\n      )}\r\n    </PlayerContainer>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ProcessingScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\VideoSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\VocabularyGame.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowPathIcon' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FlexCenter' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'episodeTitle' is defined but never used. Allowed unused args must match /^_/u.","line":253,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":253,"endColumn":15}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { CheckIcon, XMarkIcon, ArrowPathIcon } from '@heroicons/react/24/solid'\r\nimport { toast } from 'react-hot-toast'\r\nimport { NetflixButton, FlexCenter } from '@/styles/GlobalStyles'\r\nimport type { VocabularyWord as GeneratedVocabularyWord } from '@/client/types.gen'\r\n\r\n// Extend the generated type to include definition\r\ntype VocabularyWord = GeneratedVocabularyWord & {\r\n  definition?: string\r\n}\r\n\r\nconst GameContainer = styled.div`\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(0, 0, 0, 0.95);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  z-index: 1000;\r\n`\r\n\r\nconst GameHeader = styled.div`\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n`\r\n\r\nconst GameTitle = styled.h2`\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  color: white;\r\n  margin-bottom: 16px;\r\n`\r\n\r\nconst GameSubtitle = styled.p`\r\n  font-size: 16px;\r\n  color: #b3b3b3;\r\n  margin-bottom: 24px;\r\n`\r\n\r\nconst ProgressBar = styled.div`\r\n  width: 300px;\r\n  height: 4px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  overflow: hidden;\r\n  margin: 0 auto;\r\n`\r\n\r\nconst ProgressFill = styled.div<{ $progress: number }>`\r\n  width: ${props => props.$progress}%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #e50914, #f40612);\r\n  transition: width 0.3s ease;\r\n`\r\n\r\nconst ProgressText = styled.div`\r\n  color: #b3b3b3;\r\n  font-size: 14px;\r\n  margin-top: 8px;\r\n`\r\n\r\nconst CardContainer = styled.div`\r\n  position: relative;\r\n  width: 400px;\r\n  height: 500px;\r\n  margin: 40px auto;\r\n\r\n  @media (max-width: 480px) {\r\n    width: 320px;\r\n    height: 420px;\r\n  }\r\n`\r\n\r\nconst VocabularyCard = styled(motion.div).withConfig({\r\n  shouldForwardProp: (prop) => !['dragConstraints', 'drag', 'onDragEnd'].includes(prop),\r\n})`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));\r\n  border-radius: 16px;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  backdrop-filter: blur(10px);\r\n  padding: 40px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n  cursor: grab;\r\n  user-select: none;\r\n\r\n  &:active {\r\n    cursor: grabbing;\r\n  }\r\n`\r\n\r\nconst WordText = styled.h1`\r\n  font-size: 48px;\r\n  font-weight: bold;\r\n  color: white;\r\n  margin-bottom: 24px;\r\n  word-break: break-word;\r\n\r\n  @media (max-width: 480px) {\r\n    font-size: 36px;\r\n  }\r\n`\r\n\r\nconst DifficultyBadge = styled.div<{ $level: string }>`\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  margin-bottom: 16px;\r\n\r\n  ${props => {\r\n    switch (props.$level.toLowerCase()) {\r\n      case 'a1':\r\n        return 'background: rgba(70, 211, 105, 0.2); color: #46d369; border: 1px solid #46d369;'\r\n      case 'a2':\r\n        return 'background: rgba(59, 130, 246, 0.2); color: #3b82f6; border: 1px solid #3b82f6;'\r\n      case 'b1':\r\n        return 'background: rgba(232, 124, 3, 0.2); color: #e87c03; border: 1px solid #e87c03;'\r\n      case 'b2':\r\n        return 'background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid #ef4444;'\r\n      default:\r\n        return 'background: rgba(156, 163, 175, 0.2); color: #9ca3af; border: 1px solid #9ca3af;'\r\n    }\r\n  }}\r\n`\r\n\r\nconst Definition = styled.p`\r\n  font-size: 16px;\r\n  color: #b3b3b3;\r\n  line-height: 1.5;\r\n  max-width: 280px;\r\n  margin-bottom: 32px;\r\n`\r\n\r\nconst SwipeHint = styled.div`\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  font-size: 14px;\r\n  color: #666;\r\n`\r\n\r\nconst SwipeAction = styled.div<{ $type: 'know' | 'unknown' }>`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  background: ${props => props.$type === 'know'\r\n    ? 'rgba(70, 211, 105, 0.1)'\r\n    : 'rgba(239, 68, 68, 0.1)'\r\n  };\r\n  border: 1px solid ${props => props.$type === 'know'\r\n    ? 'rgba(70, 211, 105, 0.3)'\r\n    : 'rgba(239, 68, 68, 0.3)'\r\n  };\r\n  color: ${props => props.$type === 'know' ? '#46d369' : '#ef4444'};\r\n`\r\n\r\nconst ActionButtons = styled.div`\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-top: 40px;\r\n`\r\n\r\nconst ActionButton = styled.button<{ $type: 'know' | 'unknown' }>`\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s ease;\r\n\r\n  ${props => props.$type === 'know' ? `\r\n    background: rgba(70, 211, 105, 0.2);\r\n    color: #46d369;\r\n    border: 2px solid #46d369;\r\n\r\n    &:hover {\r\n      background: rgba(70, 211, 105, 0.3);\r\n      transform: scale(1.1);\r\n    }\r\n  ` : `\r\n    background: rgba(239, 68, 68, 0.2);\r\n    color: #ef4444;\r\n    border: 2px solid #ef4444;\r\n\r\n    &:hover {\r\n      background: rgba(239, 68, 68, 0.3);\r\n      transform: scale(1.1);\r\n    }\r\n  `}\r\n`\r\n\r\nconst CompletionScreen = styled.div`\r\n  text-align: center;\r\n  color: white;\r\n`\r\n\r\nconst CompletionTitle = styled.h2`\r\n  font-size: 36px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n`\r\n\r\nconst CompletionStats = styled.div`\r\n  font-size: 18px;\r\n  color: #b3b3b3;\r\n  margin-bottom: 32px;\r\n`\r\n\r\nconst LoadingSpinner = styled.div`\r\n  color: white;\r\n  text-align: center;\r\n`\r\n\r\ninterface VocabularyGameProps {\r\n  words: VocabularyWord[]\r\n  onWordAnswered?: (word: string, known: boolean) => Promise<void>\r\n  onComplete: (knownWords: string[], unknownWords: string[]) => void\r\n  onSkip?: () => void\r\n  episodeTitle?: string\r\n  chunkInfo?: {\r\n    current: number\r\n    total: number\r\n    duration: string\r\n  }\r\n  isLoading?: boolean\r\n}\r\n\r\nexport const VocabularyGame: React.FC<VocabularyGameProps> = ({\r\n  words,\r\n  onWordAnswered,\r\n  onComplete,\r\n  onSkip,\r\n  episodeTitle,\r\n  chunkInfo,\r\n  isLoading = false\r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0)\r\n  const [answeredWords, setAnsweredWords] = useState(0)\r\n  const [knownCount, setKnownCount] = useState(0)\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n  const [knownWords, setKnownWords] = useState<string[]>([])\r\n  const [unknownWords, setUnknownWords] = useState<string[]>([])\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const currentWord = words[currentIndex]\r\n  const progress = words.length > 0 ? ((currentIndex + 1) / words.length) * 100 : 0\r\n  const isComplete = currentIndex >= words.length\r\n\r\n  useEffect(() => {\r\n    if (isComplete && answeredWords > 0) {\r\n      onComplete(knownWords, unknownWords)\r\n    }\r\n  }, [isComplete, answeredWords, onComplete, knownWords, unknownWords])\r\n\r\n  const handleAnswer = async (known: boolean) => {\r\n    if (!currentWord || isProcessing) return\r\n\r\n    setIsProcessing(true)\r\n\r\n    try {\r\n      if (onWordAnswered) {\r\n        await onWordAnswered(currentWord.word, known)\r\n      }\r\n\r\n      setAnsweredWords(prev => prev + 1)\r\n      if (known) {\r\n        setKnownCount(prev => prev + 1)\r\n        setKnownWords(prev => [...prev, currentWord.word])\r\n      } else {\r\n        setUnknownWords(prev => [...prev, currentWord.word])\r\n      }\r\n\r\n      // Move to next word after a short delay\r\n      setTimeout(() => {\r\n        setCurrentIndex(prev => prev + 1)\r\n        setIsProcessing(false)\r\n      }, 300)\r\n\r\n    } catch (error) {\r\n      setIsProcessing(false)\r\n      setError('Failed to save word progress. Please check your connection and try again.')\r\n      toast.error('Failed to save word progress')\r\n    }\r\n  }\r\n\r\n  const handleRetry = () => {\r\n    setError(null)\r\n    setIsProcessing(false)\r\n  }\r\n\r\n  const handleSkip = async () => {\r\n    if (isProcessing) return\r\n\r\n    setIsProcessing(true)\r\n\r\n    try {\r\n      // Don't save remaining words - just skip to the video\r\n      // The user explicitly chose to skip, so we don't need to mark them as unknown\r\n      // This avoids unnecessary API calls and failures when the backend is down\r\n\r\n      // Complete with current progress (only words that were actually answered)\r\n      onComplete(knownWords, unknownWords)\r\n\r\n      // Call skip handler if provided to move to the next phase\r\n      if (onSkip) {\r\n        onSkip()\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Failed to skip:', error)\r\n      // Still allow skip even if error occurs\r\n      if (onSkip) {\r\n        onSkip()\r\n      }\r\n    } finally {\r\n      setIsProcessing(false)\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <GameContainer>\r\n        <LoadingSpinner>\r\n          <div className=\"loading-spinner\" />\r\n          <p style={{ marginTop: '16px' }}>Loading vocabulary words...</p>\r\n        </LoadingSpinner>\r\n      </GameContainer>\r\n    )\r\n  }\r\n\r\n  if (words.length === 0) {\r\n    return (\r\n      <GameContainer>\r\n        <CompletionScreen data-testid=\"empty-state\">\r\n          <CompletionTitle>No New Words!</CompletionTitle>\r\n          <p style={{ color: '#b3b3b3', marginBottom: '32px' }}>\r\n            You already know all the vocabulary in this segment. Great job!\r\n          </p>\r\n          <NetflixButton onClick={() => onComplete([], [])}>\r\n            Continue Watching\r\n          </NetflixButton>\r\n        </CompletionScreen>\r\n      </GameContainer>\r\n    )\r\n  }\r\n\r\n  if (isComplete) {\r\n    return (\r\n      <GameContainer>\r\n        <CompletionScreen data-testid=\"success-message\">\r\n          <CompletionTitle>Segment Complete!</CompletionTitle>\r\n          <CompletionStats>\r\n            You knew {knownCount} out of {answeredWords} words ({Math.round((knownCount / answeredWords) * 100)}%)\r\n          </CompletionStats>\r\n          <NetflixButton onClick={() => onComplete(knownWords, unknownWords)}>\r\n            Watch This Segment\r\n          </NetflixButton>\r\n        </CompletionScreen>\r\n      </GameContainer>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <GameContainer>\r\n      <GameHeader>\r\n        <GameTitle>Vocabulary Check</GameTitle>\r\n        {chunkInfo && (\r\n          <GameSubtitle style={{ marginBottom: '8px' }}>\r\n            Chunk {chunkInfo.current} of {chunkInfo.total} ÔÇó {chunkInfo.duration}\r\n          </GameSubtitle>\r\n        )}\r\n        <GameSubtitle>Do you know this word?</GameSubtitle>\r\n        <ProgressBar>\r\n          <ProgressFill $progress={progress} />\r\n        </ProgressBar>\r\n        <ProgressText>\r\n          {currentIndex + 1} of {words.length} words\r\n        </ProgressText>\r\n      </GameHeader>\r\n\r\n      <CardContainer>\r\n        <AnimatePresence mode=\"wait\">\r\n          {currentWord && (\r\n            <VocabularyCard\r\n              key={currentWord.word}\r\n              initial={{ x: 100, opacity: 0, scale: 0.8 }}\r\n              animate={{ x: 0, opacity: 1, scale: 1 }}\r\n              exit={{ x: -100, opacity: 0, scale: 0.8 }}\r\n              transition={{ duration: 0.3 }}\r\n              drag=\"x\"\r\n              dragConstraints={{ left: 0, right: 0 }}\r\n              onDragEnd={(_, info) => {\r\n                if (info.offset.x > 100) {\r\n                  handleAnswer(true)\r\n                } else if (info.offset.x < -100) {\r\n                  handleAnswer(false)\r\n                }\r\n              }}\r\n            >\r\n              <WordText data-testid=\"vocabulary-word\">{currentWord?.word || ''}</WordText>\r\n              {currentWord?.lemma && (\r\n                <Definition>Lemma: {currentWord.lemma}</Definition>\r\n              )}\r\n\r\n              <DifficultyBadge data-testid=\"difficulty-badge\" $level={currentWord?.difficulty_level}>\r\n                {(currentWord?.difficulty_level || 'unknown').toUpperCase()} Level\r\n              </DifficultyBadge>\r\n\r\n              {currentWord?.definition && (\r\n                <Definition data-testid=\"translation\">{currentWord?.definition}</Definition>\r\n              )}\r\n\r\n              <SwipeHint>\r\n                <SwipeAction $type=\"unknown\">\r\n                  <XMarkIcon className=\"w-4 h-4\" />\r\n                  Swipe left if unknown\r\n                </SwipeAction>\r\n                <SwipeAction $type=\"know\">\r\n                  <CheckIcon className=\"w-4 h-4\" />\r\n                  Swipe right if you know\r\n                </SwipeAction>\r\n              </SwipeHint>\r\n            </VocabularyCard>\r\n          )}\r\n        </AnimatePresence>\r\n      </CardContainer>\r\n\r\n      <ActionButtons>\r\n        <ActionButton\r\n          data-testid=\"mark-unknown-button\"\r\n          aria-label=\"I don't know this word\"\r\n          $type=\"unknown\"\r\n          onClick={() => handleAnswer(false)}\r\n          disabled={isProcessing}\r\n        >\r\n          <XMarkIcon className=\"w-6 h-6\" />\r\n        </ActionButton>\r\n\r\n        <ActionButton\r\n          data-testid=\"mark-known-button\"\r\n          aria-label=\"I know this word\"\r\n          $type=\"know\"\r\n          onClick={() => handleAnswer(true)}\r\n          disabled={isProcessing}\r\n        >\r\n          <CheckIcon className=\"w-6 h-6\" />\r\n        </ActionButton>\r\n      </ActionButtons>\r\n\r\n      <div style={{ marginTop: '24px' }}>\r\n        <NetflixButton\r\n          data-testid=\"skip-remaining-button\"\r\n          aria-label=\"Skip remaining words\"\r\n          variant=\"secondary\"\r\n          onClick={handleSkip}\r\n        >\r\n          Skip Remaining\r\n        </NetflixButton>\r\n      </div>\r\n\r\n      {error && (\r\n        <div\r\n          data-testid=\"error-message\"\r\n          style={{\r\n            marginTop: '24px',\r\n            padding: '16px',\r\n            background: 'rgba(239, 68, 68, 0.1)',\r\n            border: '1px solid rgba(239, 68, 68, 0.3)',\r\n            borderRadius: '8px',\r\n            color: '#ef4444',\r\n            textAlign: 'center',\r\n            maxWidth: '400px',\r\n          }}\r\n        >\r\n          <p style={{ marginBottom: '12px' }}>{error}</p>\r\n          <NetflixButton\r\n            data-testid=\"retry-button\"\r\n            variant=\"secondary\"\r\n            onClick={handleRetry}\r\n            style={{ fontSize: '14px', padding: '8px 16px' }}\r\n          >\r\n            Retry\r\n          </NetflixButton>\r\n        </div>\r\n      )}\r\n    </GameContainer>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\VocabularyLibrary.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLevelData'. Either include it or remove the dependency array.","line":455,"column":6,"nodeType":"ArrayExpression","endLine":455,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [activeLevel, loadLevelData]","fix":{"range":[10795,10808],"text":"[activeLevel, loadLevelData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadLevelData'. Either include it or remove the dependency array.","line":464,"column":6,"nodeType":"ArrayExpression","endLine":464,"endColumn":44,"suggestions":[{"desc":"Update the dependencies array to be: [searchTerm, currentPage, activeLevel, loadLevelData]","fix":{"range":[11042,11080],"text":"[searchTerm, currentPage, activeLevel, loadLevelData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":470,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":470,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11270,11273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11270,11273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":487,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11828,11831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11828,11831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":518,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":518,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12902,12905],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12902,12905],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":591,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":591,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15088,15091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15088,15091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":681,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":681,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17957,17960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17957,17960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'levelData.words'. Either include it or remove the dependency array.","line":723,"column":6,"nodeType":"ArrayExpression","endLine":723,"endColumn":69,"suggestions":[{"desc":"Update the dependencies array to be: [windowSize.width, windowSize.height, levelData.words]","fix":{"range":[19389,19452],"text":"[windowSize.width, windowSize.height, levelData.words]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'levelData'. Either include it or remove the dependency array.","line":732,"column":6,"nodeType":"ArrayExpression","endLine":732,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [levelData, levelData.words.length]","fix":{"range":[19694,19719],"text":"[levelData, levelData.words.length]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'activeLevel'. Either exclude it or remove the dependency array.","line":757,"column":6,"nodeType":"ArrayExpression","endLine":757,"endColumn":78,"suggestions":[{"desc":"Update the dependencies array to be: [levelData.words, gridConfig.columnCount, handleWordClick]","fix":{"range":[20414,20486],"text":"[levelData.words, gridConfig.columnCount, handleWordClick]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, memo, useCallback, useMemo } from 'react'\r\nimport { toast } from 'react-hot-toast'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { Grid } from 'react-window'\r\nimport type { CellComponentProps } from 'react-window'\r\nimport {\r\n  bulkMarkLevelApiVocabularyLibraryBulkMarkPost,\r\n  getVocabularyLevelApiVocabularyLibraryLevelGet,\r\n  getVocabularyStatsApiVocabularyStatsGet,\r\n  markWordKnownApiVocabularyMarkKnownPost,\r\n} from '@/client/services.gen'\r\nimport { logger } from '@/services/logger'\r\nimport { formatApiError, isRateLimitError, getRetryAfter } from '@/utils/error-formatter'\r\nimport type { VocabularyLevel, VocabularyStats, VocabularyLibraryWord } from '@/types'\r\n\r\nconst Container = styled.div`\r\n  padding: 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n`\r\n\r\nconst BackButton = styled.button`\r\n  background: #34495e;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.75rem 1.5rem;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  margin-bottom: 2rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  transition: background-color 0.2s;\r\n\r\n  &:hover {\r\n    background: #2c3e50;\r\n  }\r\n\r\n  &:before {\r\n    content: 'ÔåÉ';\r\n    font-size: 1.2rem;\r\n  }\r\n`\r\n\r\nconst Header = styled.div`\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n\r\n  h1 {\r\n    color: #2c3e50;\r\n    font-size: 2.5rem;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n\r\n  p {\r\n    color: #7f8c8d;\r\n    font-size: 1.1rem;\r\n  }\r\n`\r\n\r\nconst StatsGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  margin-bottom: 2rem;\r\n`\r\n\r\nconst StatCard = styled.div`\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  padding: 1.5rem;\r\n  border-radius: 12px;\r\n  text-align: center;\r\n\r\n  .stat-number {\r\n    font-size: 2rem;\r\n    font-weight: bold;\r\n    margin-bottom: 0.5rem;\r\n  }\r\n\r\n  .stat-label {\r\n    font-size: 0.9rem;\r\n    opacity: 0.9;\r\n  }\r\n`\r\n\r\nconst LevelTabs = styled.div`\r\n  display: flex;\r\n  background: #f8f9fa;\r\n  border-radius: 12px;\r\n  padding: 0.5rem;\r\n  margin-bottom: 2rem;\r\n  gap: 0.5rem;\r\n`\r\n\r\nconst LevelTab = styled.button<{ $active: boolean }>`\r\n  flex: 1;\r\n  padding: 1rem;\r\n  border: none;\r\n  background: ${props => props.$active ? '#667eea' : 'transparent'};\r\n  color: ${props => props.$active ? 'white' : '#2c3e50'};\r\n  border-radius: 8px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: ${props => props.$active ? '#667eea' : '#e9ecef'};\r\n  }\r\n`\r\n\r\nconst LevelHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n  padding: 1.5rem;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\r\n\r\n  .level-info {\r\n    h2 {\r\n      color: #2c3e50;\r\n      margin: 0 0 0.5rem 0;\r\n    }\r\n\r\n    .progress-bar {\r\n      width: 200px;\r\n      height: 8px;\r\n      background: #ecf0f1;\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n\r\n      .progress-fill {\r\n        height: 100%;\r\n        background: linear-gradient(90deg, #52c41a, #389e0d);\r\n        transition: width 0.3s ease;\r\n      }\r\n    }\r\n\r\n    .progress-text {\r\n      font-size: 0.9rem;\r\n      color: #7f8c8d;\r\n      margin-top: 0.5rem;\r\n    }\r\n  }\r\n\r\n  .level-actions {\r\n    display: flex;\r\n    gap: 1rem;\r\n  }\r\n`\r\n\r\nconst Button = styled.button<{ $variant?: 'primary' | 'secondary' | 'danger' }>`\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  transition: all 0.2s ease;\r\n\r\n  ${props => {\r\n    switch (props.$variant) {\r\n      case 'primary':\r\n        return `\r\n          background: #52c41a;\r\n          color: white;\r\n          &:hover { background: #389e0d; }\r\n        `;\r\n      case 'danger':\r\n        return `\r\n          background: #ff4d4f;\r\n          color: white;\r\n          &:hover { background: #d32f2f; }\r\n        `;\r\n      default:\r\n        return `\r\n          background: #f0f0f0;\r\n          color: #2c3e50;\r\n          &:hover { background: #e0e0e0; }\r\n        `;\r\n    }\r\n  }}\r\n`\r\n\r\nconst WordsGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 1rem;\r\n`\r\n\r\nconst WordCard = styled.div<{ $known: boolean }>`\r\n  background: white;\r\n  border: 2px solid ${props => props.$known ? '#52c41a' : '#e9ecef'};\r\n  border-radius: 12px;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    border-color: ${props => props.$known ? '#389e0d' : '#667eea'};\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 15px rgba(0,0,0,0.1);\r\n  }\r\n\r\n  .word-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: flex-start;\r\n    margin-bottom: 0.5rem;\r\n\r\n    .word {\r\n      font-size: 1.2rem;\r\n      font-weight: 600;\r\n      color: #2c3e50;\r\n    }\r\n\r\n    .known-badge {\r\n      width: 20px;\r\n      height: 20px;\r\n      border-radius: 50%;\r\n      background: ${props => props.$known ? '#52c41a' : '#dee2e6'};\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n\r\n      &::after {\r\n        content: 'Ô£ô';\r\n        color: white;\r\n        font-size: 12px;\r\n        opacity: ${props => props.$known ? 1 : 0};\r\n      }\r\n    }\r\n  }\r\n\r\n  .word-details {\r\n    .part-of-speech {\r\n      font-size: 0.8rem;\r\n      color: #667eea;\r\n      background: #f0f2ff;\r\n      padding: 0.25rem 0.5rem;\r\n      border-radius: 4px;\r\n      display: inline-block;\r\n      margin-bottom: 0.5rem;\r\n    }\r\n\r\n    .definition {\r\n      font-size: 0.9rem;\r\n      color: #7f8c8d;\r\n      line-height: 1.4;\r\n    }\r\n  }\r\n`\r\n\r\nconst LoadingSpinner = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 200px;\r\n\r\n  .spinner {\r\n    width: 40px;\r\n    height: 40px;\r\n    border: 4px solid #f3f3f3;\r\n    border-top: 4px solid #667eea;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n  }\r\n\r\n  @keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n`\r\n\r\nconst SearchContainer = styled.div`\r\n  margin-bottom: 1.5rem;\r\n  display: flex;\r\n  gap: 1rem;\r\n  align-items: center;\r\n`\r\n\r\nconst SearchInput = styled.input`\r\n  flex: 1;\r\n  padding: 0.75rem 1rem;\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.2s;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n  }\r\n\r\n  &::placeholder {\r\n    color: #a0a0a0;\r\n  }\r\n`\r\n\r\nconst PaginationContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin: 2rem 0;\r\n`\r\n\r\nconst PaginationButton = styled.button<{ $disabled?: boolean }>`\r\n  padding: 0.5rem 1rem;\r\n  border: 2px solid #667eea;\r\n  background: ${props => props.$disabled ? '#f0f0f0' : 'white'};\r\n  color: ${props => props.$disabled ? '#a0a0a0' : '#667eea'};\r\n  border-radius: 6px;\r\n  cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};\r\n  font-weight: 500;\r\n  transition: all 0.2s;\r\n\r\n  &:hover:not(:disabled) {\r\n    background: #667eea;\r\n    color: white;\r\n  }\r\n`\r\n\r\nconst PageInfo = styled.span`\r\n  color: #2c3e50;\r\n  font-weight: 500;\r\n`\r\n\r\nconst LEVELS = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2']\r\nconst ITEMS_PER_PAGE = 100\r\n\r\n// Constants for virtual scrolling\r\nconst CARD_WIDTH = 296  // 280px card + 16px gap\r\nconst CARD_HEIGHT = 140  // Approximate card height\r\nconst MIN_COLUMNS = 1\r\nconst MAX_COLUMNS = 4\r\n\r\n// Hook to track window size for responsive grid\r\nconst useWindowSize = () => {\r\n  const [size, setSize] = useState({\r\n    width: typeof window !== 'undefined' ? window.innerWidth : 1200,\r\n    height: typeof window !== 'undefined' ? window.innerHeight : 800,\r\n  })\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      })\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize)\r\n    return () => window.removeEventListener('resize', handleResize)\r\n  }, [])\r\n\r\n  return size\r\n}\r\n\r\n// Memoized components to prevent unnecessary re-renders\r\n\r\ninterface WordCardItemProps {\r\n  word: VocabularyLibraryWord\r\n  onWordClick: (word: VocabularyLibraryWord) => void\r\n}\r\n\r\nconst WordCardItem = memo(({ word, onWordClick }: WordCardItemProps) => {\r\n  return (\r\n    <WordCard\r\n      $known={word.known}\r\n      onClick={() => onWordClick(word)}\r\n    >\r\n      <div className=\"word-header\">\r\n        <div className=\"word\">{word.word}</div>\r\n        <div className=\"known-badge\" />\r\n      </div>\r\n\r\n      <div className=\"word-details\">\r\n        {word.translation && (\r\n          <div className=\"definition\">{word.translation}</div>\r\n        )}\r\n      </div>\r\n    </WordCard>\r\n  )\r\n})\r\nWordCardItem.displayName = 'WordCardItem'\r\n\r\ninterface StatCardItemProps {\r\n  label: string\r\n  value: string | number\r\n}\r\n\r\nconst StatCardItem = memo(({ label, value }: StatCardItemProps) => {\r\n  return (\r\n    <StatCard>\r\n      <div className=\"stat-number\">{value}</div>\r\n      <div className=\"stat-label\">{label}</div>\r\n    </StatCard>\r\n  )\r\n})\r\nStatCardItem.displayName = 'StatCardItem'\r\n\r\ninterface LevelTabItemProps {\r\n  level: string\r\n  active: boolean\r\n  userKnown: number\r\n  totalWords: number\r\n  onClick: (level: string) => void\r\n}\r\n\r\nconst LevelTabItem = memo(({ level, active, userKnown, totalWords, onClick }: LevelTabItemProps) => {\r\n  return (\r\n    <LevelTab\r\n      $active={active}\r\n      onClick={() => onClick(level)}\r\n    >\r\n      {level}\r\n      <div style={{ fontSize: '0.8rem', opacity: 0.8 }}>\r\n        {userKnown} / {totalWords}\r\n      </div>\r\n    </LevelTab>\r\n  )\r\n})\r\nLevelTabItem.displayName = 'LevelTabItem'\r\n\r\nexport const VocabularyLibrary: React.FC = () => {\r\n  const navigate = useNavigate()\r\n  const windowSize = useWindowSize()\r\n  const [activeLevel, setActiveLevel] = useState<string>('A1')\r\n  const [levelData, setLevelData] = useState<VocabularyLevel | null>(null)\r\n  const [stats, setStats] = useState<VocabularyStats | null>(null)\r\n  const [loading, setLoading] = useState(false)\r\n  const [bulkLoading, setBulkLoading] = useState(false)\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [currentPage, setCurrentPage] = useState(0)\r\n  const [useVirtualScrolling, setUseVirtualScrolling] = useState(false)\r\n\r\n  useEffect(() => {\r\n    logger.info('VocabularyLibrary', 'Component mounted, loading vocabulary stats')\r\n    loadStats()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (activeLevel) {\r\n      logger.userAction('level-change', 'VocabularyLibrary', { level: activeLevel })\r\n      setCurrentPage(0) // Reset to first page when level changes\r\n      setSearchTerm('') // Clear search when changing levels\r\n      loadLevelData(activeLevel)\r\n    }\r\n  }, [activeLevel])\r\n\r\n  useEffect(() => {\r\n    if (activeLevel) {\r\n      const delayedSearch = setTimeout(() => {\r\n        loadLevelData(activeLevel)\r\n      }, 300) // Debounce search input\r\n      return () => clearTimeout(delayedSearch)\r\n    }\r\n  }, [searchTerm, currentPage, activeLevel])\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      const statsData = await getVocabularyStatsApiVocabularyStatsGet()\r\n      setStats(statsData as VocabularyStats)\r\n    } catch (error: any) {\r\n      const errorMessage = formatApiError(error, 'Failed to load vocabulary statistics')\r\n      logger.error('VocabularyLibrary', 'Failed to load stats', { error: errorMessage })\r\n      toast.error(errorMessage, { duration: 4000 })\r\n    }\r\n  }\r\n\r\n  const loadLevelData = async (level: string) => {\r\n    setLoading(true)\r\n    try {\r\n      logger.info('VocabularyLibrary', 'Loading level data', {\r\n        level,\r\n        searchTerm,\r\n        currentPage,\r\n        offset: searchTerm ? 0 : currentPage * ITEMS_PER_PAGE\r\n      })\r\n\r\n      const params: any = {\r\n        level,\r\n        targetLanguage: 'de',\r\n        limit: searchTerm ? 1000 : ITEMS_PER_PAGE, // Show all results when searching\r\n        search: searchTerm || undefined,\r\n      }\r\n\r\n      // Add offset separately as it might not be in the type definition\r\n      if (!searchTerm) {\r\n        params.offset = currentPage * ITEMS_PER_PAGE\r\n      }\r\n\r\n      const data = await getVocabularyLevelApiVocabularyLibraryLevelGet(params) as VocabularyLevel\r\n\r\n      logger.info('VocabularyLibrary', 'Level data loaded', {\r\n        level,\r\n        wordCount: data.words?.length || 0,\r\n        totalCount: data.total_count,\r\n        knownCount: data.known_count\r\n      })\r\n\r\n      const normalizedLevel: VocabularyLevel = {\r\n        ...data,\r\n        words: (data.words ?? []).map((word, index) => ({\r\n          ...word,\r\n          id: word.id || word.lemma || `temp-${index}-${word.word}`,  // Ensure id is always a string\r\n          known: Boolean(word.known),\r\n        })) as VocabularyLibraryWord[],\r\n      }\r\n\r\n      setLevelData(normalizedLevel)\r\n    } catch (error: any) {\r\n      const errorMessage = formatApiError(error, `Failed to load ${level} vocabulary`)\r\n      logger.error('VocabularyLibrary', 'Failed to load level data', { level, error: errorMessage })\r\n\r\n      // Check for rate limiting\r\n      if (isRateLimitError(error)) {\r\n        const retryAfter = getRetryAfter(error)\r\n        toast.error(`Rate limit exceeded. Please wait ${retryAfter} seconds before trying again.`)\r\n      } else {\r\n        toast.error(errorMessage, { duration: 4000 })\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleWordClick = useCallback(async (word: VocabularyLibraryWord) => {\r\n    const newStatus = !word.known\r\n    logger.userAction('word-toggle', 'VocabularyLibrary', {\r\n      word: word.word,\r\n      level: activeLevel,\r\n      fromKnown: word.known,\r\n      toKnown: newStatus\r\n    })\r\n\r\n    // Optimistically update local state\r\n    setLevelData((prevLevelData) => {\r\n      if (!prevLevelData) return null\r\n\r\n      const updatedWords = prevLevelData.words.map(w =>\r\n        w.id === word.id ? { ...w, known: newStatus } : w\r\n      )\r\n      const knownCount = updatedWords.filter(w => w.known).length\r\n\r\n      return {\r\n        ...prevLevelData,\r\n        words: updatedWords,\r\n        known_count: knownCount\r\n      }\r\n    })\r\n\r\n    // Update stats optimistically\r\n    setStats((prevStats) => {\r\n      if (!prevStats) return null\r\n\r\n      const delta = newStatus ? 1 : -1\r\n      return {\r\n        ...prevStats,\r\n        total_known: prevStats.total_known + delta,\r\n        levels: {\r\n          ...prevStats.levels,\r\n          [activeLevel]: {\r\n            ...prevStats.levels[activeLevel],\r\n            user_known: prevStats.levels[activeLevel].user_known + delta\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    try {\r\n      await markWordKnownApiVocabularyMarkKnownPost({\r\n        requestBody: {\r\n          concept_id: String(word.concept_id || word.id),\r\n          known: newStatus,\r\n        },\r\n      })\r\n\r\n      logger.info('VocabularyLibrary', 'Word status updated', {\r\n        word: word.word,\r\n        newStatus\r\n      })\r\n\r\n      toast.success(`${word.word} ${newStatus ? 'known' : 'unknown'}`)\r\n    } catch (error: any) {\r\n      const errorMessage = formatApiError(error, 'Unknown error')\r\n      logger.error('VocabularyLibrary', 'Failed to update word status', {\r\n        word: word.word,\r\n        error: errorMessage\r\n      }, error as Error)\r\n\r\n      toast.error('Failed to save. Change reverted.', { duration: 4000 })\r\n\r\n      // Revert both levelData and stats on error\r\n      setLevelData((prev) => {\r\n        if (!prev) return null\r\n        return {\r\n          ...prev,\r\n          words: prev.words.map((w) =>\r\n            w.id === word.id ? { ...w, known: word.known } : w\r\n          ),\r\n          known_count: prev.words.filter(w => w.known).length\r\n        }\r\n      })\r\n\r\n      setStats((prevStats) => {\r\n        if (!prevStats) return null\r\n\r\n        const delta = newStatus ? -1 : 1  // Reverse the optimistic update\r\n        return {\r\n          ...prevStats,\r\n          total_known: prevStats.total_known + delta,\r\n          levels: {\r\n            ...prevStats.levels,\r\n            [activeLevel]: {\r\n              ...prevStats.levels[activeLevel],\r\n              user_known: prevStats.levels[activeLevel].user_known + delta\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }, [activeLevel])\r\n\r\n  const handleBulkMark = async (known: boolean) => {\r\n    if (!levelData) return\r\n\r\n    logger.userAction('bulk-mark', 'VocabularyLibrary', {\r\n      level: activeLevel,\r\n      operation: known ? 'mark-all-known' : 'unmark-all',\r\n      totalWords: levelData.total_count\r\n    })\r\n\r\n    setBulkLoading(true)\r\n    try {\r\n      const result = await bulkMarkLevelApiVocabularyLibraryBulkMarkPost({\r\n        requestBody: {\r\n          level: activeLevel,\r\n          known,\r\n          target_language: 'de',\r\n        },\r\n      }) as { success?: boolean; word_count?: number }\r\n\r\n      const wordCount = result.word_count || levelData.total_count\r\n\r\n      // Update local state immediately for instant feedback\r\n      setLevelData({\r\n        ...levelData,\r\n        words: levelData.words.map(w => ({ ...w, known })),\r\n        known_count: known ? levelData.total_count : 0\r\n      })\r\n\r\n      // Update stats locally\r\n      if (stats && stats.levels[activeLevel]) {\r\n        const previousKnown = stats.levels[activeLevel].user_known\r\n        const newKnown = known ? stats.levels[activeLevel].total_words : 0\r\n        const delta = newKnown - previousKnown\r\n\r\n        setStats({\r\n          ...stats,\r\n          total_known: stats.total_known + delta,\r\n          levels: {\r\n            ...stats.levels,\r\n            [activeLevel]: {\r\n              ...stats.levels[activeLevel],\r\n              user_known: newKnown\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n      toast.success(`${wordCount} words ${known ? 'marked as known' : 'unmarked'}`)\r\n\r\n      logger.info('VocabularyLibrary', 'Bulk mark completed', { level: activeLevel, known, wordCount })\r\n    } catch (error: any) {\r\n      const errorMessage = formatApiError(error, 'Operation failed')\r\n      logger.error('VocabularyLibrary', 'Bulk mark operation failed', {\r\n        level: activeLevel,\r\n        known,\r\n        error: errorMessage\r\n      }, error as Error)\r\n\r\n      toast.error(`Failed: ${errorMessage}`, { duration: 4000 })\r\n\r\n      // Reload on error to get correct state from backend\r\n      await Promise.all([loadLevelData(activeLevel), loadStats()])\r\n    } finally {\r\n      setBulkLoading(false)\r\n    }\r\n  }\r\n\r\n  const getProgressPercentage = (level: string) => {\r\n    if (!stats?.levels[level]) return 0\r\n    const { total_words, user_known } = stats.levels[level]\r\n    return total_words > 0 ? (user_known / total_words) * 100 : 0\r\n  }\r\n\r\n  const handleLevelChange = useCallback((level: string) => {\r\n    setActiveLevel(level)\r\n  }, [])\r\n\r\n  // Calculate grid dimensions for virtual scrolling\r\n  const gridConfig = useMemo(() => {\r\n    const containerWidth = Math.min(windowSize.width - 64, 1200) // Account for padding\r\n    const columnCount = Math.max(\r\n      MIN_COLUMNS,\r\n      Math.min(MAX_COLUMNS, Math.floor(containerWidth / CARD_WIDTH))\r\n    )\r\n    const rowCount = levelData?.words ? Math.ceil(levelData.words.length / columnCount) : 0\r\n\r\n    return {\r\n      columnCount,\r\n      rowCount,\r\n      containerWidth,\r\n      containerHeight: Math.min(windowSize.height - 500, 800) // Leave space for header/controls\r\n    }\r\n  }, [windowSize.width, windowSize.height, levelData?.words?.length])\r\n\r\n  // Enable virtual scrolling for large datasets (>200 words)\r\n  useEffect(() => {\r\n    if (levelData && levelData.words.length > 200) {\r\n      setUseVirtualScrolling(true)\r\n    } else {\r\n      setUseVirtualScrolling(false)\r\n    }\r\n  }, [levelData?.words.length])\r\n\r\n  // Create Grid Cell component for virtual scrolling\r\n  type CellData = {\r\n    words: VocabularyLibraryWord[]\r\n    columnCount: number\r\n    onWordClick: (word: VocabularyLibraryWord) => void\r\n  }\r\n\r\n  const cellData = useMemo<CellData>(() => {\r\n    // Handle case where no words data is available\r\n    if (!levelData?.words || levelData.words.length === 0) {\r\n      // Return empty data instead of throwing error\r\n      return {\r\n        words: [],\r\n        columnCount: gridConfig.columnCount,\r\n        onWordClick: handleWordClick\r\n      }\r\n    }\r\n\r\n    return {\r\n      words: levelData.words,\r\n      columnCount: gridConfig.columnCount,\r\n      onWordClick: handleWordClick\r\n    }\r\n  }, [levelData?.words, gridConfig.columnCount, handleWordClick, activeLevel])\r\n\r\n  const GridCell = useCallback((props: CellComponentProps<CellData>) => {\r\n    const { columnIndex, rowIndex, style, words, columnCount, onWordClick } = props\r\n\r\n    const index = rowIndex * columnCount + columnIndex\r\n    if (index >= words.length) return null\r\n\r\n    const word = words[index]\r\n\r\n    return (\r\n      <div style={{...style, padding: '8px'}}>\r\n        <WordCardItem\r\n          word={word}\r\n          onWordClick={onWordClick}\r\n        />\r\n      </div>\r\n    )\r\n  }, [])\r\n\r\n  return (\r\n    <Container>\r\n      <BackButton onClick={() => navigate('/')}>\r\n        Back to Videos\r\n      </BackButton>\r\n\r\n      <Header>\r\n        <h1>­ƒôÜ Vocabulary Library</h1>\r\n        <p>Manage your German vocabulary knowledge from A1 to C2 level</p>\r\n      </Header>\r\n\r\n      {stats && (\r\n        <StatsGrid>\r\n          <StatCardItem label=\"Total Words\" value={stats.total_words} />\r\n          <StatCardItem label=\"Words Known\" value={stats.total_known} />\r\n          <StatCardItem\r\n            label=\"Progress\"\r\n            value={`${stats.total_words > 0 ? Math.round((stats.total_known / stats.total_words) * 100) : 0}%`}\r\n          />\r\n          <StatCardItem label=\"Levels Available\" value={LEVELS.length} />\r\n        </StatsGrid>\r\n      )}\r\n\r\n      <LevelTabs>\r\n        {LEVELS.map(level => (\r\n          <LevelTabItem\r\n            key={level}\r\n            level={level}\r\n            active={activeLevel === level}\r\n            userKnown={stats?.levels[level]?.user_known || 0}\r\n            totalWords={stats?.levels[level]?.total_words || 0}\r\n            onClick={handleLevelChange}\r\n          />\r\n        ))}\r\n      </LevelTabs>\r\n\r\n      {levelData && (\r\n        <>\r\n          <LevelHeader>\r\n            <div className=\"level-info\">\r\n              <h2>{levelData.level} Level Vocabulary</h2>\r\n              <div className=\"progress-bar\">\r\n                <div\r\n                  className=\"progress-fill\"\r\n                  style={{ width: `${getProgressPercentage(levelData.level)}%` }}\r\n                />\r\n              </div>\r\n              <div className=\"progress-text\">\r\n                {levelData.known_count} of {levelData.total_count} words known\r\n                ({Math.round(getProgressPercentage(levelData.level))}%)\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"level-actions\">\r\n              <Button\r\n                $variant=\"primary\"\r\n                onClick={() => handleBulkMark(true)}\r\n                disabled={bulkLoading}\r\n              >\r\n                {bulkLoading ? 'Loading...' : 'Mark All Known'}\r\n              </Button>\r\n              <Button\r\n                $variant=\"danger\"\r\n                onClick={() => handleBulkMark(false)}\r\n                disabled={bulkLoading}\r\n              >\r\n                {bulkLoading ? 'Loading...' : 'Unmark All'}\r\n              </Button>\r\n            </div>\r\n          </LevelHeader>\r\n\r\n          <SearchContainer>\r\n            <SearchInput\r\n              type=\"text\"\r\n              placeholder={`Search ${levelData.level} vocabulary...`}\r\n              value={searchTerm}\r\n              onChange={(e) => {\r\n                const newSearchTerm = e.target.value\r\n                logger.userAction('search', 'VocabularyLibrary', {\r\n                  level: levelData.level,\r\n                  searchTerm: newSearchTerm\r\n                })\r\n                setSearchTerm(newSearchTerm)\r\n                setCurrentPage(0) // Reset to first page when searching\r\n              }}\r\n            />\r\n          </SearchContainer>\r\n        </>\r\n      )}\r\n\r\n      {loading ? (\r\n        <LoadingSpinner>\r\n          <div className=\"spinner\" />\r\n        </LoadingSpinner>\r\n      ) : levelData && levelData.words && levelData.words.length > 0 ? (\r\n        <>\r\n          {useVirtualScrolling ? (\r\n            <div style={{ margin: '0 auto', maxWidth: `${gridConfig.containerWidth}px` }}>\r\n              <Grid\r\n                columnCount={gridConfig.columnCount}\r\n                columnWidth={CARD_WIDTH}\r\n                defaultHeight={gridConfig.containerHeight}\r\n                rowCount={gridConfig.rowCount}\r\n                rowHeight={CARD_HEIGHT}\r\n                cellComponent={GridCell}\r\n                cellProps={cellData}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <WordsGrid>\r\n              {levelData.words.map(word => (\r\n                <WordCardItem\r\n                  key={word.id}\r\n                  word={word}\r\n                  onWordClick={handleWordClick}\r\n                />\r\n              ))}\r\n            </WordsGrid>\r\n          )}\r\n\r\n          {!searchTerm && !useVirtualScrolling && levelData.total_count > ITEMS_PER_PAGE && (\r\n            <PaginationContainer>\r\n              <PaginationButton\r\n                $disabled={currentPage === 0}\r\n                onClick={() => {\r\n                  const newPage = Math.max(0, currentPage - 1)\r\n                  logger.userAction('pagination', 'VocabularyLibrary', {\r\n                    action: 'previous',\r\n                    fromPage: currentPage,\r\n                    toPage: newPage\r\n                  })\r\n                  setCurrentPage(newPage)\r\n                }}\r\n              >\r\n                Previous\r\n              </PaginationButton>\r\n\r\n              <PageInfo>\r\n                Page {currentPage + 1} of {Math.ceil(levelData.total_count / ITEMS_PER_PAGE)}\r\n                {' '}({Math.min((currentPage + 1) * ITEMS_PER_PAGE, levelData.total_count)} of {levelData.total_count} words)\r\n              </PageInfo>\r\n\r\n              <PaginationButton\r\n                $disabled={(currentPage + 1) * ITEMS_PER_PAGE >= levelData.total_count}\r\n                onClick={() => {\r\n                  const newPage = currentPage + 1\r\n                  logger.userAction('pagination', 'VocabularyLibrary', {\r\n                    action: 'next',\r\n                    fromPage: currentPage,\r\n                    toPage: newPage,\r\n                    totalPages: Math.ceil(levelData.total_count / ITEMS_PER_PAGE)\r\n                  })\r\n                  setCurrentPage(newPage)\r\n                }}\r\n              >\r\n                Next\r\n              </PaginationButton>\r\n            </PaginationContainer>\r\n          )}\r\n        </>\r\n      ) : levelData ? (\r\n        <div style={{ textAlign: 'center', padding: '2rem', color: '#7f8c8d' }}>\r\n          <h3>No words found for {activeLevel} level</h3>\r\n          <p>This level may not have vocabulary data yet, or all words may be filtered out by your search.</p>\r\n        </div>\r\n      ) : null}\r\n    </Container>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\ChunkedLearningFlow.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'apiMock' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":52,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest'\r\nimport { render, waitFor } from '@testing-library/react'\r\nimport { MemoryRouter } from 'react-router-dom'\r\nimport React from 'react'\r\n\r\nimport { ChunkedLearningFlow } from '../ChunkedLearningFlow'\r\nimport type { VideoInfo, ProcessingStatus } from '@/types'\r\nimport * as api from '@/services/api'\r\nimport * as sdk from '@/client/services.gen'\r\n\r\nvi.mock('@/services/api', () => ({\r\n  handleApiError: vi.fn(),\r\n}))\r\n\r\nvi.mock('@/client/services.gen', () => ({\r\n  processChunkApiProcessChunkPost: vi.fn(),\r\n  getTaskProgressApiProcessProgressTaskIdGet: vi.fn(),\r\n  profileGetApiProfileGet: vi.fn(),\r\n  markWordKnownApiVocabularyMarkKnownPost: vi.fn(),\r\n}))\r\n\r\nvi.mock('@/services/logger', () => ({\r\n  logger: {\r\n    info: vi.fn(),\r\n    debug: vi.fn(),\r\n    warn: vi.fn(),\r\n    error: vi.fn(),\r\n    userAction: vi.fn(),\r\n  },\r\n}))\r\n\r\nvi.mock('react-hot-toast', () => ({\r\n  toast: {\r\n    success: vi.fn(),\r\n    error: vi.fn(),\r\n    loading: vi.fn(),\r\n    dismiss: vi.fn(),\r\n  },\r\n}))\r\n\r\nconst navigateSpy = vi.fn()\r\n\r\nvi.mock('react-router-dom', async () => {\r\n  const actual = await vi.importActual<typeof import('react-router-dom')>('react-router-dom')\r\n  return {\r\n    ...actual,\r\n    useNavigate: () => navigateSpy,\r\n    useParams: () => ({ series: 'test-series', episode: 'Episode 1' }),\r\n  }\r\n})\r\n\r\nconst apiMock = vi.mocked(api)\r\nconst sdkMock = vi.mocked(sdk)\r\n\r\nconst baseVideo: VideoInfo = {\r\n  series: 'test-series',\r\n  season: 'Season 1',\r\n  episode: 'Episode 1',\r\n  title: 'Pilot',\r\n  path: '/videos/test-series/episode-1.mp4',\r\n  has_subtitles: true,\r\n  duration: 10,\r\n}\r\n\r\ndescribe('ChunkedLearningFlow', () => {\r\n  beforeEach(() => {\r\n    vi.clearAllMocks()\r\n  })\r\n\r\n  it('starts processing the first chunk on mount', async () => {\r\n    // Mock profile to be loaded so processChunk gets triggered\r\n    sdkMock.profileGetApiProfileGet.mockResolvedValue({\r\n      id: 'test-user-id',\r\n      username: 'testuser',\r\n      is_admin: false,\r\n      created_at: '2025-01-01T00:00:00Z',\r\n      native_language: { code: 'en', name: 'English' },\r\n      target_language: { code: 'de', name: 'German' },\r\n      language_runtime: {}\r\n    })\r\n\r\n    sdkMock.processChunkApiProcessChunkPost.mockResolvedValue({ task_id: 'task-1', status: 'started' })\r\n    sdkMock.getTaskProgressApiProcessProgressTaskIdGet.mockResolvedValue({\r\n      status: 'completed',\r\n      progress: 100,\r\n      current_step: 'done',\r\n      message: 'Finished',\r\n      vocabulary: [],\r\n    } as ProcessingStatus)\r\n\r\n    await (global as any).actAsync(async () => {\r\n      render(\r\n        <MemoryRouter>\r\n          <ChunkedLearningFlow videoInfo={baseVideo} chunkDurationMinutes={5} />\r\n        </MemoryRouter>\r\n      )\r\n    })\r\n\r\n    await waitFor(() => expect(sdkMock.processChunkApiProcessChunkPost).toHaveBeenCalledTimes(1))\r\n    const [{ requestBody }] = sdkMock.processChunkApiProcessChunkPost.mock.calls[0]\r\n    expect(requestBody).toMatchObject({\r\n      video_path: baseVideo.path,\r\n      start_time: 0,\r\n      end_time: 300,\r\n    })\r\n  })\r\n\r\n  it('surfaces errors when processing fails to start', async () => {\r\n    const error = new Error('backend down')\r\n\r\n    // Mock profile to be loaded so processChunk gets triggered\r\n    sdkMock.profileGetApiProfileGet.mockResolvedValue({\r\n      id: 'test-user-id',\r\n      username: 'testuser',\r\n      is_admin: false,\r\n      created_at: '2025-01-01T00:00:00Z',\r\n      native_language: { code: 'en', name: 'English' },\r\n      target_language: { code: 'de', name: 'German' },\r\n      language_runtime: {}\r\n    })\r\n\r\n    sdkMock.processChunkApiProcessChunkPost.mockRejectedValue(error)\r\n\r\n    // Just verify the component renders without crashing when there's an error\r\n    const { container } = render(\r\n      <MemoryRouter>\r\n        <ChunkedLearningFlow videoInfo={baseVideo} chunkDurationMinutes={5} />\r\n      </MemoryRouter>\r\n    )\r\n\r\n    // Wait for the API to be called after profile loads\r\n    await waitFor(() => {\r\n      expect(sdkMock.processChunkApiProcessChunkPost).toHaveBeenCalled()\r\n    })\r\n\r\n    // Verify component is still in the document after error\r\n    expect(container).toBeInTheDocument()\r\n  })\r\n})\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\ChunkedLearningPlayer.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\EpisodeSelection.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'apiMock' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { beforeEach, describe, expect, it, vi } from 'vitest'\nimport { render, screen, waitFor, fireEvent } from '@testing-library/react'\nimport { MemoryRouter } from 'react-router-dom'\nimport React from 'react'\n\nimport { EpisodeSelection } from '../EpisodeSelection'\nimport * as api from '@/services/api'\nimport * as sdk from '@/client/services.gen'\n\nvi.mock('@/services/api', () => ({\n  handleApiError: vi.fn(),\n  buildVideoStreamUrl: vi.fn((series: string, episode: string) => `${series}-${episode}`),\n}))\n\nvi.mock('@/client/services.gen', () => ({\n  getVideosApiVideosGet: vi.fn(),\n  getTaskProgressApiProcessProgressTaskIdGet: vi.fn(),\n  filterSubtitlesApiProcessFilterSubtitlesPost: vi.fn(),\n  translateSubtitlesApiProcessTranslateSubtitlesPost: vi.fn(),\n}))\n\nvi.mock('@/store/useAuthStore', () => ({\n  useAuthStore: vi.fn(() => ({\n    user: { id: 'user-1', username: 'tester' },\n    isAuthenticated: true,\n  })),\n}))\n\nconst navigateSpy = vi.fn()\n\nvi.mock('react-router-dom', async () => {\n  const actual = await vi.importActual<typeof import('react-router-dom')>('react-router-dom')\n  return {\n    ...actual,\n    useNavigate: () => navigateSpy,\n    useParams: () => ({ series: 'test-series' }),\n  }\n})\n\nvi.mock('react-hot-toast', () => ({\n  toast: {\n    success: vi.fn(),\n    error: vi.fn(),\n    loading: vi.fn(),\n    dismiss: vi.fn(),\n  },\n}))\n\nconst apiMock = vi.mocked(api)\nconst sdkMock = vi.mocked(sdk)\n\nconst renderComponent = () =>\n  render(\n    <MemoryRouter initialEntries={[\"/series/test-series\"]}>\n      <EpisodeSelection />\n    </MemoryRouter>\n  )\n\ndescribe('EpisodeSelection', () => {\n  beforeEach(() => {\n    vi.clearAllMocks()\n  })\n\n  it('renders episodes for the current series', async () => {\n    sdkMock.getVideosApiVideosGet.mockResolvedValue([\n      {\n        season: 'Season 1',\n        series: 'test-series',\n        episode: 'Episode 1',\n        title: 'Pilot',\n        path: '/videos/test-series/episode-1.mp4',\n        duration: 20,\n        has_subtitles: true,\n      },\n      {\n        season: 'Season 1',\n        series: 'other-series',\n        episode: 'Episode 1',\n        title: 'Other',\n        path: '/videos/other/episode-1.mp4',\n        duration: 22,\n        has_subtitles: true,\n      },\n      {\n        season: 'Season 1',\n        series: 'test-series',\n        episode: 'Episode 2',\n        title: 'Second Episode',\n        path: '/videos/test-series/episode-2.mp4',\n        duration: 21,\n        has_subtitles: false,\n      },\n    ])\n\n    await (global as any).actAsync(async () => {\n      renderComponent()\n    })\n\n    await waitFor(() => expect(sdkMock.getVideosApiVideosGet).toHaveBeenCalled())\n    await waitFor(() => expect(screen.getByText('Episode 1')).toBeInTheDocument())\n    expect(screen.getByText('Episode 2')).toBeInTheDocument()\n    expect(screen.queryByText('Other')).not.toBeInTheDocument()\n    expect(screen.getByRole('heading', { name: /test-series/i })).toBeInTheDocument()\n  })\n\n  it('surfaces errors when videos cannot be loaded', async () => {\n    const error = new Error('network down')\n    sdkMock.getVideosApiVideosGet.mockRejectedValue(error)\n\n    // Render and verify it doesn't crash on error\n    const { container } = renderComponent()\n\n    await waitFor(() => {\n      expect(container).toBeInTheDocument()\n    })\n\n    // The API should have been called\n    expect(sdkMock.getVideosApiVideosGet).toHaveBeenCalled()\n  })\n\n  it('navigates to the learning flow when Play is clicked', async () => {\n    sdkMock.getVideosApiVideosGet.mockResolvedValue([\n      {\n        season: 'Season 1',\n        series: 'test-series',\n        episode: 'Episode 1',\n        title: 'Pilot',\n        path: '/videos/test-series/episode-1.mp4',\n        duration: 20,\n        has_subtitles: true,\n      },\n    ])\n\n    await (global as any).actAsync(async () => {\n      renderComponent()\n    })\n\n    await screen.findByText('Episode 1')\n\n    await (global as any).actAsync(async () => {\n      fireEvent.click(screen.getByRole('button', { name: /play/i }))\n    })\n\n    await waitFor(() => expect(navigateSpy).toHaveBeenCalledWith('/learn/test-series/Episode%201', {\n      state: expect.objectContaining({\n        videoInfo: expect.objectContaining({\n          episode: 'Episode 1',\n          series: 'test-series'\n        })\n      }),\n    }))\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\LanguageSelector.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\LoginForm.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * LoginForm tests matching actual component implementation (src/components/auth/LoginForm.tsx)\n */\n\nimport React from 'react';\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { render, screen, waitFor, act } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { BrowserRouter } from 'react-router-dom';\nimport { LoginForm } from '@/components/auth/LoginForm';\n\n// Mock react-router-dom navigation\nconst mockNavigate = vi.fn();\nvi.mock('react-router-dom', async () => {\n  const actual = await vi.importActual('react-router-dom');\n  return {\n    ...actual,\n    useNavigate: () => mockNavigate,\n  } as any;\n});\n\n// Mock useAuthStore from zustand\nconst mockStore: any = {\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n  async login(email: string, password: string) {\n    if (email === 'test@example.com' && password === 'Password123!') {\n      mockStore.user = { id: '1', email, name: 'Test' };\n      mockStore.token = 'token-123';\n      mockStore.isAuthenticated = true;\n      mockStore.error = null;\n      return;\n    }\n    mockStore.error = 'Invalid email or password';\n    throw new Error('Invalid email or password');\n  },\n};\n\nvi.mock('@/store/useAuthStore', () => ({\n  useAuthStore: () => mockStore,\n}));\n\nconst renderLoginForm = () => {\n  const user = userEvent.setup();\n  const utils = render(\n    <BrowserRouter>\n      <LoginForm />\n    </BrowserRouter>\n  );\n  return { user, ...utils };\n};\n\ndescribe('LoginForm Component', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    // reset mock store state\n    mockStore.user = null;\n    mockStore.token = null;\n    mockStore.isAuthenticated = false;\n    mockStore.isLoading = false;\n    mockStore.error = null;\n  });\n\n  it('renders fields and submit button', () => {\n    renderLoginForm();\n    expect(screen.getByPlaceholderText('Email')).toBeInTheDocument();\n    expect(screen.getByPlaceholderText('Password')).toBeInTheDocument();\n    expect(screen.getByRole('button', { name: /sign in/i })).toBeInTheDocument();\n    expect(screen.getByText(/sign up now/i)).toBeInTheDocument();\n  });\n\n  it('shows validation errors for empty inputs', async () => {\n    const { user } = renderLoginForm();\n    await act(async () => {\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n    });\n    const err = await screen.findByTestId('login-error');\n    expect(err).toHaveTextContent('Please enter both email and password');\n  });\n\n  it('shows validation error for invalid email format', async () => {\n    const { user } = renderLoginForm();\n    await act(async () => {\n      await user.type(screen.getByTestId('login-email-input'), 'invalid');\n      await user.type(screen.getByTestId('login-password-input'), 'Password123!');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n    });\n    await waitFor(() => {\n      expect(mockNavigate).not.toHaveBeenCalled();\n      expect(mockStore.isAuthenticated).toBe(false);\n    });\n  });\n\n  it('logs in successfully and navigates to home', async () => {\n    const { user } = renderLoginForm();\n    await act(async () => {\n      await user.type(screen.getByTestId('login-email-input'), 'test@example.com');\n      await user.type(screen.getByTestId('login-password-input'), 'Password123!');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n    });\n\n    await waitFor(() => {\n      expect(mockNavigate).toHaveBeenCalledWith('/');\n      expect(mockStore.isAuthenticated).toBe(true);\n    });\n  });\n\n  it('shows error for invalid credentials', async () => {\n    const { user } = renderLoginForm();\n    await act(async () => {\n      await user.type(screen.getByTestId('login-email-input'), 'wrong@example.com');\n      await user.type(screen.getByTestId('login-password-input'), 'wrong');\n      await user.click(screen.getByRole('button', { name: /sign in/i }));\n    });\n\n    const err = await screen.findByTestId('login-error');\n    expect(err).toHaveTextContent('Invalid email or password');\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\VideoSelection.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'assertErrorMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":72}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\nimport { BrowserRouter } from 'react-router-dom';\nimport { VideoSelection } from '../VideoSelection';\nimport * as api from '@/services/api';\nimport * as sdk from '@/client/services.gen';\nimport { assertLoadingState, assertNavigationCalled, assertErrorMessage } from '@/test/assertion-helpers';\n\n// Mock react-router-dom\nconst mockNavigate = vi.fn();\nvi.mock('react-router-dom', async () => {\n  const actual = await vi.importActual('react-router-dom');\n  return {\n    ...actual,\n    useNavigate: () => mockNavigate,\n  };\n});\n\nconst mockVideos = [\n  {\n    series: 'Superstore',\n    season: '01',\n    episode: '01',\n    title: 'Pilot',\n    path: '/videos/superstore/s01e01.mp4',\n    has_subtitles: true,\n    duration: 1800,\n  },\n  {\n    series: 'Superstore',\n    season: '01',\n    episode: '02',\n    title: 'Magazine Profile',\n    path: '/videos/superstore/s01e02.mp4',\n    has_subtitles: false,\n    duration: 1850,\n  },\n];\n\nconst renderWithRouter = (component: React.ReactElement) => {\n  return render(\n    <BrowserRouter\n      future={{\n        v7_startTransition: true,\n        v7_relativeSplatPath: true\n      }}\n    >\n      {component}\n    </BrowserRouter>\n  );\n};\n\ndescribe('VideoSelection Component', () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    vi.spyOn(sdk, 'getVideosApiVideosGet').mockResolvedValue(mockVideos as any);\n  });\n\n  it('WhenComponentRendered_ThenDisplaysHeroTitle', async () => {\n    await act(async () => {\n      renderWithRouter(<VideoSelection />);\n    });\n    expect(screen.getByText(/learn german through tv shows/i)).toBeInTheDocument();\n  });\n\n  it('WhenComponentMounts_ThenShowsLoadingState', () => {\n    renderWithRouter(<VideoSelection />);\n    assertLoadingState();\n  });\n\n  it('WhenDataLoaded_ThenDisplaysSeries', async () => {\n    await act(async () => {\n      renderWithRouter(<VideoSelection />);\n    });\n\n    await waitFor(() => {\n      expect(screen.getByText('Superstore')).toBeInTheDocument();\n    });\n  });\n\n  it('WhenSeriesClicked_ThenNavigatesToEpisodes', async () => {\n    await act(async () => {\n      renderWithRouter(<VideoSelection />);\n    });\n\n    await waitFor(() => {\n      expect(screen.getByText('Superstore')).toBeInTheDocument();\n    });\n\n    await act(async () => {\n      fireEvent.click(screen.getByText('Superstore'));\n    });\n    assertNavigationCalled(mockNavigate, '/episodes/Superstore');\n  });\n\n  it('WhenProfileButtonClicked_ThenNavigatesToProfile', async () => {\n    await act(async () => {\n      renderWithRouter(<VideoSelection />);\n    });\n\n    await waitFor(() => {\n      expect(screen.getByTestId('profile-button')).toBeInTheDocument();\n    });\n\n    await act(async () => {\n      fireEvent.click(screen.getByTestId('profile-button'));\n    });\n\n    assertNavigationCalled(mockNavigate, '/profile');\n  });\n\n  it('WhenApiErrorOccurs_ThenHandlesErrorGracefully', async () => {\n    vi.spyOn(sdk, 'getVideosApiVideosGet').mockRejectedValueOnce(new Error('API Error'));\n\n    await act(async () => {\n      renderWithRouter(<VideoSelection />);\n    });\n\n    await waitFor(() => {\n      expect(sdk.getVideosApiVideosGet).toHaveBeenCalled();\n    });\n\n    await waitFor(() => {\n      expect(screen.getByText('Failed to load videos')).toBeInTheDocument();\n    });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\__tests__\\VocabularyGame.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loadingIndicator' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":245,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":245,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\r\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\r\nimport { VocabularyGame } from '../VocabularyGame';\r\nimport type { VocabularyWord } from '@/client/types.gen';\r\n\r\nconst mockWords: VocabularyWord[] = [\r\n  { concept_id: '1', word: 'Hallo', translation: 'Hello', difficulty_level: 'beginner' },\r\n  { concept_id: '2', word: 'Tsch├╝ss', translation: 'Goodbye', difficulty_level: 'beginner' }\r\n];\r\n\r\nconst mockWordsWithVariety: VocabularyWord[] = [\r\n  { concept_id: '1', word: 'Hallo', translation: 'Hello', difficulty_level: 'beginner' },\r\n  { concept_id: '2', word: 'Wunderbar', translation: 'Wonderful', difficulty_level: 'intermediate' },\r\n  { concept_id: '3', word: 'Schadenfreude', translation: 'Pleasure from others\\' misfortune', difficulty_level: 'advanced' },\r\n  { concept_id: '4', word: 'Danke', translation: 'Thank you', difficulty_level: 'beginner' }\r\n];\r\n\r\ndescribe('VocabularyGame Component', () => {\r\n  const mockOnWordAnswered = vi.fn();\r\n  const mockOnComplete = vi.fn();\r\n\r\n  beforeEach(() => {\r\n    vi.clearAllMocks();\r\n  });\r\n\r\n  describe('Basic Functionality', () => {\r\n    it('displays current word', () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={vi.fn()} />);\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n    });\r\n\r\n    it('shows game progress', () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={vi.fn()} />);\r\n      expect(screen.getByText(/1.*of.*2.*words/)).toBeInTheDocument();\r\n    });\r\n\r\n    it('calls onWordAnswered when know button clicked', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      expect(mockOnWordAnswered).toHaveBeenCalledWith('Hallo', true);\r\n    });\r\n\r\n    it('calls onWordAnswered when unknown button clicked', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const unknownButton = screen.getByLabelText(\"I don't know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(unknownButton);\r\n      });\r\n\r\n      expect(mockOnWordAnswered).toHaveBeenCalledWith('Hallo', false);\r\n    });\r\n\r\n    it('shows no words message when empty words provided', () => {\r\n      render(<VocabularyGame words={[]} onComplete={mockOnComplete} />);\r\n      // When no words are provided, the component shows \"No New Words!\" message\r\n      expect(screen.getByText('No New Words!')).toBeInTheDocument();\r\n      expect(screen.getByText('You already know all the vocabulary in this segment. Great job!')).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('Game Progression', () => {\r\n    it('WhenWordAnswered_ThenAdvancesToNextWord', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Should advance to next word after delay\r\n      await waitFor(() => {\r\n        expect(screen.queryByText('Tsch├╝ss')).toBeInTheDocument();\r\n      }, { timeout: 1000 });\r\n    });\r\n\r\n    it('WhenLastWordAnswered_ThenCallsOnComplete', async () => {\r\n      const singleWord = [mockWords[0]];\r\n      render(<VocabularyGame words={singleWord} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Wait for the component to complete (300ms delay + useEffect)\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalled();\r\n      }, { timeout: 1000 });\r\n    });\r\n\r\n    it('WhenAllWordsCompleted_ThenShowsCompletionMessage', async () => {\r\n      const singleWord = [mockWords[0]];\r\n      render(<VocabularyGame words={singleWord} onComplete={mockOnComplete} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Should show completion state after delay\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalled();\r\n      }, { timeout: 1000 });\r\n    });\r\n\r\n    it('WhenProgressTracked_ThenUpdatesProgressBar', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      // Should show initial progress\r\n      expect(screen.getByText(/1.*of.*2.*words/)).toBeInTheDocument();\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Progress should update after delay\r\n      await waitFor(() => {\r\n        expect(screen.getByText(/2.*of.*2.*words/)).toBeInTheDocument();\r\n      }, { timeout: 1000 });\r\n    });\r\n  });\r\n\r\n  describe('Word Display Variants', () => {\r\n    it('WhenWordHasTranslation_ThenDisplaysTranslation', () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n      // Translation might be shown on card flip or hover\r\n    });\r\n\r\n    it('WhenWordHasDifficultyLevel_ThenShowsDifficulty', () => {\r\n      render(<VocabularyGame words={mockWordsWithVariety} onComplete={mockOnComplete} />);\r\n\r\n      // Should display difficulty information\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n      // Difficulty indicators should be present\r\n    });\r\n\r\n    it('WhenMixedDifficultyWords_ThenHandlesAllLevels', () => {\r\n      render(<VocabularyGame words={mockWordsWithVariety} onComplete={mockOnComplete} />);\r\n\r\n      // Should handle beginner, intermediate, and advanced words\r\n      expect(screen.getByText(/1.*of.*4.*words/)).toBeInTheDocument();\r\n    });\r\n\r\n    it('WhenLongTranslation_ThenHandlesOverflow', () => {\r\n      const longTranslationWord = [{\r\n        concept_id: '1',\r\n        word: 'Schadenfreude',\r\n        translation: 'The feeling of pleasure or satisfaction that comes from witnessing the misfortune of others',\r\n        difficulty_level: 'advanced' as const,\r\n        known: false\r\n      }];\r\n\r\n      render(<VocabularyGame words={longTranslationWord} onComplete={mockOnComplete} />);\r\n\r\n      expect(screen.getByText('Schadenfreude')).toBeInTheDocument();\r\n      // Should handle long translations gracefully\r\n    });\r\n  });\r\n\r\n  describe('User Interaction', () => {\r\n    it('WhenSkipButtonClicked_ThenSkipsCurrentWord', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n\r\n      const skipButton = screen.getByLabelText(\"Skip remaining words\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(skipButton);\r\n      });\r\n\r\n      // Skip should call onComplete with current progress (no words answered yet)\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalledWith([], []);\r\n      }, { timeout: 1000 });\r\n    });\r\n\r\n    it('WhenCardClicked_ThenShowsTranslation', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      const wordCard = screen.getByText('Hallo').closest('[role=\"button\"]') ||\r\n                      screen.getByText('Hallo').closest('div');\r\n\r\n      if (wordCard) {\r\n        await act(async () => {\r\n          fireEvent.click(wordCard);\r\n        });\r\n        // Should reveal translation\r\n      }\r\n    });\r\n\r\n    it('WhenKeyboardNavigation_ThenHandlesKeystrokes', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      // Test keyboard shortcuts if implemented\r\n      await act(async () => {\r\n        fireEvent.keyDown(document.body, { key: 'ArrowRight' }); // Know\r\n        fireEvent.keyDown(document.body, { key: 'ArrowLeft' });  // Don't know\r\n        fireEvent.keyDown(document.body, { key: 'Space' });      // Skip\r\n      });\r\n\r\n      // Keyboard interactions should work\r\n    });\r\n\r\n    it('WhenSwipeGesture_ThenRespondsToSwipe', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const wordCard = screen.getByText('Hallo').closest('div');\r\n\r\n      if (wordCard) {\r\n        // Simulate touch/swipe gestures\r\n        await act(async () => {\r\n          fireEvent.touchStart(wordCard, { touches: [{ clientX: 0, clientY: 0 }] });\r\n          fireEvent.touchMove(wordCard, { touches: [{ clientX: 100, clientY: 0 }] });\r\n          fireEvent.touchEnd(wordCard);\r\n        });\r\n      }\r\n\r\n      // Should respond to swipe gestures for know/don't know\r\n    });\r\n  });\r\n\r\n  describe('Visual States', () => {\r\n    it('WhenGameLoading_ThenShowsLoadingState', () => {\r\n      render(<VocabularyGame words={[]} onComplete={mockOnComplete} isLoading={true} />);\r\n\r\n      // Should show loading indicator\r\n      const loadingIndicator = screen.queryByTestId('loading-spinner') ||\r\n                              screen.queryByText(/loading/i);\r\n      // Test passes regardless of loading implementation\r\n    });\r\n\r\n    it('WhenAnimationsEnabled_ThenShowsCardAnimations', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      await waitFor(() => {\r\n        // Should show smooth transitions between cards\r\n        expect(screen.getByText('Tsch├╝ss')).toBeInTheDocument();\r\n      });\r\n    });\r\n\r\n    it('WhenGameComplete_ThenShowsCompletionAnimation', async () => {\r\n      const singleWord = [mockWords[0]];\r\n      render(<VocabularyGame words={singleWord} onComplete={mockOnComplete} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Should show completion celebration after delay\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalled();\r\n      }, { timeout: 1000 });\r\n    });\r\n\r\n    it('WhenCorrectAnswer_ThenShowsPositiveFeedback', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Should show positive visual feedback\r\n      expect(mockOnWordAnswered).toHaveBeenCalledWith('Hallo', true);\r\n    });\r\n\r\n    it('WhenIncorrectAnswer_ThenShowsEncouragingFeedback', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const buttons = screen.getAllByRole('button');\r\n      const unknownButton = buttons.find(button =>\r\n        getComputedStyle(button).color.includes('239, 68, 68')\r\n      ) || buttons[0];\r\n\r\n      await act(async () => {\r\n        fireEvent.click(unknownButton);\r\n      });\r\n\r\n      // Should show encouraging feedback for learning\r\n      expect(mockOnWordAnswered).toHaveBeenCalledWith('Hallo', false);\r\n    });\r\n  });\r\n\r\n  describe('Edge Cases', () => {\r\n    it('WhenSingleWord_ThenHandlesSingleWordGame', () => {\r\n      const singleWord = [mockWords[0]];\r\n      render(<VocabularyGame words={singleWord} onComplete={mockOnComplete} />);\r\n\r\n      expect(screen.getByText(/1.*of.*1.*words/)).toBeInTheDocument();\r\n    });\r\n\r\n    it('WhenAllWordsKnown_ThenStillShowsGame', () => {\r\n      const knownWords = mockWords.map(word => ({ ...word }));\r\n      render(<VocabularyGame words={knownWords} onComplete={mockOnComplete} />);\r\n\r\n      // Component shows normal game interface even with known words\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n      expect(screen.getByText(/1.*of.*2.*words/)).toBeInTheDocument();\r\n    });\r\n\r\n    it('WhenRapidClicking_ThenHandlesGracefully', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      // Rapid clicking should not break the game\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n        fireEvent.click(knowButton);\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Should handle multiple clicks gracefully\r\n      expect(mockOnWordAnswered).toHaveBeenCalled();\r\n    });\r\n\r\n    it('WhenComponentUnmounts_ThenCleansUpGracefully', () => {\r\n      const { unmount } = render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      unmount();\r\n\r\n      // Should clean up without errors\r\n    });\r\n  });\r\n\r\n  describe('Accessibility', () => {\r\n    it('WhenRendered_ThenHasProperARIALabels', () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      // Buttons should have proper ARIA labels\r\n      const buttons = screen.getAllByRole('button');\r\n      expect(buttons.length).toBeGreaterThan(0);\r\n\r\n      // Word cards should be accessible\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n    });\r\n\r\n    it('WhenUsingKeyboard_ThenSupportsKeyboardNavigation', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      const buttons = screen.getAllByRole('button');\r\n      const firstButton = buttons[0];\r\n\r\n      firstButton.focus();\r\n      await act(async () => {\r\n        fireEvent.keyDown(firstButton, { key: 'Enter' });\r\n      });\r\n\r\n      // Should support keyboard activation\r\n    });\r\n\r\n    it('WhenUsingScreenReader_ThenProvidesProperAnnouncements', () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} />);\r\n\r\n      // Progress should be announced\r\n      expect(screen.getByText(/1.*of.*2.*words/)).toBeInTheDocument();\r\n\r\n      // Current word should be announced\r\n      expect(screen.getByText('Hallo')).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('Performance', () => {\r\n    it('WhenManyWords_ThenHandlesLargeWordList', () => {\r\n      const manyWords = Array.from({ length: 100 }, (_, i) => ({\r\n        concept_id: `word-${i}`,\r\n        word: `Word${i}`,\r\n        translation: `Translation${i}`,\r\n        difficulty_level: 'beginner' as const,\r\n        known: false\r\n      }));\r\n\r\n      render(<VocabularyGame words={manyWords} onComplete={mockOnComplete} />);\r\n\r\n      expect(screen.getByText(/1.*of.*100.*words/)).toBeInTheDocument();\r\n      // Should handle large word lists efficiently\r\n    });\r\n\r\n    it('WhenRapidProgression_ThenMaintainsPerformance', async () => {\r\n      render(<VocabularyGame words={mockWords} onComplete={mockOnComplete} onWordAnswered={mockOnWordAnswered} />);\r\n\r\n      // Rapidly progress through all words\r\n      const knowButton = screen.getByLabelText(\"I know this word\");\r\n\r\n      // Click through all words to complete the game\r\n      await act(async () => {\r\n        fireEvent.click(knowButton);\r\n      });\r\n\r\n      // Wait for first word to advance\r\n      await waitFor(() => {\r\n        expect(screen.getByText('Tsch├╝ss')).toBeInTheDocument();\r\n      }, { timeout: 1000 });\r\n\r\n      // Click second word\r\n      await act(async () => {\r\n        const updatedButtons = screen.getAllByRole('button');\r\n        const updatedKnowButton = updatedButtons.find(button =>\r\n          getComputedStyle(button).color.includes('70, 211, 105')\r\n        ) || updatedButtons[updatedButtons.length - 2];\r\n        fireEvent.click(updatedKnowButton);\r\n      });\r\n\r\n      // Should maintain smooth performance and complete game\r\n      await waitFor(() => {\r\n        expect(mockOnComplete).toHaveBeenCalled();\r\n      }, { timeout: 1000 });\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\auth\\LoginForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleApiError' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\r\nimport { useNavigate, Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { toast } from 'react-hot-toast'\r\nimport { useAuthStore } from '@/store/useAuthStore'\r\nimport { NetflixButton, ErrorMessage } from '@/styles/GlobalStyles'\r\nimport { handleApiError } from '@/services/api'\r\n\r\nconst LoginContainer = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(\r\n    rgba(0, 0, 0, 0.7),\r\n    rgba(0, 0, 0, 0.7)\r\n  );\r\n  background-size: cover;\r\n  background-position: center;\r\n`\r\n\r\nconst LoginCard = styled.div`\r\n  background: rgba(0, 0, 0, 0.85);\r\n  padding: 48px 68px;\r\n  border-radius: 4px;\r\n  width: 100%;\r\n  max-width: 450px;\r\n  min-height: 500px;\r\n`\r\n\r\nconst Logo = styled.h1`\r\n  color: #e50914;\r\n  font-size: 32px;\r\n  margin-bottom: 28px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  color: white;\r\n  font-size: 32px;\r\n  font-weight: 500;\r\n  margin-bottom: 28px;\r\n`\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 16px 20px;\r\n  margin-bottom: 16px;\r\n  background: #333;\r\n  border: none;\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-size: 16px;\r\n\r\n  &::placeholder {\r\n    color: #8c8c8c;\r\n  }\r\n\r\n  &:focus {\r\n    background: #454545;\r\n  }\r\n`\r\n\r\nconst LoginButton = styled(NetflixButton)`\r\n  width: 100%;\r\n  padding: 16px;\r\n  margin: 24px 0 12px;\r\n  font-size: 16px;\r\n`\r\n\r\nconst SignUpText = styled.p`\r\n  color: #737373;\r\n  margin-top: 16px;\r\n\r\n  a {\r\n    color: white;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n`\r\n\r\nconst RememberMe = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 16px 0;\r\n\r\n  label {\r\n    display: flex;\r\n    align-items: center;\r\n    color: #b3b3b3;\r\n    cursor: pointer;\r\n\r\n    input {\r\n      margin-right: 8px;\r\n    }\r\n  }\r\n\r\n  a {\r\n    color: #b3b3b3;\r\n    text-decoration: none;\r\n    font-size: 13px;\r\n\r\n    &:hover {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n`\r\n\r\nexport const LoginForm: React.FC = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [rememberMe, setRememberMe] = useState(false)\r\n  const [error, setError] = useState('')\r\n\r\n  const { login, isLoading, error: authError, isAuthenticated } = useAuthStore()\r\n  const navigate = useNavigate()\r\n\r\n  // Navigate to dashboard if already authenticated\r\n  React.useEffect(() => {\r\n    if (isAuthenticated) {\r\n      navigate('/')\r\n    }\r\n  }, [isAuthenticated, navigate])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError('')\r\n\r\n    if (!email.trim() || !password.trim()) {\r\n      setError('Please enter both email and password')\r\n      return\r\n    }\r\n\r\n    if (!email.includes('@')) {\r\n      setError('Please enter a valid email address')\r\n      return\r\n    }\r\n\r\n    try {\r\n      await login(email, password)\r\n      toast.success('Welcome to LangPlug!')\r\n      navigate('/')\r\n    } catch (error) {\r\n      const errorMessage = authError || 'Invalid email or password'\r\n      setError(errorMessage)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <LoginContainer>\r\n      <LoginCard>\r\n        <Logo>LangPlug</Logo>\r\n        <Title>Sign In</Title>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <Input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"login-email-input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"login-password-input\"\r\n          />\r\n\r\n          {error && <ErrorMessage data-testid=\"login-error\">{error}</ErrorMessage>}\r\n\r\n          <LoginButton\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            data-testid=\"login-submit-button\"\r\n          >\r\n            {isLoading ? 'Signing In...' : 'Sign In'}\r\n          </LoginButton>\r\n\r\n          <RememberMe>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={rememberMe}\r\n                onChange={(e) => setRememberMe(e.target.checked)}\r\n              />\r\n              Remember me\r\n            </label>\r\n            <a href=\"/forgot-password\">Need help?</a>\r\n          </RememberMe>\r\n        </form>\r\n\r\n        <SignUpText>\r\n          New to LangPlug? <Link to=\"/register\" data-testid=\"register-link\">Sign up now</Link>.\r\n        </SignUpText>\r\n      </LoginCard>\r\n    </LoginContainer>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\auth\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\auth\\RegisterForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleApiError' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":159,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3970,3973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3970,3973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4238,4241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4238,4241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\r\nimport { useNavigate, Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { toast } from 'react-hot-toast'\r\nimport { z } from 'zod'\r\nimport { useAuthStore } from '@/store/useAuthStore'\r\nimport { NetflixButton, ErrorMessage, SuccessMessage } from '@/styles/GlobalStyles'\r\nimport { handleApiError } from '@/services/api'\r\nimport { schemas } from '@/schemas/api-schemas'\r\nimport { zodErrorToFormErrors } from '@/schemas/helpers'\r\n\r\nconst RegisterContainer = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: linear-gradient(\r\n    rgba(0, 0, 0, 0.7),\r\n    rgba(0, 0, 0, 0.7)\r\n  );\r\n  background-size: cover;\r\n  background-position: center;\r\n`\r\n\r\nconst RegisterCard = styled.div`\r\n  background: rgba(0, 0, 0, 0.85);\r\n  padding: 48px 68px;\r\n  border-radius: 4px;\r\n  width: 100%;\r\n  max-width: 450px;\r\n  min-height: 600px;\r\n`\r\n\r\nconst Logo = styled.h1`\r\n  color: #e50914;\r\n  font-size: 32px;\r\n  margin-bottom: 28px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  color: white;\r\n  font-size: 32px;\r\n  font-weight: 500;\r\n  margin-bottom: 28px;\r\n`\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 16px 20px;\r\n  margin-bottom: 16px;\r\n  background: #333;\r\n  border: none;\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-size: 16px;\r\n\r\n  &::placeholder {\r\n    color: #8c8c8c;\r\n  }\r\n\r\n  &:focus {\r\n    background: #454545;\r\n  }\r\n`\r\n\r\nconst RegisterButton = styled(NetflixButton)`\r\n  width: 100%;\r\n  padding: 16px;\r\n  margin: 24px 0 12px;\r\n  font-size: 16px;\r\n`\r\n\r\nconst SignInText = styled.p`\r\n  color: #737373;\r\n  margin-top: 16px;\r\n\r\n  a {\r\n    color: white;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      text-decoration: underline;\r\n    }\r\n  }\r\n`\r\n\r\nconst PasswordRequirements = styled.div`\r\n  color: #b3b3b3;\r\n  font-size: 13px;\r\n  margin: 8px 0;\r\n\r\n  ul {\r\n    margin: 4px 0;\r\n    padding-left: 20px;\r\n  }\r\n\r\n  li {\r\n    margin: 2px 0;\r\n  }\r\n`\r\n\r\n// Extended schema with frontend-specific validations\r\nconst RegisterFormSchema = schemas.UserCreate\r\n  .extend({\r\n    username: z.string()\r\n      .min(3, 'Username must be at least 3 characters long')\r\n      .max(50, 'Username must be no more than 50 characters long')\r\n      .regex(/^[a-zA-Z0-9_-]+$/, 'Username must contain only alphanumeric characters, underscores, and hyphens'),\r\n    password: z.string()\r\n      .min(12, 'Password must be at least 12 characters long'),\r\n    confirmPassword: z.string(),\r\n  })\r\n  .refine((data: { password: string; confirmPassword: string }) => data.password === data.confirmPassword, {\r\n    message: 'Passwords do not match',\r\n    path: ['confirmPassword'],\r\n  })\r\n\r\nexport const RegisterForm: React.FC = () => {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [confirmPassword, setConfirmPassword] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [success, setSuccess] = useState(false)\r\n\r\n  const { register, isLoading, error: authError } = useAuthStore()\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError('')\r\n    setSuccess(false)\r\n\r\n    // Validate form data with Zod schema\r\n    const formData = {\r\n      email,\r\n      username,\r\n      password,\r\n      confirmPassword,\r\n    }\r\n\r\n    const result = RegisterFormSchema.safeParse(formData)\r\n\r\n    if (!result.success) {\r\n      const formErrors = zodErrorToFormErrors(result.error)\r\n      // Display first error message\r\n      const firstError = Object.values(formErrors)[0]\r\n      setError(firstError)\r\n      return\r\n    }\r\n\r\n    try {\r\n      await register(email, password, username)\r\n      setSuccess(true)\r\n      toast.success('Account created successfully! Redirecting to dashboard...')\r\n      setTimeout(() => navigate('/'), 2000)\r\n    } catch (error: any) {\r\n      // Handle validation errors from backend\r\n      if (error?.response?.data?.detail) {\r\n        // Handle array of validation errors\r\n        if (Array.isArray(error.response.data.detail)) {\r\n          const messages = error.response.data.detail.map((err: any) => {\r\n            if (err.msg) {\r\n              // Extract user-friendly message from validation error\r\n              const msg = err.msg.includes('Value error,')\r\n                ? err.msg.split('Value error, ')[1]\r\n                : err.msg\r\n              return msg\r\n            }\r\n            return 'Invalid input'\r\n          })\r\n          setError(messages.join('. '))\r\n        } else {\r\n          setError(error.response.data.detail)\r\n        }\r\n      } else {\r\n        const errorMessage = authError || 'Failed to create account. Please try again.'\r\n        setError(errorMessage)\r\n      }\r\n    }\r\n  }\r\n\r\n  const isPasswordValid = password.length >= 12\r\n  const doPasswordsMatch = password === confirmPassword && confirmPassword.length > 0\r\n\r\n  return (\r\n    <RegisterContainer>\r\n      <RegisterCard>\r\n        <Logo>LangPlug</Logo>\r\n        <Title>Sign Up</Title>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <Input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"email-input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder=\"Username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"username-input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"password-input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"password\"\r\n            name=\"confirm_password\"\r\n            placeholder=\"Confirm Password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n            disabled={isLoading}\r\n            data-testid=\"confirm-password-input\"\r\n          />\r\n\r\n          <PasswordRequirements>\r\n            Password requirements:\r\n            <ul>\r\n              <li style={{ color: isPasswordValid ? '#46d369' : '#b3b3b3' }}>\r\n                At least 12 characters\r\n              </li>\r\n              <li style={{ color: doPasswordsMatch ? '#46d369' : '#b3b3b3' }}>\r\n                Passwords must match\r\n              </li>\r\n            </ul>\r\n          </PasswordRequirements>\r\n\r\n          {error && <ErrorMessage>{error}</ErrorMessage>}\r\n          {success && <SuccessMessage>Account created successfully! Redirecting to login...</SuccessMessage>}\r\n\r\n          <RegisterButton\r\n            type=\"submit\"\r\n            disabled={isLoading || success}\r\n            data-testid=\"register-submit\"\r\n          >\r\n            {isLoading ? 'Creating Account...' : 'Sign Up'}\r\n          </RegisterButton>\r\n        </form>\r\n\r\n        <SignInText>\r\n          Already have an account? <Link to=\"/login\" data-testid=\"login-link\">Sign in now</Link>.\r\n        </SignInText>\r\n      </RegisterCard>\r\n    </RegisterContainer>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\auth\\__tests__\\RegisterForm.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\common\\ErrorBoundary.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":257,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":257,"endColumn":34},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":273,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":273,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":274,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8176,8179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8176,8179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Enhanced Error Boundary with better error handling and fallback UI\r\n */\r\nimport React, { Component, ErrorInfo, ReactNode } from 'react'\r\nimport { logger } from '@/services/logger'\r\n\r\ninterface Props {\r\n  children: ReactNode\r\n  fallback?: ReactNode\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void\r\n  resetKeys?: Array<string | number>\r\n  resetOnPropsChange?: boolean\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean\r\n  error: Error | null\r\n  errorInfo: ErrorInfo | null\r\n  errorId: string | null\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  private resetTimeoutId: number | null = null\r\n\r\n  constructor(props: Props) {\r\n    super(props)\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n      errorId: null,\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<State> {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n      errorId: `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    const { onError } = this.props\r\n    const errorId = this.state.errorId || 'unknown'\r\n\r\n    // Log error details\r\n    logger.error('ErrorBoundary', 'Caught an error', {\r\n      error: error.message,\r\n      stack: error.stack,\r\n      componentStack: errorInfo.componentStack,\r\n      errorId,\r\n    })\r\n\r\n    this.setState({ errorInfo })\r\n\r\n    // Call custom error handler\r\n    if (onError) {\r\n      onError(error, errorInfo)\r\n    }\r\n\r\n    // Report to error tracking service\r\n    this.reportError(error, errorInfo, errorId)\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    const { resetKeys, resetOnPropsChange } = this.props\r\n    const { hasError } = this.state\r\n\r\n    if (hasError && resetOnPropsChange) {\r\n      // Reset on any prop change\r\n      if (prevProps !== this.props) {\r\n        this.resetErrorBoundary()\r\n      }\r\n    } else if (hasError && resetKeys) {\r\n      // Reset on specific key changes\r\n      const prevResetKeys = prevProps.resetKeys || []\r\n      const hasResetKeyChanged = resetKeys.some(\r\n        (key, index) => key !== prevResetKeys[index]\r\n      )\r\n\r\n      if (hasResetKeyChanged) {\r\n        this.resetErrorBoundary()\r\n      }\r\n    }\r\n  }\r\n\r\n  resetErrorBoundary = () => {\r\n    if (this.resetTimeoutId) {\r\n      window.clearTimeout(this.resetTimeoutId)\r\n    }\r\n\r\n    this.resetTimeoutId = window.setTimeout(() => {\r\n      this.setState({\r\n        hasError: false,\r\n        error: null,\r\n        errorInfo: null,\r\n        errorId: null,\r\n      })\r\n    }, 100)\r\n  }\r\n\r\n  reportError = (error: Error, errorInfo: ErrorInfo, errorId: string) => {\r\n    // Here you could send error reports to services like Sentry, LogRocket, etc.\r\n    if (import.meta.env.PROD) {\r\n      try {\r\n        // Example: Send to error reporting service\r\n        console.error('Error reported:', {\r\n          errorId,\r\n          message: error.message,\r\n          stack: error.stack,\r\n          componentStack: errorInfo.componentStack,\r\n          url: window.location.href,\r\n          userAgent: navigator.userAgent,\r\n          timestamp: new Date().toISOString(),\r\n        })\r\n      } catch (reportingError) {\r\n        console.error('Failed to report error:', reportingError)\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { hasError, error, errorInfo, errorId } = this.state\r\n    const { children, fallback } = this.props\r\n\r\n    if (hasError) {\r\n      if (fallback) {\r\n        return fallback\r\n      }\r\n\r\n      return (\r\n        <ErrorFallback\r\n          error={error}\r\n          errorInfo={errorInfo}\r\n          errorId={errorId}\r\n          onReset={this.resetErrorBoundary}\r\n        />\r\n      )\r\n    }\r\n\r\n    return children\r\n  }\r\n}\r\n\r\ninterface ErrorFallbackProps {\r\n  error: Error | null\r\n  errorInfo: ErrorInfo | null\r\n  errorId: string | null\r\n  onReset: () => void\r\n}\r\n\r\nconst ErrorFallback: React.FC<ErrorFallbackProps> = ({\r\n  error,\r\n  errorInfo,\r\n  errorId,\r\n  onReset,\r\n}) => {\r\n  const handleReload = () => {\r\n    window.location.reload()\r\n  }\r\n\r\n  const copyErrorDetails = () => {\r\n    const errorDetails = {\r\n      errorId,\r\n      message: error?.message,\r\n      stack: error?.stack,\r\n      componentStack: errorInfo?.componentStack,\r\n      url: window.location.href,\r\n      timestamp: new Date().toISOString(),\r\n    }\r\n\r\n    navigator.clipboard.writeText(JSON.stringify(errorDetails, null, 2))\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <div className=\"mx-auto h-12 w-12 text-red-500\">\r\n            <svg\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              stroke=\"currentColor\"\r\n              className=\"w-full h-full\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z\"\r\n              />\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Something went wrong\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            An unexpected error occurred while loading this page.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-8 space-y-4\">\r\n          <button\r\n            onClick={onReset}\r\n            className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n          >\r\n            Try Again\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleReload}\r\n            className=\"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n          >\r\n            Reload Page\r\n          </button>\r\n\r\n          {import.meta.env.DEV && (\r\n            <details className=\"mt-4\">\r\n              <summary className=\"cursor-pointer text-sm text-gray-600 hover:text-gray-800\">\r\n                Error Details (Development)\r\n              </summary>\r\n              <div className=\"mt-2 p-4 bg-gray-100 rounded-md\">\r\n                <p className=\"text-xs text-gray-800\">\r\n                  <strong>Error ID:</strong> {errorId}\r\n                </p>\r\n                {error && (\r\n                  <div className=\"mt-2\">\r\n                    <p className=\"text-xs text-red-600\">\r\n                      <strong>Message:</strong> {error.message}\r\n                    </p>\r\n                    {error.stack && (\r\n                      <pre className=\"mt-2 text-xs text-gray-600 overflow-auto\">\r\n                        {error.stack}\r\n                      </pre>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                <button\r\n                  onClick={copyErrorDetails}\r\n                  className=\"mt-2 text-xs text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  Copy Error Details\r\n                </button>\r\n              </div>\r\n            </details>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorBoundary\r\n\r\n// Higher-order component for wrapping components with error boundary\r\nexport function withErrorBoundary<T extends object>(\r\n  Component: React.ComponentType<T>,\r\n  errorBoundaryProps?: Omit<Props, 'children'>\r\n) {\r\n  const WrappedComponent = (props: T) => (\r\n    <ErrorBoundary {...errorBoundaryProps}>\r\n      <Component {...props} />\r\n    </ErrorBoundary>\r\n  )\r\n\r\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`\r\n\r\n  return WrappedComponent\r\n}\r\n\r\n// Hook for handling errors in functional components\r\nexport function useErrorHandler() {\r\n  const handleError = React.useCallback((error: Error, errorInfo?: any) => {\r\n    logger.error('useErrorHandler', 'Handled error', {\r\n      error: error.message,\r\n      stack: error.stack,\r\n      errorInfo,\r\n    })\r\n\r\n    // You could also throw the error to trigger the error boundary\r\n    // throw error\r\n  }, [])\r\n\r\n  return handleError\r\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\Card.tsx","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":152,"column":23,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":193,"endColumn":3},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5120,5123],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5120,5123],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface CardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n  variant?: 'default' | 'elevated' | 'outlined' | 'glass';\r\n  padding?: 'none' | 'small' | 'medium' | 'large';\r\n  hoverable?: boolean;\r\n  clickable?: boolean;\r\n  className?: string;\r\n  onClick?: () => void;\r\n}\r\n\r\nconst paddingStyles = {\r\n  none: css`\r\n    padding: 0;\r\n  `,\r\n  small: css`\r\n    padding: ${({ theme }) => theme.spacing.sm};\r\n  `,\r\n  medium: css`\r\n    padding: ${({ theme }) => theme.spacing.md};\r\n  `,\r\n  large: css`\r\n    padding: ${({ theme }) => theme.spacing.lg};\r\n  `,\r\n};\r\n\r\nconst variantStyles = {\r\n  default: css`\r\n    background: ${({ theme }) => theme.colors.surface};\r\n    border: 1px solid ${({ theme }) => theme.colors.border};\r\n    box-shadow: ${({ theme }) => theme.shadows.sm};\r\n  `,\r\n  elevated: css`\r\n    background: ${({ theme }) => theme.colors.surface};\r\n    border: none;\r\n    box-shadow: ${({ theme }) => theme.shadows.lg};\r\n  `,\r\n  outlined: css`\r\n    background: transparent;\r\n    border: 2px solid ${({ theme }) => theme.colors.border};\r\n    box-shadow: none;\r\n  `,\r\n  glass: css`\r\n    background: rgba(255, 255, 255, 0.1);\r\n    backdrop-filter: blur(10px);\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    box-shadow: ${({ theme }) => theme.shadows.lg};\r\n  `,\r\n};\r\n\r\nconst StyledCard = styled(motion.div).withConfig({\r\n  shouldForwardProp: (prop) => !['variant', 'padding', 'hoverable', 'clickable'].includes(prop)\r\n})<CardProps>`\r\n  border-radius: ${({ theme }) => theme.radius.lg};\r\n  overflow: hidden;\r\n  position: relative;\r\n  transition: all ${({ theme }) => theme.transitions.normal};\r\n\r\n  ${({ variant = 'default' }) => variantStyles[variant]}\r\n  ${({ padding = 'medium' }) => paddingStyles[padding]}\r\n\r\n  ${({ hoverable }) => hoverable && css`\r\n    &:hover {\r\n      transform: translateY(-4px);\r\n      box-shadow: ${({ theme }) => theme.shadows.xl};\r\n    }\r\n  `}\r\n\r\n  ${({ clickable }) => clickable && css`\r\n    cursor: pointer;\r\n    user-select: none;\r\n\r\n    &:active {\r\n      transform: scale(0.98);\r\n    }\r\n  `}\r\n`;\r\n\r\nconst CardHeader = styled.div`\r\n  padding: ${({ theme }) => theme.spacing.md};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.border};\r\n\r\n  h3 {\r\n    margin: 0;\r\n    font-size: ${({ theme }) => theme.typography.fontSize.xl};\r\n    font-weight: ${({ theme }) => theme.typography.fontWeight.semibold};\r\n    color: ${({ theme }) => theme.colors.text};\r\n  }\r\n\r\n  p {\r\n    margin: ${({ theme }) => theme.spacing.xs} 0 0;\r\n    font-size: ${({ theme }) => theme.typography.fontSize.sm};\r\n    color: ${({ theme }) => theme.colors.textSecondary};\r\n  }\r\n`;\r\n\r\nconst CardContent = styled.div`\r\n  padding: ${({ theme }) => theme.spacing.md};\r\n`;\r\n\r\nconst CardFooter = styled.div`\r\n  padding: ${({ theme }) => theme.spacing.md};\r\n  border-top: 1px solid ${({ theme }) => theme.colors.border};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: ${({ theme }) => theme.spacing.sm};\r\n`;\r\n\r\nconst CardImage = styled.div<{ height?: string }>`\r\n  position: relative;\r\n  width: 100%;\r\n  height: ${({ height }) => height || '200px'};\r\n  overflow: hidden;\r\n\r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    transition: transform ${({ theme }) => theme.transitions.slow};\r\n  }\r\n\r\n  &:hover img {\r\n    transform: scale(1.05);\r\n  }\r\n`;\r\n\r\nconst CardBadge = styled.span<{ color?: string }>`\r\n  position: absolute;\r\n  top: ${({ theme }) => theme.spacing.sm};\r\n  right: ${({ theme }) => theme.spacing.sm};\r\n  padding: ${({ theme }) => `${theme.spacing.xs} ${theme.spacing.sm}`};\r\n  background: ${({ color, theme }) => color || theme.colors.primary};\r\n  color: ${({ theme }) => theme.colors.textInverse};\r\n  border-radius: ${({ theme }) => theme.radius.full};\r\n  font-size: ${({ theme }) => theme.typography.fontSize.xs};\r\n  font-weight: ${({ theme }) => theme.typography.fontWeight.semibold};\r\n  z-index: 1;\r\n`;\r\n\r\ninterface CardComponent extends React.ForwardRefExoticComponent<CardProps & React.RefAttributes<HTMLDivElement>> {\r\n  Header: React.FC<{ children: React.ReactNode }>;\r\n  Content: React.FC<{ children: React.ReactNode }>;\r\n  Footer: React.FC<{ children: React.ReactNode }>;\r\n  Image: React.FC<{ height?: string; children: React.ReactNode }>;\r\n  Badge: React.FC<{ color?: string; children: React.ReactNode }>;\r\n}\r\n\r\nconst CardComponent = React.forwardRef<HTMLDivElement, CardProps>(({\r\n  children,\r\n  onClick,\r\n  clickable,\r\n  hoverable,\r\n  variant = 'default',\r\n  padding = 'medium',\r\n  role,\r\n  tabIndex,\r\n  ...props\r\n}, ref) => {\r\n  const cardVariants = {\r\n    initial: { opacity: 0, y: 20 },\r\n    animate: { opacity: 1, y: 0 },\r\n    exit: { opacity: 0, y: -20 }\r\n  };\r\n\r\n  const isClickable = Boolean(onClick || clickable);\r\n  const shouldHover = hoverable || isClickable;\r\n\r\n  return (\r\n    <StyledCard\r\n      ref={ref}\r\n      onClick={onClick}\r\n      variants={cardVariants}\r\n      initial=\"initial\"\r\n      animate=\"animate\"\r\n      exit=\"exit\"\r\n      {...(props as any)}\r\n      transition={{ duration: 0.3 }}\r\n      variant={variant}\r\n      padding={padding}\r\n      hoverable={shouldHover}\r\n      clickable={isClickable}\r\n      role={isClickable ? (role || 'button') : role}\r\n      tabIndex={isClickable ? (tabIndex ?? 0) : tabIndex}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </StyledCard>\r\n  );\r\n}) as CardComponent;\r\n\r\n// Export the main component\r\nexport const Card = CardComponent;\r\n\r\n// Export sub-components with proper typing\r\nCard.Header = CardHeader;\r\nCard.Content = CardContent;\r\nCard.Footer = CardFooter;\r\nCard.Image = CardImage;\r\nCard.Badge = CardBadge;\r\n\r\n// Export sub-components as named exports for testing\r\nexport { CardHeader, CardContent, CardFooter, CardImage, CardBadge };\r\n\r\nexport default Card;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\Loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\__tests__\\Button.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\__tests__\\Card.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\__tests__\\Input.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'container' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":256,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":256,"endColumn":24}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest'\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react'\r\nimport userEvent from '@testing-library/user-event'\r\nimport { ThemeProvider } from 'styled-components'\r\nimport { Input } from '../Input'\r\n\r\n// Helper to render with theme\r\nconst renderWithTheme = (component: React.ReactElement) => {\r\n  return render(\r\n    <ThemeProvider theme={(global as any).mockTheme}>\r\n      {component}\r\n    </ThemeProvider>\r\n  )\r\n}\r\n\r\ndescribe('Input Component', () => {\r\n  describe('Basic Functionality', () => {\r\n    it('renders input with default props', () => {\r\n      renderWithTheme(<Input data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n      // Default type is implied as 'text' in HTML, no explicit attribute needed\r\n    })\r\n\r\n    it('renders with placeholder', () => {\r\n      renderWithTheme(<Input placeholder=\"Enter text\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveAttribute('placeholder', 'Enter text')\r\n    })\r\n\r\n    it('handles value changes', async () => {\r\n      const user = userEvent.setup()\r\n      const handleChange = vi.fn()\r\n\r\n      renderWithTheme(<Input onChange={handleChange} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n\r\n      await (global as any).actAsync(async () => {\r\n        await user.type(input, 'test value')\r\n      })\r\n\r\n      expect(handleChange).toHaveBeenCalled()\r\n      expect(input).toHaveValue('test value')\r\n    })\r\n\r\n    it('renders with initial value', () => {\r\n      renderWithTheme(<Input value=\"initial value\" onChange={vi.fn()} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveValue('initial value')\r\n    })\r\n\r\n    it('handles different input types', () => {\r\n      const { rerender } = renderWithTheme(<Input type=\"email\" data-testid=\"input\" />)\r\n      expect(screen.getByTestId('input')).toHaveAttribute('type', 'email')\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Input type=\"password\" data-testid=\"input\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByTestId('input')).toHaveAttribute('type', 'password')\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Input type=\"number\" data-testid=\"input\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByTestId('input')).toHaveAttribute('type', 'number')\r\n    })\r\n  })\r\n\r\n  describe('States and Variants', () => {\r\n    it('applies different variants', () => {\r\n      const { rerender } = renderWithTheme(<Input variant=\"default\" data-testid=\"input\" />)\r\n      expect(screen.getByTestId('input')).toBeInTheDocument()\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Input variant=\"filled\" data-testid=\"input\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByTestId('input')).toBeInTheDocument()\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Input variant=\"outlined\" data-testid=\"input\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByTestId('input')).toBeInTheDocument()\r\n    })\r\n\r\n    it('handles disabled state', () => {\r\n      renderWithTheme(<Input disabled data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input');\r\n      expect(input).toHaveAttribute('disabled')\r\n\r\n      // The input should be disabled\r\n      expect(input).toHaveProperty('disabled', true)\r\n    })\r\n\r\n    it('handles readonly state', () => {\r\n      renderWithTheme(<Input readOnly value=\"readonly value\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveAttribute('readOnly')\r\n    })\r\n\r\n    it('applies error state', () => {\r\n      renderWithTheme(<Input error=\"This field is required\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n      expect(screen.getByText('This field is required')).toBeInTheDocument()\r\n    })\r\n\r\n    it('applies success state', () => {\r\n      renderWithTheme(<Input success=\"Input is valid\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n      expect(screen.getByText('Input is valid')).toBeInTheDocument()\r\n    })\r\n\r\n    it('shows required indicator', () => {\r\n      renderWithTheme(\r\n        <div>\r\n          <Input required data-testid=\"input\" />\r\n        </div>\r\n      )\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveAttribute('required')\r\n    })\r\n  })\r\n\r\n  describe('Label and Help Text', () => {\r\n    it('renders with label', () => {\r\n      renderWithTheme(<Input label=\"Email Address\" data-testid=\"input\" />)\r\n\r\n      expect(screen.getByText('Email Address')).toBeInTheDocument()\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders help text', () => {\r\n      renderWithTheme(<Input helperText=\"Enter your email address\" data-testid=\"input\" />)\r\n\r\n      expect(screen.getByText('Enter your email address')).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders error message', () => {\r\n      renderWithTheme(<Input error=\"This field is required\" data-testid=\"input\" />)\r\n\r\n      expect(screen.getByText('This field is required')).toBeInTheDocument()\r\n    })\r\n\r\n    it('prioritizes error message over help text', () => {\r\n      renderWithTheme(\r\n        <Input\r\n          helperText=\"Help text\"\r\n          error=\"Error message\"\r\n          data-testid=\"input\"\r\n        />\r\n      )\r\n\r\n      expect(screen.getByText('Error message')).toBeInTheDocument()\r\n      expect(screen.queryByText('Help text')).not.toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Icons and Adornments', () => {\r\n    it('renders with icon', () => {\r\n      const Icon = () => <span data-testid=\"icon\">­ƒöì</span>\r\n\r\n      renderWithTheme(<Input icon={<Icon />} data-testid=\"input\" />)\r\n\r\n      expect(screen.getByTestId('icon')).toBeInTheDocument()\r\n      expect(screen.getByTestId('input')).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with icon on right side', () => {\r\n      const Icon = () => <span data-testid=\"icon\">Ô£ô</span>\r\n\r\n      renderWithTheme(<Input icon={<Icon />} iconPosition=\"right\" data-testid=\"input\" />)\r\n\r\n      expect(screen.getByTestId('icon')).toBeInTheDocument()\r\n      expect(screen.getByTestId('input')).toBeInTheDocument()\r\n    })\r\n\r\n    it('handles icon click events', () => {\r\n      const handleIconClick = vi.fn()\r\n      const ClickableIcon = () => (\r\n        <button data-testid=\"icon-button\" onClick={handleIconClick}>\r\n          Clear\r\n        </button>\r\n      )\r\n\r\n      renderWithTheme(<Input icon={<ClickableIcon />} data-testid=\"input\" />)\r\n\r\n      const iconButton = screen.getByTestId('icon-button')\r\n      fireEvent.click(iconButton)\r\n\r\n      expect(handleIconClick).toHaveBeenCalledTimes(1)\r\n    })\r\n  })\r\n\r\n  describe('Focus and Blur Events', () => {\r\n    it('handles focus events', () => {\r\n      const handleFocus = vi.fn()\r\n\r\n      renderWithTheme(<Input onFocus={handleFocus} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      fireEvent.focus(input)\r\n\r\n      expect(handleFocus).toHaveBeenCalledTimes(1)\r\n      // Focus events work even if JSDOM doesn't update activeElement perfectly\r\n    })\r\n\r\n    it('handles blur events', () => {\r\n      const handleBlur = vi.fn()\r\n\r\n      renderWithTheme(<Input onBlur={handleBlur} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      fireEvent.focus(input)\r\n      fireEvent.blur(input)\r\n\r\n      expect(handleBlur).toHaveBeenCalledTimes(1)\r\n      // Blur events work even if JSDOM doesn't update activeElement perfectly\r\n    })\r\n\r\n    it('maintains focus state styling', () => {\r\n      const handleFocus = vi.fn()\r\n      const handleBlur = vi.fn()\r\n\r\n      renderWithTheme(<Input onFocus={handleFocus} onBlur={handleBlur} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n\r\n      fireEvent.focus(input)\r\n      expect(handleFocus).toHaveBeenCalledTimes(1)\r\n\r\n      fireEvent.blur(input)\r\n      expect(handleBlur).toHaveBeenCalledTimes(1)\r\n    })\r\n  })\r\n\r\n  describe('Validation', () => {\r\n    it('handles required validation', async () => {\r\n      const { container } = renderWithTheme(<Input required data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      fireEvent.focus(input)\r\n      fireEvent.blur(input)\r\n\r\n      // Input component doesn't have built-in validation, just verify it renders\r\n      expect(input).toBeInTheDocument()\r\n      expect(input).toHaveAttribute('required')\r\n    })\r\n\r\n    it('handles email validation', async () => {\r\n      renderWithTheme(<Input type=\"email\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      fireEvent.change(input, { target: { value: 'invalid-email' } })\r\n      fireEvent.blur(input)\r\n\r\n      // Input component doesn't have built-in validation, just verify it accepts email type\r\n      expect(input).toHaveAttribute('type', 'email')\r\n      expect(input).toHaveValue('invalid-email')\r\n    })\r\n\r\n    it('clears validation errors on valid input', async () => {\r\n      const user = userEvent.setup()\r\n      renderWithTheme(<Input type=\"email\" required data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n\r\n      // Enter invalid email\r\n      await user.type(input, 'invalid')\r\n      fireEvent.blur(input)\r\n      expect(input).toHaveValue('invalid')\r\n\r\n      // Then enter valid email\r\n      await user.clear(input)\r\n      await user.type(input, 'valid@example.com')\r\n      fireEvent.blur(input)\r\n      expect(input).toHaveValue('valid@example.com')\r\n    })\r\n  })\r\n\r\n  describe('Custom Styling', () => {\r\n    it('applies custom className', () => {\r\n      renderWithTheme(<Input className=\"custom-input\" data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n      // The className is applied to the wrapper, not the input element\r\n    })\r\n\r\n    it('applies custom styles', () => {\r\n      renderWithTheme(<Input style={{ width: '200px' }} data-testid=\"input\" />)\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveStyle({ width: '200px' })\r\n    })\r\n  })\r\n\r\n  describe('Accessibility', () => {\r\n    it('has proper ARIA attributes', () => {\r\n      renderWithTheme(\r\n        <Input\r\n          label=\"Email\"\r\n          helperText=\"Enter your email\"\r\n          error=\"Invalid email\"\r\n          data-testid=\"input\"\r\n        />\r\n      )\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toBeInTheDocument()\r\n      // Basic accessibility check - component should be accessible\r\n    })\r\n\r\n    it('supports custom ARIA attributes', () => {\r\n      renderWithTheme(\r\n        <Input\r\n          aria-label=\"Search input\"\r\n          aria-describedby=\"search-help\"\r\n          data-testid=\"input\"\r\n        />\r\n      )\r\n\r\n      const input = screen.getByTestId('input')\r\n      expect(input).toHaveAttribute('aria-label', 'Search input')\r\n      expect(input).toHaveAttribute('aria-describedby', 'search-help')\r\n    })\r\n\r\n    it('generates unique IDs for labels', () => {\r\n      renderWithTheme(\r\n        <div>\r\n          <Input label=\"First Name\" data-testid=\"input1\" />\r\n          <Input label=\"Last Name\" data-testid=\"input2\" />\r\n        </div>\r\n      )\r\n\r\n      const input1 = screen.getByTestId('input1')\r\n      const input2 = screen.getByTestId('input2')\r\n\r\n      expect(input1).toBeInTheDocument()\r\n      expect(input2).toBeInTheDocument()\r\n      // Labels are rendered without explicit ID associations in this implementation\r\n    })\r\n  })\r\n\r\n  describe('Ref Forwarding', () => {\r\n    it('forwards ref to input element', () => {\r\n      const ref = vi.fn()\r\n\r\n      renderWithTheme(<Input ref={ref} data-testid=\"input\" />)\r\n\r\n      expect(ref).toHaveBeenCalled()\r\n      const input = screen.getByTestId('input')\r\n      expect(ref).toHaveBeenCalledWith(input)\r\n    })\r\n\r\n    it('allows programmatic focus via ref', () => {\r\n      let inputRef: HTMLInputElement | null = null\r\n\r\n      renderWithTheme(\r\n        <Input\r\n          ref={(ref) => { inputRef = ref }}\r\n          data-testid=\"input\"\r\n        />\r\n      )\r\n\r\n      expect(inputRef).toBeTruthy()\r\n\r\n      // Type guard to ensure inputRef is not null\r\n      if (inputRef !== null) {\r\n        (inputRef as HTMLInputElement).focus()\r\n        expect(inputRef).toHaveFocus()\r\n      }\r\n    })\r\n  })\r\n})\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\__tests__\\Loading.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'waitFor' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest'\r\nimport { render, screen, waitFor } from '@testing-library/react'\r\nimport { ThemeProvider } from 'styled-components'\r\nimport { Loading } from '../Loading'\r\n\r\n// Helper to render with theme\r\nconst renderWithTheme = (component: React.ReactElement) => {\r\n  return render(\r\n    <ThemeProvider theme={(global as any).mockTheme}>\r\n      {component}\r\n    </ThemeProvider>\r\n  )\r\n}\r\n\r\ndescribe('Loading Component', () => {\r\n  describe('Basic Rendering', () => {\r\n    it('renders loading spinner by default', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders without text by default', () => {\r\n      renderWithTheme(<Loading />)\r\n\r\n      expect(screen.queryByText('Loading...')).not.toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with custom text', () => {\r\n      renderWithTheme(<Loading text=\"Processing your request...\" />)\r\n\r\n      expect(screen.getByText('Processing your request...')).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders without text when not specified', () => {\r\n      renderWithTheme(<Loading />)\r\n\r\n      expect(screen.queryByText('Loading...')).not.toBeInTheDocument()\r\n    })\r\n\r\n    it('renders empty text when specified', () => {\r\n      renderWithTheme(<Loading text=\"\" />)\r\n\r\n      expect(screen.queryByText('Loading...')).not.toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Size Variants', () => {\r\n    it('renders small size variant', () => {\r\n      renderWithTheme(<Loading size=\"small\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders medium size variant (default)', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders large size variant', () => {\r\n      renderWithTheme(<Loading size=\"large\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Color Variants', () => {\r\n    it('renders with default color', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with custom color', () => {\r\n      renderWithTheme(<Loading color=\"#ff0000\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with hex color', () => {\r\n      renderWithTheme(<Loading color=\"#00ff00\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Variant Types', () => {\r\n    it('renders spinner variant (default)', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders dots variant', () => {\r\n      renderWithTheme(<Loading variant=\"dots\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders pulse variant', () => {\r\n      renderWithTheme(<Loading variant=\"pulse\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders bars variant', () => {\r\n      renderWithTheme(<Loading variant=\"bars\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Fullscreen and Overlay', () => {\r\n    it('renders fullscreen overlay', () => {\r\n      renderWithTheme(<Loading fullScreen data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders inline loading (default)', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with overlay', () => {\r\n      renderWithTheme(<Loading overlay data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('combines fullscreen with overlay', () => {\r\n      renderWithTheme(<Loading fullScreen overlay data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Text Display', () => {\r\n    it('renders with text content', () => {\r\n      renderWithTheme(<Loading text=\"Loading 65%\" />)\r\n\r\n      expect(screen.getByText('Loading 65%')).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with animated text', () => {\r\n      renderWithTheme(<Loading text=\"Processing...\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n      expect(screen.getByText('Processing...')).toBeInTheDocument()\r\n    })\r\n\r\n    it('handles text with multiple words', () => {\r\n      renderWithTheme(<Loading text=\"Processing files...\" />)\r\n\r\n      expect(screen.getByText('Processing files...')).toBeInTheDocument()\r\n    })\r\n\r\n    it('handles empty text properly', () => {\r\n      const { rerender } = renderWithTheme(<Loading text=\"Some text\" />)\r\n      expect(screen.getByText('Some text')).toBeInTheDocument()\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Loading text=\"\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.queryByText('Some text')).not.toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Accessibility', () => {\r\n    it('has proper ARIA attributes', () => {\r\n      renderWithTheme(<Loading aria-label=\"Loading content\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n      expect(loading).toHaveAttribute('aria-label', 'Loading content')\r\n    })\r\n\r\n    it('has accessible content', () => {\r\n      renderWithTheme(<Loading text=\"Loading content\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n      expect(screen.getByText('Loading content')).toBeInTheDocument()\r\n    })\r\n\r\n    it('supports custom aria-label', () => {\r\n      renderWithTheme(<Loading aria-label=\"Custom loading label\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toHaveAttribute('aria-label', 'Custom loading label')\r\n    })\r\n\r\n    it('announces text changes to screen readers', () => {\r\n      const { rerender } = renderWithTheme(<Loading text=\"Loading 25%\" />)\r\n\r\n      expect(screen.getByText('Loading 25%')).toBeInTheDocument()\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Loading text=\"Loading 75%\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByText('Loading 75%')).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Custom Styling', () => {\r\n    it('applies custom className', () => {\r\n      renderWithTheme(<Loading className=\"custom-loading\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toHaveClass('custom-loading')\r\n    })\r\n\r\n    it('applies custom styles', () => {\r\n      renderWithTheme(<Loading style={{ margin: '20px' }} data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toHaveStyle({ margin: '20px' })\r\n    })\r\n\r\n    it('combines multiple props correctly', () => {\r\n      renderWithTheme(\r\n        <Loading\r\n          size=\"large\"\r\n          color=\"#ff0000\"\r\n          variant=\"dots\"\r\n          fullScreen\r\n          className=\"custom-class\"\r\n          data-testid=\"loading\"\r\n        />\r\n      )\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n      expect(loading).toHaveClass('custom-class')\r\n    })\r\n  })\r\n\r\n  describe('Conditional Rendering', () => {\r\n    it('renders by default', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n      expect(screen.getByTestId('loading')).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders with all props', () => {\r\n      renderWithTheme(<Loading size=\"large\" variant=\"dots\" color=\"#ff0000\" fullScreen overlay text=\"Loading...\" data-testid=\"loading\" />)\r\n      expect(screen.getByTestId('loading')).toBeInTheDocument()\r\n      expect(screen.getByText('Loading...')).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Animation Behavior', () => {\r\n    it('renders with animations by default', () => {\r\n      renderWithTheme(<Loading data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('renders different variants with animations', () => {\r\n      renderWithTheme(<Loading variant=\"netflix\" data-testid=\"loading\" />)\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('handles different animation types', async () => {\r\n      const { rerender } = renderWithTheme(<Loading variant=\"pulse\" data-testid=\"loading\" />)\r\n      expect(screen.getByTestId('loading')).toBeInTheDocument()\r\n\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <Loading variant=\"bars\" data-testid=\"loading\" />\r\n        </ThemeProvider>\r\n      )\r\n      expect(screen.getByTestId('loading')).toBeInTheDocument()\r\n    })\r\n  })\r\n\r\n  describe('Error States', () => {\r\n    it('handles edge cases gracefully', () => {\r\n      // Should not crash with edge case props\r\n      renderWithTheme(\r\n        <Loading\r\n          color={\"\"}\r\n          text={\"\"}\r\n          data-testid=\"loading\"\r\n        />\r\n      )\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument()\r\n    })\r\n\r\n    it('falls back to defaults for undefined values', () => {\r\n      renderWithTheme(\r\n        <Loading\r\n          size={undefined}\r\n          color={undefined}\r\n          data-testid=\"loading\"\r\n        />\r\n      )\r\n\r\n      const loading = screen.getByTestId('loading')\r\n      expect(loading).toBeInTheDocument() // Should use defaults\r\n    })\r\n  })\r\n\r\n  describe('Performance', () => {\r\n    it('does not cause unnecessary re-renders', () => {\r\n      const renderSpy = vi.fn()\r\n\r\n      const TestComponent = () => {\r\n        renderSpy()\r\n        return <Loading data-testid=\"loading\" />\r\n      }\r\n\r\n      const { rerender } = renderWithTheme(<TestComponent />)\r\n\r\n      expect(renderSpy).toHaveBeenCalledTimes(1)\r\n\r\n      // Re-render with same props should not cause extra renders\r\n      rerender(\r\n        <ThemeProvider theme={(global as any).mockTheme}>\r\n          <TestComponent />\r\n        </ThemeProvider>\r\n      )\r\n\r\n      expect(renderSpy).toHaveBeenCalledTimes(2)\r\n    })\r\n  })\r\n})\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\components\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\config\\__tests__\\api-config.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\config\\api-config.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":164,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":164,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4479,4704],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * API Configuration for different environments\r\n * Handles base URLs, timeouts, and other environment-specific settings\r\n */\r\n\r\nexport interface ApiConfig {\r\n  baseUrl: string;\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  retryDelay: number;\r\n  enableLogging: boolean;\r\n  enableValidation: boolean;\r\n}\r\n\r\nexport type Environment = 'development' | 'staging' | 'production' | 'test';\r\n\r\n// Environment-specific configurations - evaluated dynamically to support testing\r\nfunction getConfigs(): Record<Environment, ApiConfig> {\r\n  return {\r\n    development: {\r\n      baseUrl: import.meta.env.VITE_API_URL || 'http://localhost:8000',\r\n      timeout: 10000,\r\n      retryAttempts: 3,\r\n      retryDelay: 1000,\r\n      enableLogging: true,\r\n      enableValidation: true,\r\n    },\r\n    staging: {\r\n      baseUrl: import.meta.env.VITE_STAGING_API_URL || 'https://staging-api.langplug.com',\r\n      timeout: 15000,\r\n      retryAttempts: 3,\r\n      retryDelay: 2000,\r\n      enableLogging: true,\r\n      enableValidation: true,\r\n    },\r\n    production: {\r\n      baseUrl: import.meta.env.VITE_API_URL || 'https://api.langplug.com',\r\n      timeout: 20000,\r\n      retryAttempts: 2,\r\n      retryDelay: 3000,\r\n      enableLogging: false,\r\n      enableValidation: false,\r\n    },\r\n    test: {\r\n      baseUrl: 'http://localhost:8000',\r\n      timeout: 5000,\r\n      retryAttempts: 1,\r\n      retryDelay: 500,\r\n      enableLogging: false,\r\n      enableValidation: true,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Get the current environment from various sources\r\n */\r\nfunction getCurrentEnvironment(): Environment {\r\n  // Check Vite environment variable first (highest priority)\r\n  if (import.meta.env.VITE_ENVIRONMENT) {\r\n    const env = import.meta.env.VITE_ENVIRONMENT as string;\r\n    if (['development', 'staging', 'production', 'test'].includes(env)) {\r\n      return env as Environment;\r\n    }\r\n  }\r\n\r\n  // Check hostname for staging (before NODE_ENV to support staging detection)\r\n  if (typeof window !== 'undefined' && window.location.hostname.includes('staging')) {\r\n    return 'staging';\r\n  }\r\n\r\n  // Check Node environment (but skip test in real app usage)\r\n  if (import.meta.env.NODE_ENV === 'production') {\r\n    return 'production';\r\n  }\r\n\r\n  // Only use test environment if explicitly set or no other env detected\r\n  if (import.meta.env.NODE_ENV === 'test' && !import.meta.env.VITE_ENVIRONMENT) {\r\n    return 'test';\r\n  }\r\n\r\n  // Default to development\r\n  return 'development';\r\n}\r\n\r\n/**\r\n * Get API configuration for the current environment\r\n */\r\nexport function getApiConfig(): ApiConfig {\r\n  const environment = getCurrentEnvironment();\r\n  const configs = getConfigs();\r\n  return { ...configs[environment] };\r\n}\r\n\r\n/**\r\n * Get API configuration for a specific environment\r\n */\r\nexport function getApiConfigForEnvironment(env: Environment): ApiConfig {\r\n  const configs = getConfigs();\r\n  return { ...configs[env] };\r\n}\r\n\r\n/**\r\n * Validate API configuration\r\n */\r\nexport function validateApiConfig(config: ApiConfig): boolean {\r\n  if (!config.baseUrl || !config.baseUrl.startsWith('http')) {\r\n    console.error('Invalid API base URL:', config.baseUrl);\r\n    return false;\r\n  }\r\n\r\n  if (config.timeout <= 0) {\r\n    console.error('Invalid API timeout:', config.timeout);\r\n    return false;\r\n  }\r\n\r\n  if (config.retryAttempts < 0) {\r\n    console.error('Invalid retry attempts:', config.retryAttempts);\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Create headers for API requests based on environment\r\n */\r\nexport function createApiHeaders(config: ApiConfig): Record<string, string> {\r\n  const headers: Record<string, string> = {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json',\r\n  };\r\n\r\n  // Add environment-specific headers\r\n  const environment = getCurrentEnvironment();\r\n  headers['X-Environment'] = environment;\r\n\r\n  // Add version header for contract versioning\r\n  headers['X-API-Version'] = '1.0';\r\n\r\n  // Add request ID for tracing in non-production environments\r\n  if (config.enableLogging) {\r\n    headers['X-Request-ID'] = generateRequestId();\r\n  }\r\n\r\n  return headers;\r\n}\r\n\r\n/**\r\n * Generate a unique request ID for tracing\r\n */\r\nfunction generateRequestId(): string {\r\n  return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Log API configuration on startup\r\n */\r\nexport function logApiConfig(): void {\r\n  const config = getApiConfig();\r\n  const environment = getCurrentEnvironment();\r\n\r\n  if (config.enableLogging) {\r\n    console.log('­ƒöº API Configuration:', {\r\n      environment,\r\n      baseUrl: config.baseUrl,\r\n      timeout: config.timeout,\r\n      retryAttempts: config.retryAttempts,\r\n      enableValidation: config.enableValidation,\r\n    });\r\n  }\r\n}\r\n\r\n// Export current configuration as default\r\nexport default getApiConfig();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\config\\api-endpoints.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\contexts\\ThemeContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":43,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isDarkMode'. Either include it or remove the dependency array.","line":73,"column":6,"nodeType":"ArrayExpression","endLine":73,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [isDarkMode]","fix":{"range":[1997,1999],"text":"[isDarkMode]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect, useRef } from 'react';\r\nimport { ThemeProvider as StyledThemeProvider } from 'styled-components';\r\nimport { lightTheme, darkTheme, Theme } from '@/styles/theme';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  isDarkMode: boolean;\r\n  toggleTheme: () => void;\r\n  setDarkMode: (isDark: boolean) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nconst isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\r\n\r\nconst getStoredPreference = (): boolean | null => {\r\n  if (!isBrowser || typeof window.localStorage === 'undefined') {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const stored = window.localStorage.getItem('theme');\r\n    if (stored === 'dark') return true;\r\n    if (stored === 'light') return false;\r\n    return null;\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst getSystemPreference = (): boolean => {\r\n  if (!isBrowser || typeof window.matchMedia !== 'function') {\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    return window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {\r\n  const [isDarkMode, setIsDarkMode] = useState<boolean>(() => {\r\n    const stored = getStoredPreference();\r\n    if (stored !== null) {\r\n      return stored;\r\n    }\r\n    return getSystemPreference();\r\n  });\r\n\r\n  const theme = isDarkMode ? darkTheme : lightTheme;\r\n  const hasHydrated = useRef(false);\r\n\r\n  useEffect(() => {\r\n    const stored = getStoredPreference();\r\n    if (stored !== null && stored !== isDarkMode) {\r\n      setIsDarkMode(stored);\r\n    }\r\n    hasHydrated.current = true;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!hasHydrated.current) {\r\n      return;\r\n    }\r\n\r\n    if (!isBrowser) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      window.localStorage?.setItem('theme', isDarkMode ? 'dark' : 'light');\r\n    } catch {\r\n      // Ignore storage write failures (private browsing, disabled storage, etc.)\r\n    }\r\n\r\n    if (document?.documentElement?.classList) {\r\n      document.documentElement.classList.toggle('dark', isDarkMode);\r\n    }\r\n\r\n    const metaThemeColor = document?.querySelector?.('meta[name=\"theme-color\"]');\r\n    if (metaThemeColor) {\r\n      metaThemeColor.setAttribute('content', theme.colors.background);\r\n    }\r\n  }, [isDarkMode, theme]);\r\n\r\n  useEffect(() => {\r\n    if (!isBrowser || typeof window.matchMedia !== 'function') {\r\n      return;\r\n    }\r\n\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n    const handleChange = (event: MediaQueryListEvent) => {\r\n      const stored = getStoredPreference();\r\n      if (stored === null) {\r\n        setIsDarkMode(event.matches);\r\n      }\r\n    };\r\n\r\n    if (typeof mediaQuery.addEventListener === 'function') {\r\n      mediaQuery.addEventListener('change', handleChange);\r\n      return () => mediaQuery.removeEventListener('change', handleChange);\r\n    }\r\n\r\n    // Safari < 14 uses addListener/removeListener\r\n    if (typeof mediaQuery.addListener === 'function') {\r\n      mediaQuery.addListener(handleChange);\r\n      return () => mediaQuery.removeListener(handleChange);\r\n    }\r\n  }, []);\r\n\r\n  const toggleTheme = () => {\r\n    setIsDarkMode(prev => !prev);\r\n  };\r\n\r\n  const value = {\r\n    theme,\r\n    isDarkMode,\r\n    toggleTheme,\r\n    setDarkMode: setIsDarkMode,\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={value}>\r\n      <StyledThemeProvider theme={theme}>\r\n        {children}\r\n      </StyledThemeProvider>\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\n// Theme toggle button component\r\nimport styled from 'styled-components';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst ToggleButton = styled(motion.button)`\r\n  position: fixed;\r\n  bottom: ${({ theme }) => theme.spacing.lg};\r\n  right: ${({ theme }) => theme.spacing.lg};\r\n  width: 56px;\r\n  height: 56px;\r\n  border-radius: ${({ theme }) => theme.radius.full};\r\n  background: ${({ theme }) => theme.colors.primary};\r\n  color: ${({ theme }) => theme.colors.textInverse};\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: ${({ theme }) => theme.shadows.lg};\r\n  z-index: ${({ theme }) => theme.zIndex.fixed};\r\n  transition: all ${({ theme }) => theme.transitions.normal};\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    box-shadow: ${({ theme }) => theme.shadows.xl};\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.95);\r\n  }\r\n\r\n  svg {\r\n    width: 24px;\r\n    height: 24px;\r\n  }\r\n`;\r\n\r\nexport const ThemeToggle: React.FC = () => {\r\n  const { isDarkMode, toggleTheme } = useTheme();\r\n\r\n  return (\r\n    <ToggleButton\r\n      onClick={toggleTheme}\r\n      whileHover={{ rotate: 180 }}\r\n      whileTap={{ scale: 0.9 }}\r\n      initial={{ opacity: 0, scale: 0 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      transition={{ duration: 0.3 }}\r\n      aria-label=\"Toggle theme\"\r\n    >\r\n      {isDarkMode ? (\r\n        // Sun icon for light mode\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n        </svg>\r\n      ) : (\r\n        // Moon icon for dark mode\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\r\n        </svg>\r\n      )}\r\n    </ToggleButton>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\contexts\\__tests__\\ThemeContext.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lightTheme' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { afterEach, beforeEach, describe, expect, it, vi } from 'vitest'\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react'\nimport React from 'react'\n\nimport { ThemeProvider, ThemeToggle, useTheme } from '../ThemeContext'\nimport { darkTheme, lightTheme } from '@/styles/theme'\n\nconst TestComponent: React.FC = () => {\n  const { theme, isDarkMode, toggleTheme, setDarkMode } = useTheme()\n\n  return (\n    <div>\n      <div data-testid=\"theme-value\">{theme.colors.background}</div>\n      <div data-testid=\"mode\">{isDarkMode ? 'dark' : 'light'}</div>\n      <button data-testid=\"toggle\" onClick={toggleTheme}>toggle</button>\n      <button data-testid=\"force-dark\" onClick={() => setDarkMode(true)}>force dark</button>\n      <button data-testid=\"force-light\" onClick={() => setDarkMode(false)}>force light</button>\n    </div>\n  )\n}\n\ntype Listener = (event: MediaQueryListEvent) => void\n\nlet originalMatchMedia: typeof window.matchMedia\nlet metaTag: HTMLMetaElement\nlet systemPrefersDark = false\nlet listeners: Listener[] = []\n\nconst installMatchMediaMock = () => {\n  listeners = []\n  const mockQuery: MediaQueryList = {\n    matches: systemPrefersDark,\n    media: '(prefers-color-scheme: dark)',\n    onchange: null,\n    addEventListener: (type: string, listener: EventListenerOrEventListenerObject) => {\n      listeners.push(listener as Listener)\n    },\n    removeEventListener: (type: string, listener: EventListenerOrEventListenerObject) => {\n      listeners = listeners.filter((registered) => registered !== listener)\n    },\n    addListener(handler: Listener) {\n      listeners.push(handler)\n    },\n    removeListener(handler: Listener) {\n      listeners = listeners.filter((registered) => registered !== handler)\n    },\n    dispatchEvent: () => true\n  }\n\n  window.matchMedia = vi.fn(() => mockQuery) as unknown as typeof window.matchMedia\n}\n\nconst triggerSystemThemeChange = (matches: boolean) => {\n  systemPrefersDark = matches\n  const event = {\n    matches,\n    media: '(prefers-color-scheme: dark)'\n  } as MediaQueryListEvent\n\n  for (const handler of listeners) {\n    handler(event)\n  }\n}\n\nbeforeEach(() => {\n  window.localStorage.clear()\n  document.documentElement.classList.remove('dark')\n  document.body.innerHTML = ''\n  document.head.innerHTML = ''\n\n  metaTag = document.createElement('meta')\n  metaTag.setAttribute('name', 'theme-color')\n  document.head.appendChild(metaTag)\n\n  originalMatchMedia = window.matchMedia\n  listeners = []\n  systemPrefersDark = false\n  installMatchMediaMock()\n})\n\nafterEach(() => {\n  window.localStorage.clear()\n  if (originalMatchMedia) {\n    window.matchMedia = originalMatchMedia\n  }\n  vi.restoreAllMocks()\n})\n\nconst renderWithProvider = (ui: React.ReactElement) => render(<ThemeProvider>{ui}</ThemeProvider>)\n\ndescribe('ThemeProvider', () => {\n  it('uses stored preference when available', async () => {\n    const getItemSpy = vi.spyOn(window.localStorage, 'getItem').mockImplementation((key: string) => {\n      if (key === 'theme') {\n        return 'dark'\n      }\n      return null\n    })\n\n    renderWithProvider(<TestComponent />)\n\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n    expect(screen.getByTestId('theme-value').textContent).toBe(darkTheme.colors.background)\n    expect(document.documentElement.classList.contains('dark')).toBe(true)\n\n    getItemSpy.mockRestore()\n  })\n\n  it('falls back to system preference when nothing stored', async () => {\n    vi.spyOn(window.localStorage, 'getItem').mockReturnValue(null)\n    systemPrefersDark = true\n    installMatchMediaMock()\n\n    renderWithProvider(<TestComponent />)\n\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n  })\n\n  it('persists changes and updates DOM state when toggled', async () => {\n    const setItemSpy = vi.spyOn(window.localStorage, 'setItem')\n\n    renderWithProvider(<TestComponent />)\n\n    fireEvent.click(screen.getByTestId('toggle'))\n\n    await waitFor(() => expect(setItemSpy).toHaveBeenCalledWith('theme', 'dark'))\n    expect(setItemSpy).toHaveBeenCalledWith('theme', 'dark')\n    expect(document.documentElement.classList.contains('dark')).toBe(true)\n    expect(metaTag.getAttribute('content')).toBe(darkTheme.colors.background)\n  })\n\n  it('can force explicit light/dark modes', async () => {\n    renderWithProvider(<TestComponent />)\n\n    fireEvent.click(screen.getByTestId('force-dark'))\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n\n    fireEvent.click(screen.getByTestId('force-light'))\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('light'))\n  })\n\n  it('responds to system theme changes when user has no preference', async () => {\n    renderWithProvider(<TestComponent />)\n\n    triggerSystemThemeChange(true)\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n\n    triggerSystemThemeChange(false)\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('light'))\n  })\n\n  it('ignores system theme changes after user sets a preference', async () => {\n    renderWithProvider(<TestComponent />)\n\n    fireEvent.click(screen.getByTestId('toggle'))\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n\n    triggerSystemThemeChange(false)\n    // stored preference should win\n    await waitFor(() => expect(screen.getByTestId('mode').textContent).toBe('dark'))\n  })\n})\n\ndescribe('ThemeToggle component', () => {\n  const Wrapper = () => (\n    <ThemeProvider>\n      <ThemeToggle />\n      <TestComponent />\n    </ThemeProvider>\n  )\n\n  it('toggles theme when clicked', async () => {\n    const setItemSpy = vi.spyOn(window.localStorage, 'setItem')\n\n    render(<Wrapper />)\n\n    fireEvent.click(screen.getByRole('button', { name: /toggle theme/i }))\n\n    await waitFor(() => expect(setItemSpy).toHaveBeenCalledWith('theme', 'dark'))\n    expect(document.documentElement.classList.contains('dark')).toBe(true)\n  })\n})\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\hooks\\__tests__\\useTaskProgress.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\hooks\\useApi.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":104,"column":29,"nodeType":"SpreadElement","endLine":104,"endColumn":36},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":174,"column":7,"nodeType":"Identifier","endLine":174,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":184,"column":7,"nodeType":"Identifier","endLine":184,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":194,"column":7,"nodeType":"Identifier","endLine":194,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":204,"column":7,"nodeType":"Identifier","endLine":204,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":214,"column":7,"nodeType":"Identifier","endLine":214,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":278,"column":7,"nodeType":"Identifier","endLine":278,"endColumn":13},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useApi\" cannot be called inside a callback. React Hooks must be called in a React function component or a custom React Hook function.","line":318,"column":7,"nodeType":"Identifier","endLine":318,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8434,8437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8434,8437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8452,8455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8452,8455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Custom hooks for API interactions with error handling and caching\r\n */\r\nimport { useState, useEffect, useCallback, useRef } from 'react'\r\nimport { api, ApiResponse, ApiError } from '@/services/api-client'\r\nimport { useAppStore } from '@/store/useAppStore'\r\n\r\nexport interface UseApiState<T> {\r\n  data: T | null\r\n  loading: boolean\r\n  error: string | null\r\n  refetch: () => Promise<void>\r\n  reset: () => void\r\n}\r\n\r\nexport interface UseApiOptions {\r\n  immediate?: boolean\r\n  cache?: boolean\r\n  cacheTtl?: number\r\n  retries?: number\r\n  retryDelay?: number\r\n}\r\n\r\n/**\r\n * Generic hook for API calls with error handling and loading states\r\n */\r\nexport function useApi<T>(\r\n  apiCall: () => Promise<ApiResponse<T>>,\r\n  deps: React.DependencyList = [],\r\n  options: UseApiOptions = {}\r\n): UseApiState<T> {\r\n  const {\r\n    immediate = true,\r\n    cache = false,\r\n    cacheTtl = 5 * 60 * 1000,\r\n    retries = 3,\r\n    retryDelay = 1000,\r\n  } = options\r\n\r\n  const [state, setState] = useState<{\r\n    data: T | null\r\n    loading: boolean\r\n    error: string | null\r\n  }>({\r\n    data: null,\r\n    loading: false,\r\n    error: null,\r\n  })\r\n\r\n  const setError = useAppStore((state) => state.setError)\r\n  const retryCount = useRef(0)\r\n  const cacheRef = useRef<{ data: T; timestamp: number } | null>(null)\r\n\r\n  const fetchData = useCallback(async () => {\r\n    // Check cache first\r\n    if (cache && cacheRef.current) {\r\n      const { data, timestamp } = cacheRef.current\r\n      if (Date.now() - timestamp < cacheTtl) {\r\n        setState({ data, loading: false, error: null })\r\n        return\r\n      }\r\n    }\r\n\r\n    setState((prev) => ({ ...prev, loading: true, error: null }))\r\n\r\n    try {\r\n      const response = await apiCall()\r\n      const data = response.data\r\n\r\n      // Cache the data\r\n      if (cache) {\r\n        cacheRef.current = { data, timestamp: Date.now() }\r\n      }\r\n\r\n      setState({ data, loading: false, error: null })\r\n      retryCount.current = 0\r\n    } catch (error) {\r\n      const apiError = error as ApiError\r\n      const errorMessage = apiError.message || 'An unexpected error occurred'\r\n\r\n      setState((prev) => ({ ...prev, loading: false, error: errorMessage }))\r\n      setError(errorMessage)\r\n\r\n      // Retry logic\r\n      if (retryCount.current < retries && apiError.status !== 401 && apiError.status !== 403) {\r\n        retryCount.current++\r\n        setTimeout(() => {\r\n          fetchData()\r\n        }, retryDelay * retryCount.current)\r\n      }\r\n    }\r\n  }, [apiCall, cache, cacheTtl, retries, retryDelay, setError])\r\n\r\n  const reset = useCallback(() => {\r\n    setState({ data: null, loading: false, error: null })\r\n    retryCount.current = 0\r\n    cacheRef.current = null\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (immediate) {\r\n      fetchData()\r\n    }\r\n  }, [fetchData, immediate, ...deps])\r\n\r\n  return {\r\n    ...state,\r\n    refetch: fetchData,\r\n    reset,\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for authentication-related API calls\r\n */\r\nexport function useAuth() {\r\n  const setError = useAppStore((state) => state.setError)\r\n\r\n  const login = useCallback(\r\n    async (credentials: { username: string; password: string }) => {\r\n      try {\r\n        const response = await api.auth.login(credentials)\r\n        const { access_token } = response.data as { access_token: string }\r\n        localStorage.setItem('authToken', access_token)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        setError(apiError.message)\r\n        throw error\r\n      }\r\n    },\r\n    [setError]\r\n  )\r\n\r\n  const register = useCallback(\r\n    async (userData: { username: string; email: string; password: string }) => {\r\n      try {\r\n        const response = await api.auth.register(userData)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        setError(apiError.message)\r\n        throw error\r\n      }\r\n    },\r\n    [setError]\r\n  )\r\n\r\n  const logout = useCallback(() => {\r\n    api.auth.logout()\r\n    localStorage.removeItem('authToken')\r\n  }, [])\r\n\r\n  const getCurrentUser = useApi(\r\n    () => api.auth.getCurrentUser(),\r\n    [],\r\n    { cache: true, cacheTtl: 60000 }\r\n  )\r\n\r\n  return {\r\n    login,\r\n    register,\r\n    logout,\r\n    currentUser: getCurrentUser,\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for vocabulary-related API calls\r\n */\r\nexport function useVocabularyApi() {\r\n  const searchWords = useCallback(\r\n    (query: string, language = 'de', limit = 20) =>\r\n      useApi(\r\n        () => api.vocabulary.search(query, language, limit),\r\n        [query, language, limit],\r\n        { cache: true, cacheTtl: 10 * 60 * 1000, immediate: !!query }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const getWordsByLevel = useCallback(\r\n    (level: string, language = 'de') =>\r\n      useApi(\r\n        () => api.vocabulary.getByLevel(level, language),\r\n        [level, language],\r\n        { cache: true, cacheTtl: 30 * 60 * 1000 }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const getRandomWords = useCallback(\r\n    (language = 'de', levels?: string[], limit = 10) =>\r\n      useApi(\r\n        () => api.vocabulary.getRandom(language, levels, limit),\r\n        [language, JSON.stringify(levels), limit],\r\n        { cache: true, cacheTtl: 5 * 60 * 1000 }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const getUserProgress = useCallback(\r\n    (language = 'de') =>\r\n      useApi(\r\n        () => api.vocabulary.getProgress(language),\r\n        [language],\r\n        { cache: true, cacheTtl: 30 * 1000 }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const getStats = useCallback(\r\n    (language = 'de') =>\r\n      useApi(\r\n        () => api.vocabulary.getStats(language),\r\n        [language],\r\n        { cache: true, cacheTtl: 60 * 1000 }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const markWord = useCallback(\r\n    async (vocabularyId: number, isKnown: boolean) => {\r\n      try {\r\n        const response = await api.vocabulary.markWord(vocabularyId, isKnown)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        throw new Error(apiError.message)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  const bulkMarkWords = useCallback(\r\n    async (vocabularyIds: number[], isKnown: boolean) => {\r\n      try {\r\n        const response = await api.vocabulary.bulkMarkWords(vocabularyIds, isKnown)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        throw new Error(apiError.message)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  return {\r\n    searchWords,\r\n    getWordsByLevel,\r\n    getRandomWords,\r\n    getUserProgress,\r\n    getStats,\r\n    markWord,\r\n    bulkMarkWords,\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for processing-related API calls\r\n */\r\nexport function useProcessingApi() {\r\n  const startTranscription = useCallback(\r\n    async (series: string, episode: string) => {\r\n      try {\r\n        const response = await api.processing.startTranscription(series, episode)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        throw new Error(apiError.message)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  const getProgress = useCallback(\r\n    (taskId: string) =>\r\n      useApi(\r\n        () => api.processing.getProgress(taskId),\r\n        [taskId],\r\n        { immediate: !!taskId }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const prepareEpisode = useCallback(\r\n    async (series: string, episode: string) => {\r\n      try {\r\n        const response = await api.processing.prepareEpisode(series, episode)\r\n        return response.data\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        throw new Error(apiError.message)\r\n      }\r\n    },\r\n    []\r\n  )\r\n\r\n  return {\r\n    startTranscription,\r\n    getProgress,\r\n    prepareEpisode,\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for videos-related API calls\r\n */\r\nexport function useVideosApi() {\r\n  const getVideoList = useApi(\r\n    () => api.videos.getList(),\r\n    [],\r\n    { cache: true, cacheTtl: 10 * 60 * 1000 }\r\n  )\r\n\r\n  const getEpisodes = useCallback(\r\n    (series: string) =>\r\n      useApi(\r\n        () => api.videos.getEpisodes(series),\r\n        [series],\r\n        { cache: true, cacheTtl: 10 * 60 * 1000, immediate: !!series }\r\n      ),\r\n    []\r\n  )\r\n\r\n  const getStreamUrl = useCallback(\r\n    (series: string, episode: string) => api.videos.getStreamUrl(series, episode),\r\n    []\r\n  )\r\n\r\n  return {\r\n    videoList: getVideoList,\r\n    getEpisodes,\r\n    getStreamUrl,\r\n  }\r\n}\r\n\r\n/**\r\n * Hook for handling async operations with loading and error states\r\n */\r\nexport function useAsyncOperation<T extends (...args: any[]) => Promise<any>>(\r\n  operation: T\r\n): [T, { loading: boolean; error: string | null }] {\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const wrappedOperation = useCallback(\r\n    async (...args: Parameters<T>) => {\r\n      setLoading(true)\r\n      setError(null)\r\n\r\n      try {\r\n        const result = await operation(...args)\r\n        return result\r\n      } catch (error) {\r\n        const apiError = error as ApiError\r\n        const errorMessage = apiError.message || 'An unexpected error occurred'\r\n        setError(errorMessage)\r\n        throw error\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    },\r\n    [operation]\r\n  ) as T\r\n\r\n  return [wrappedOperation, { loading, error }]\r\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\hooks\\useSubtitlePreferences.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\hooks\\useTaskProgress.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[670,673],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[670,673],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1679,1682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1679,1682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1872,1875],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1872,1875],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2321,2324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2321,2324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from 'react'\r\nimport { getTaskProgressApiProcessProgressTaskIdGet } from '@/client/services.gen'\r\nimport type { ProcessingStatus } from '@/types'\r\n\r\ntype TaskState = 'idle' | 'monitoring' | 'processing' | 'completed' | 'failed' | 'error'\r\n\r\nexport const useTaskProgress = () => {\r\n  const [taskId, setTaskId] = useState<string | null>(null)\r\n  const [progress, setProgress] = useState<number>(0)\r\n  const [status, setStatus] = useState<TaskState>('idle')\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [isComplete, setIsComplete] = useState<boolean>(false)\r\n  const [result, setResult] = useState<any>(null)\r\n  const intervalRef = useRef<number | null>(null)\r\n\r\n  const clearTimer = useCallback(() => {\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current)\r\n      intervalRef.current = null\r\n    }\r\n  }, [])\r\n\r\n  const poll = useCallback(async (currentTaskId?: string) => {\r\n    const idToUse = currentTaskId || taskId\r\n    if (!idToUse) return\r\n    try {\r\n      const res = await getTaskProgressApiProcessProgressTaskIdGet({ taskId: idToUse }) as ProcessingStatus & {\r\n        result?: unknown\r\n      }\r\n      setProgress(res?.progress ?? 0)\r\n\r\n      if (res?.status === 'processing') {\r\n        setStatus('processing')\r\n      } else if (res?.status === 'completed') {\r\n        setStatus('completed')\r\n        setIsComplete(true)\r\n        setResult(res?.result ?? null)\r\n        clearTimer()\r\n      } else if (res?.status === 'failed' || res?.status === 'error') {\r\n        setStatus('failed') // Always set to 'failed' for both 'failed' and 'error' statuses\r\n        setError((res as any)?.error || res?.message || 'Processing failed')\r\n        clearTimer()\r\n      } else {\r\n        // Unknown status: keep processing\r\n        setStatus('processing')\r\n      }\r\n    } catch (e: any) {\r\n      setStatus('error')\r\n      setError(e?.message || 'Network error')\r\n      clearTimer()\r\n    }\r\n  }, [taskId, clearTimer])\r\n\r\n  const startMonitoring = useCallback((id: string) => {\r\n    setTaskId(id)\r\n    setStatus('monitoring')\r\n    setIsComplete(false)\r\n    setError(null)\r\n    setProgress(0)\r\n    setResult(null)\r\n    clearTimer()\r\n    // Start polling every 2 seconds\r\n    intervalRef.current = setInterval(() => poll(id), 2000) as any\r\n  }, [poll, clearTimer])\r\n\r\n  const stopMonitoring = useCallback(() => {\r\n    clearTimer()\r\n    setStatus('idle')\r\n  }, [clearTimer])\r\n\r\n  const reset = useCallback(() => {\r\n    clearTimer()\r\n    setTaskId(null)\r\n    setProgress(0)\r\n    setStatus('idle')\r\n    setError(null)\r\n    setIsComplete(false)\r\n    setResult(null)\r\n  }, [clearTimer])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      clearTimer()\r\n    }\r\n  }, [clearTimer])\r\n\r\n  return {\r\n    taskId,\r\n    progress,\r\n    status,\r\n    error,\r\n    isComplete,\r\n    result,\r\n    startMonitoring,\r\n    stopMonitoring,\r\n    reset,\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\schemas\\api-schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\schemas\\helpers.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1401,1404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1401,1404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1559,1562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1559,1562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1692,1695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1692,1695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1916,1919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1916,1919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1953,1956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1953,1956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Helper functions for working with Zod validation schemas\r\n */\r\n\r\nimport { ZodError, ZodIssue } from 'zod'\r\n\r\n/**\r\n * Form errors object type\r\n */\r\nexport type FormErrors = Record<string, string>\r\n\r\n/**\r\n * Convert Zod validation error to form errors object\r\n *\r\n * @param error - Zod validation error\r\n * @returns Object mapping field names to error messages\r\n *\r\n * @example\r\n * try {\r\n *   const validData = schema.parse(formData)\r\n * } catch (error) {\r\n *   const formErrors = zodErrorToFormErrors(error)\r\n *   // { email: \"Invalid email format\", password: \"Must be at least 8 characters\" }\r\n * }\r\n */\r\nexport function zodErrorToFormErrors(error: unknown): FormErrors {\r\n  if (!(error instanceof ZodError)) {\r\n    return { _general: 'Validation failed' }\r\n  }\r\n\r\n  const formErrors: FormErrors = {}\r\n\r\n  error.issues.forEach((issue: ZodIssue) => {\r\n    const fieldPath = issue.path.join('.')\r\n    const fieldName = fieldPath || '_general'\r\n\r\n    // Get human-readable error message\r\n    formErrors[fieldName] = formatZodIssue(issue)\r\n  })\r\n\r\n  return formErrors\r\n}\r\n\r\n/**\r\n * Format a Zod issue into a user-friendly error message\r\n */\r\nfunction formatZodIssue(issue: ZodIssue): string {\r\n  const { code, message } = issue\r\n\r\n  // Customize messages based on error type\r\n  switch (code) {\r\n    case 'too_small':\r\n      if ('minimum' in issue) {\r\n        return `Must be at least ${(issue as any).minimum} characters`\r\n      }\r\n      return message\r\n\r\n    case 'too_big':\r\n      if ('maximum' in issue) {\r\n        return `Must be at most ${(issue as any).maximum} characters`\r\n      }\r\n      return message\r\n\r\n    case 'invalid_string':\r\n      if ('validation' in issue && (issue as any).validation === 'email') {\r\n        return 'Invalid email format'\r\n      }\r\n      return message\r\n\r\n    case 'invalid_type':\r\n      if ('expected' in issue && 'received' in issue) {\r\n        return `Expected ${(issue as any).expected}, received ${(issue as any).received}`\r\n      }\r\n      return message\r\n\r\n    default:\r\n      return message\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a Zod schema validates successfully (without throwing)\r\n *\r\n * @param schema - Zod schema\r\n * @param data - Data to validate\r\n * @returns true if valid, false if invalid\r\n *\r\n * @example\r\n * if (isValid(UserRegisterSchema, formData)) {\r\n *   // Form is valid\r\n * }\r\n */\r\nexport function isValid<T>(schema: { safeParse: (data: unknown) => { success: boolean, data?: T } }, data: unknown): data is T {\r\n  const result = schema.safeParse(data)\r\n  return result.success\r\n}\r\n\r\n/**\r\n * Validate data and return either the validated data or form errors\r\n *\r\n * @param schema - Zod schema\r\n * @param data - Data to validate\r\n * @returns Object with either 'data' or 'errors'\r\n *\r\n * @example\r\n * const result = validateWithErrors(UserRegisterSchema, formData)\r\n * if ('errors' in result) {\r\n *   setFormErrors(result.errors)\r\n * } else {\r\n *   submitForm(result.data)\r\n * }\r\n */\r\nexport function validateWithErrors<T>(\r\n  schema: { safeParse: (data: unknown) => { success: boolean, data?: T, error?: ZodError } },\r\n  data: unknown\r\n): { data: T } | { errors: FormErrors } {\r\n  const result = schema.safeParse(data)\r\n\r\n  if (result.success) {\r\n    return { data: result.data as T }\r\n  } else {\r\n    return { errors: zodErrorToFormErrors(result.error) }\r\n  }\r\n}\r\n\r\n/**\r\n * Get a specific field error from a ZodError\r\n *\r\n * @param error - Zod error\r\n * @param fieldName - Field name to get error for\r\n * @returns Error message or undefined\r\n */\r\nexport function getFieldError(error: ZodError | null | undefined, fieldName: string): string | undefined {\r\n  if (!error) return undefined\r\n\r\n  const issue = error.issues.find(issue => {\r\n    const path = issue.path.join('.')\r\n    return path === fieldName\r\n  })\r\n\r\n  return issue ? formatZodIssue(issue) : undefined\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\screens\\ProfileScreen.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadProfile'. Either include it or remove the dependency array.","line":68,"column":6,"nodeType":"ArrayExpression","endLine":68,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [loadProfile]","fix":{"range":[2508,2510],"text":"[loadProfile]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { toast } from 'react-hot-toast'\r\nimport { ArrowLeftIcon } from '@heroicons/react/24/solid'\r\nimport LanguageSelector, { type Language } from '@/components/LanguageSelector'\r\nimport * as Services from '@/client/services.gen'\r\nimport { useAuthStore } from '@/store/useAuthStore'\r\n\r\nconst LANGUAGE_LIBRARY: Language[] = [\r\n  { code: 'en', name: 'English', flag: 'us' },\r\n  { code: 'de', name: 'German', flag: 'de' },\r\n  { code: 'es', name: 'Spanish', flag: 'es' },\r\n  { code: 'fr', name: 'French', flag: 'fr' },\r\n  { code: 'zh', name: 'Chinese', flag: 'cn' },\r\n]\r\n\r\n// Supported translation pairs (native -> target)\r\nconst SUPPORTED_TRANSLATION_PAIRS: [string, string][] = [\r\n  ['es', 'de'], // Spanish native learning German\r\n  ['es', 'en'], // Spanish native learning English\r\n  ['en', 'zh'], // English native learning Chinese\r\n  ['de', 'es'], // German native learning Spanish\r\n  ['de', 'fr'], // German native learning French\r\n]\r\n\r\nconst isTranslationPairSupported = (native: string, target: string): boolean => {\r\n  return SUPPORTED_TRANSLATION_PAIRS.some(([n, t]) => n === native && t === target)\r\n}\r\n\r\ninterface ProfileLanguage {\r\n  code: string\r\n  name: string\r\n  flag: string\r\n}\r\n\r\ninterface ProfileResponse {\r\n  username: string\r\n  email: string\r\n  created_at: string\r\n  last_login?: string | null\r\n  is_superuser?: boolean\r\n  native_language: ProfileLanguage\r\n  target_language: ProfileLanguage\r\n}\r\n\r\nconst ProfileScreen: React.FC = () => {\r\n  const navigate = useNavigate()\r\n  const { logout } = useAuthStore()\r\n\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [profile, setProfile] = useState<ProfileResponse | null>(null)\r\n  const [languageOptions, setLanguageOptions] = useState<Language[]>(LANGUAGE_LIBRARY)\r\n  const [nativeLanguage, setNativeLanguage] = useState<Language>(LANGUAGE_LIBRARY[0])\r\n  const [targetLanguage, setTargetLanguage] = useState<Language>(LANGUAGE_LIBRARY[1])\r\n  const [hasChanges, setHasChanges] = useState(false)\r\n\r\n  const initials = useMemo(() => {\r\n    if (!profile?.username) return 'LP'\r\n    const parts = profile.username.split(' ').filter(Boolean)\r\n    if (parts.length === 1) return parts[0].slice(0, 2).toUpperCase()\r\n    return `${parts[0][0]}${parts[1][0]}`.toUpperCase()\r\n  }, [profile?.username])\r\n\r\n  useEffect(() => {\r\n    loadProfile()\r\n  }, [])\r\n\r\n  const ensureLanguageInOptions = (lang: ProfileLanguage) => {\r\n    setLanguageOptions(prev => {\r\n      if (prev.some(item => item.code === lang.code)) {\r\n        return prev\r\n      }\r\n      return [...prev, { code: lang.code, name: lang.name, flag: lang.flag }]\r\n    })\r\n  }\r\n\r\n  const findLanguage = (lang: ProfileLanguage): Language => {\r\n    const pool = [...languageOptions, ...LANGUAGE_LIBRARY]\r\n    const match = pool.find(item => item.code === lang.code)\r\n    return match ?? { code: lang.code, name: lang.name, flag: lang.flag }\r\n  }\r\n\r\n  const loadProfile = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const profileData = await Services.profileGetApiProfileGet() as unknown as ProfileResponse\r\n\r\n      if (!profileData) {\r\n        toast.error('Could not load profile details.')\r\n        return\r\n      }\r\n\r\n      ensureLanguageInOptions(profileData.native_language)\r\n      ensureLanguageInOptions(profileData.target_language)\r\n\r\n      setProfile(profileData)\r\n      setNativeLanguage(findLanguage(profileData.native_language))\r\n      setTargetLanguage(findLanguage(profileData.target_language))\r\n      setHasChanges(false)\r\n    } catch (error) {\r\n      toast.error('Something went wrong while loading your profile.')\r\n      console.error('Profile load error', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleNativeLanguageSelect = (language: Language) => {\r\n    if (language.code === targetLanguage.code) {\r\n      toast.error('Native and learning language must be different.')\r\n      return\r\n    }\r\n\r\n    // Check if this pair is supported\r\n    if (!isTranslationPairSupported(language.code, targetLanguage.code)) {\r\n      toast.error(`Translation from ${language.name} to ${targetLanguage.name} is not supported yet.`)\r\n      return\r\n    }\r\n\r\n    setNativeLanguage(language)\r\n    setHasChanges(true)\r\n  }\r\n\r\n  const handleTargetLanguageSelect = (language: Language) => {\r\n    if (language.code === nativeLanguage.code) {\r\n      toast.error('Native and learning language must be different.')\r\n      return\r\n    }\r\n\r\n    // Check if this pair is supported\r\n    if (!isTranslationPairSupported(nativeLanguage.code, language.code)) {\r\n      toast.error(`Translation from ${nativeLanguage.name} to ${language.name} is not supported yet.`)\r\n      return\r\n    }\r\n\r\n    setTargetLanguage(language)\r\n    setHasChanges(true)\r\n  }\r\n\r\n  const savePreferences = async () => {\r\n    try {\r\n      setSaving(true)\r\n      await Services.profileUpdateLanguagesApiProfileLanguagesPut({\r\n        requestBody: {\r\n          native_language: nativeLanguage.code,\r\n          target_language: targetLanguage.code,\r\n        },\r\n      })\r\n      toast.success('Your language preferences are saved.')\r\n      setHasChanges(false)\r\n      await loadProfile()\r\n    } catch (error) {\r\n      toast.error('Could not save your preferences.')\r\n      console.error('Profile save error', error)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logout()\r\n      toast.success('See you soon!')\r\n      navigate('/login')\r\n    } catch (error) {\r\n      toast.error('Failed to log you out. Please try again.')\r\n      console.error('Logout error', error)\r\n    }\r\n  }\r\n\r\n  const handleBackHome = () => {\r\n    navigate('/')\r\n  }\r\n\r\n  const canSave = hasChanges && !saving\r\n\r\n  if (loading) {\r\n    return (\r\n      <PageWrapper>\r\n        <CenteredState>\r\n          <LoadingSpinner />\r\n          <LoadingText>Preparing your profile...</LoadingText>\r\n        </CenteredState>\r\n      </PageWrapper>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <PageWrapper>\r\n      <Content>\r\n        <HeaderRow>\r\n          <BackButton onClick={handleBackHome}>\r\n            <ArrowLeftIcon aria-hidden=\"true\" />\r\n            Back to dashboard\r\n          </BackButton>\r\n          <LogoutGhostButton onClick={handleLogout}>Log out</LogoutGhostButton>\r\n        </HeaderRow>\r\n\r\n        <HeroCard>\r\n          <Avatar>{initials}</Avatar>\r\n          <HeroContent>\r\n          <HeroTitle>Hello {profile?.username ?? 'Explorer'}</HeroTitle>\r\n            <HeroSubtitle>\r\n              Personalize your language journey by choosing the languages you speak and the ones you want to master.\r\n            </HeroSubtitle>\r\n            <HeroStats>\r\n              <Stat>\r\n                <StatLabel>Member since</StatLabel>\r\n                <StatValue>{profile ? new Date(profile.created_at).toLocaleDateString() : 'ÔÇö'}</StatValue>\r\n              </Stat>\r\n              {profile?.last_login && (\r\n                <Stat>\r\n                  <StatLabel>Last active</StatLabel>\r\n                  <StatValue>{new Date(profile.last_login).toLocaleString()}</StatValue>\r\n                </Stat>\r\n              )}\r\n              {profile?.is_superuser && (\r\n                <Stat>\r\n                  <StatLabel>Status</StatLabel>\r\n                  <AdminBadge>Admin</AdminBadge>\r\n                </Stat>\r\n              )}\r\n            </HeroStats>\r\n          </HeroContent>\r\n        </HeroCard>\r\n\r\n        <PreferencesCard>\r\n          <SectionHeading>Language preferences</SectionHeading>\r\n          <SectionDescription>\r\n            Tell us about your language goals so we can tailor vocabulary, subtitles, and exercises just for you.\r\n          </SectionDescription>\r\n\r\n          <SelectorGrid>\r\n            <GlassPanel>\r\n              <PanelLabel>Your native language</PanelLabel>\r\n              <LanguageSelector\r\n                label=\"Native language\"\r\n                selectedLanguage={nativeLanguage}\r\n                languages={languageOptions}\r\n                onSelect={handleNativeLanguageSelect}\r\n                disabled={saving}\r\n              />\r\n            </GlassPanel>\r\n\r\n            <GlassPanel>\r\n              <PanelLabel>Language you want to learn</PanelLabel>\r\n              <LanguageSelector\r\n                label=\"Learning language\"\r\n                selectedLanguage={targetLanguage}\r\n                languages={languageOptions}\r\n                onSelect={handleTargetLanguageSelect}\r\n                disabled={saving}\r\n              />\r\n            </GlassPanel>\r\n          </SelectorGrid>\r\n\r\n          <ActionRow>\r\n            <StatusPill $success={!hasChanges}>\r\n              {hasChanges ? 'Unsaved changes' : 'All changes saved'}\r\n            </StatusPill>\r\n            <PrimaryButton onClick={savePreferences} disabled={!canSave}>\r\n              {saving ? 'Saving...' : 'Save preferences'}\r\n            </PrimaryButton>\r\n          </ActionRow>\r\n        </PreferencesCard>\r\n      </Content>\r\n    </PageWrapper>\r\n  )\r\n}\r\n\r\nconst PageWrapper = styled.div`\r\n  min-height: 100vh;\r\n  background: radial-gradient(circle at 10% 20%, #111827 0%, #020617 55%);\r\n  padding: 0 24px 120px;\r\n  color: white;\r\n`\r\n\r\nconst Content = styled.div`\r\n  max-width: 1080px;\r\n  margin: 0 auto;\r\n  padding-top: 92px;\r\n`\r\n\r\nconst HeaderRow = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 32px;\r\n`\r\n\r\nconst GlassButton = styled.button`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px 20px;\r\n  border-radius: 999px;\r\n  border: 1px solid rgba(148, 163, 184, 0.25);\r\n  background: rgba(15, 23, 42, 0.55);\r\n  color: white;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease, border 0.2s ease;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 16px 32px rgba(15, 23, 42, 0.35);\r\n    border-color: rgba(59, 130, 246, 0.35);\r\n  }\r\n\r\n  &:focus-visible {\r\n    outline: 3px solid rgba(59, 130, 246, 0.5);\r\n    outline-offset: 2px;\r\n  }\r\n\r\n  svg {\r\n    width: 18px;\r\n    height: 18px;\r\n  }\r\n`\r\n\r\nconst BackButton = styled(GlassButton)`\r\n  font-size: 15px;\r\n`\r\n\r\nconst LogoutGhostButton = styled(GlassButton)`\r\n  background: rgba(248, 113, 113, 0.18);\r\n  border-color: rgba(248, 113, 113, 0.35);\r\n  color: #fecaca;\r\n\r\n  &:hover {\r\n    border-color: rgba(248, 113, 113, 0.55);\r\n    box-shadow: 0 16px 32px rgba(248, 113, 113, 0.28);\r\n  }\r\n`\r\n\r\nconst HeroCard = styled.section`\r\n  display: grid;\r\n  gap: 24px;\r\n  grid-template-columns: auto 1fr;\r\n  align-items: center;\r\n  padding: 36px 40px;\r\n  border-radius: 28px;\r\n  border: 1px solid rgba(148, 163, 184, 0.25);\r\n  background: linear-gradient(135deg, rgba(30, 64, 175, 0.3), rgba(15, 118, 110, 0.2));\r\n  box-shadow: 0 28px 60px rgba(30, 64, 175, 0.25);\r\n  margin-bottom: 40px;\r\n\r\n  @media (max-width: 768px) {\r\n    grid-template-columns: 1fr;\r\n    text-align: center;\r\n    padding: 28px;\r\n  }\r\n`\r\n\r\nconst Avatar = styled.div`\r\n  width: 96px;\r\n  height: 96px;\r\n  border-radius: 24px;\r\n  background: rgba(15, 23, 42, 0.65);\r\n  border: 1px solid rgba(148, 163, 184, 0.25);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 32px;\r\n  font-weight: 700;\r\n  letter-spacing: 0.08em;\r\n  text-transform: uppercase;\r\n`\r\n\r\nconst HeroContent = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18px;\r\n`\r\n\r\nconst HeroTitle = styled.h1`\r\n  font-size: 36px;\r\n  font-weight: 700;\r\n  line-height: 1.2;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 28px;\r\n  }\r\n`\r\n\r\nconst HeroSubtitle = styled.p`\r\n  color: rgba(226, 232, 240, 0.78);\r\n  font-size: 17px;\r\n  line-height: 1.6;\r\n  max-width: 560px;\r\n`\r\n\r\nconst HeroStats = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 24px;\r\n`\r\n\r\nconst Stat = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n`\r\n\r\nconst StatLabel = styled.span`\r\n  font-size: 13px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.08em;\r\n  color: rgba(226, 232, 240, 0.55);\r\n`\r\n\r\nconst StatValue = styled.span`\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: rgba(226, 232, 240, 0.92);\r\n`\r\n\r\nconst AdminBadge = styled.span`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 6px 12px;\r\n  border-radius: 999px;\r\n  background: rgba(247, 181, 0, 0.2);\r\n  color: #fde68a;\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.08em;\r\n`\r\n\r\nconst PreferencesCard = styled.section`\r\n  border-radius: 28px;\r\n  border: 1px solid rgba(148, 163, 184, 0.25);\r\n  background: rgba(15, 23, 42, 0.65);\r\n  backdrop-filter: blur(24px);\r\n  padding: 40px;\r\n  box-shadow: 0 32px 60px rgba(15, 23, 42, 0.35);\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 28px 24px;\r\n  }\r\n`\r\n\r\nconst SectionHeading = styled.h2`\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n`\r\n\r\nconst SectionDescription = styled.p`\r\n  margin-top: 12px;\r\n  max-width: 620px;\r\n  color: rgba(226, 232, 240, 0.7);\r\n  line-height: 1.6;\r\n`\r\n\r\nconst SelectorGrid = styled.div`\r\n  display: grid;\r\n  gap: 24px;\r\n  margin-top: 32px;\r\n\r\n  @media (min-width: 900px) {\r\n    grid-template-columns: repeat(2, minmax(0, 1fr));\r\n  }\r\n`\r\n\r\nconst GlassPanel = styled.div`\r\n  border-radius: 20px;\r\n  padding: 20px 24px;\r\n  background: rgba(148, 163, 184, 0.12);\r\n  border: 1px solid rgba(148, 163, 184, 0.25);\r\n  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);\r\n`\r\n\r\nconst PanelLabel = styled.h3`\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.08em;\r\n  color: rgba(226, 232, 240, 0.7);\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst ActionRow = styled.div`\r\n  margin-top: 36px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n`\r\n\r\nconst StatusPill = styled.span<{ $success: boolean }>`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 10px 18px;\r\n  border-radius: 999px;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  letter-spacing: 0.04em;\r\n  color: ${props => props.$success ? '#34d399' : '#facc15'};\r\n  background: ${props => props.$success ? 'rgba(16, 185, 129, 0.18)' : 'rgba(234, 179, 8, 0.18)'};\r\n  border: 1px solid ${props => props.$success ? 'rgba(16, 185, 129, 0.35)' : 'rgba(234, 179, 8, 0.35)'};\r\n`\r\n\r\nconst PrimaryButton = styled.button`\r\n  padding: 14px 28px;\r\n  border-radius: 999px;\r\n  border: none;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.04em;\r\n  color: white;\r\n  background: linear-gradient(135deg, #2563eb, #7c3aed);\r\n  box-shadow: 0 18px 40px rgba(37, 99, 235, 0.35);\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n\r\n  &:hover:not(:disabled) {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 22px 50px rgba(37, 99, 235, 0.4);\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.4;\r\n    cursor: not-allowed;\r\n    box-shadow: none;\r\n  }\r\n`\r\n\r\nconst CenteredState = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 16px;\r\n  color: rgba(226, 232, 240, 0.75);\r\n`\r\n\r\nconst LoadingSpinner = styled.div`\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 999px;\r\n  border: 4px solid rgba(148, 163, 184, 0.25);\r\n  border-top-color: #60a5fa;\r\n  animation: spin 1s linear infinite;\r\n\r\n  @keyframes spin {\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n`\r\n\r\nconst LoadingText = styled.span`\r\n  font-size: 16px;\r\n`\r\n\r\nexport default ProfileScreen\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\services\\api-client.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AxiosResponse' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[265,268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[265,268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[422,425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[422,425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[526,529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[526,529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":87,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2327,2330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2327,2330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3103,3106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3103,3106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4404,4407],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4404,4407],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":172,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4656,4659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4656,4659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Enhanced API client with better error handling and caching\r\n */\r\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport { toast } from 'react-hot-toast'\r\nimport { logger } from './logger'\r\n\r\nexport interface ApiResponse<T = any> {\r\n  data: T\r\n  status: number\r\n  message?: string\r\n}\r\n\r\nexport interface ApiError {\r\n  status: number\r\n  message: string\r\n  code?: string\r\n  details?: any\r\n}\r\n\r\nclass ApiClient {\r\n  private client: AxiosInstance\r\n  private cache = new Map<string, { data: any; timestamp: number; ttl: number }>()\r\n\r\n  constructor() {\r\n    this.client = axios.create({\r\n      baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000',\r\n      timeout: 30000,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n\r\n    this.setupInterceptors()\r\n  }\r\n\r\n  private setupInterceptors() {\r\n    // Request interceptor for auth token\r\n    this.client.interceptors.request.use(\r\n      (config) => {\r\n        const token = localStorage.getItem('authToken')\r\n        if (token) {\r\n          config.headers.Authorization = `Bearer ${token}`\r\n        }\r\n\r\n        // Add request ID for tracing\r\n        config.headers['X-Request-ID'] = `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\r\n\r\n        logger.debug('ApiClient', 'Sending request', {\r\n          method: config.method?.toUpperCase(),\r\n          url: config.url,\r\n          headers: config.headers,\r\n        })\r\n\r\n        return config\r\n      },\r\n      (error) => {\r\n        logger.error('API Request Error', error)\r\n        return Promise.reject(error)\r\n      }\r\n    )\r\n\r\n    // Response interceptor for error handling\r\n    this.client.interceptors.response.use(\r\n      (response) => {\r\n        logger.debug('ApiClient', 'Received response', {\r\n          status: response.status,\r\n          url: response.config.url,\r\n          data: response.data,\r\n        })\r\n        return response\r\n      },\r\n      (error) => {\r\n        const apiError = this.handleApiError(error)\r\n        logger.error('ApiClient', 'API error occurred', apiError)\r\n\r\n        // Show toast for user-facing errors\r\n        if (apiError.status !== 401) {\r\n          toast.error(apiError.message)\r\n        }\r\n\r\n        return Promise.reject(apiError)\r\n      }\r\n    )\r\n  }\r\n\r\n  private handleApiError(error: any): ApiError {\r\n    if (error.response) {\r\n      // Server responded with error status\r\n      const { status, data } = error.response\r\n      const message = data?.detail || data?.message || error.message || 'Server error'\r\n\r\n      return {\r\n        status,\r\n        message,\r\n        code: data?.code,\r\n        details: data,\r\n      }\r\n    } else if (error.request) {\r\n      // Network error\r\n      return {\r\n        status: 0,\r\n        message: 'Network error - please check your connection',\r\n        code: 'NETWORK_ERROR',\r\n      }\r\n    } else {\r\n      // Other error\r\n      return {\r\n        status: 0,\r\n        message: error.message || 'An unexpected error occurred',\r\n        code: 'UNKNOWN_ERROR',\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCacheKey(url: string, params?: any): string {\r\n    return `${url}${params ? `?${JSON.stringify(params)}` : ''}`\r\n  }\r\n\r\n  private getFromCache<T>(key: string): T | null {\r\n    const cached = this.cache.get(key)\r\n    if (cached && Date.now() - cached.timestamp < cached.ttl) {\r\n      return cached.data\r\n    }\r\n    this.cache.delete(key)\r\n    return null\r\n  }\r\n\r\n  private setCache<T>(key: string, data: T, ttl: number = 5 * 60 * 1000): void {\r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now(),\r\n      ttl,\r\n    })\r\n  }\r\n\r\n  async get<T>(\r\n    url: string,\r\n    config?: AxiosRequestConfig & { cache?: boolean; cacheTtl?: number }\r\n  ): Promise<ApiResponse<T>> {\r\n    const { cache = false, cacheTtl = 5 * 60 * 1000, ...axiosConfig } = config || {}\r\n\r\n    if (cache) {\r\n      const cacheKey = this.getCacheKey(url, axiosConfig.params)\r\n      const cached = this.getFromCache<T>(cacheKey)\r\n      if (cached) {\r\n        return { data: cached, status: 200 }\r\n      }\r\n    }\r\n\r\n    const response = await this.client.get<T>(url, axiosConfig)\r\n\r\n    if (cache) {\r\n      const cacheKey = this.getCacheKey(url, axiosConfig.params)\r\n      this.setCache(cacheKey, response.data, cacheTtl)\r\n    }\r\n\r\n    return {\r\n      data: response.data,\r\n      status: response.status,\r\n    }\r\n  }\r\n\r\n  async post<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    const response = await this.client.post<T>(url, data, config)\r\n    return {\r\n      data: response.data,\r\n      status: response.status,\r\n    }\r\n  }\r\n\r\n  async put<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    const response = await this.client.put<T>(url, data, config)\r\n    return {\r\n      data: response.data,\r\n      status: response.status,\r\n    }\r\n  }\r\n\r\n  async delete<T>(url: string, config?: AxiosRequestConfig): Promise<ApiResponse<T>> {\r\n    const response = await this.client.delete<T>(url, config)\r\n    return {\r\n      data: response.data,\r\n      status: response.status,\r\n    }\r\n  }\r\n\r\n  clearCache(): void {\r\n    this.cache.clear()\r\n  }\r\n\r\n  clearCachePattern(pattern: string): void {\r\n    for (const key of this.cache.keys()) {\r\n      if (key.includes(pattern)) {\r\n        this.cache.delete(key)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Global API client instance\r\nexport const apiClient = new ApiClient()\r\n\r\n// Convenience methods for common patterns\r\nexport const api = {\r\n  // Authentication\r\n  auth: {\r\n    login: (credentials: { username: string; password: string }) =>\r\n      apiClient.post('/auth/login', credentials),\r\n    register: (userData: { username: string; email: string; password: string }) =>\r\n      apiClient.post('/auth/register', userData),\r\n    getCurrentUser: () => apiClient.get('/auth/me', { cache: true, cacheTtl: 60000 }),\r\n    logout: () => {\r\n      localStorage.removeItem('authToken')\r\n      apiClient.clearCache()\r\n    },\r\n  },\r\n\r\n  // Vocabulary\r\n  vocabulary: {\r\n    search: (query: string, language = 'de', limit = 20) =>\r\n      apiClient.get('/vocabulary/search', {\r\n        params: { query, language, limit },\r\n        cache: true,\r\n        cacheTtl: 10 * 60 * 1000, // 10 minutes\r\n      }),\r\n    getByLevel: (level: string, language = 'de', skip = 0, limit = 100) =>\r\n      apiClient.get(`/vocabulary/level/${level}`, {\r\n        params: { language, skip, limit },\r\n        cache: true,\r\n        cacheTtl: 30 * 60 * 1000, // 30 minutes\r\n      }),\r\n    getRandom: (language = 'de', levels?: string[], limit = 10) =>\r\n      apiClient.get('/vocabulary/random', {\r\n        params: { language, levels, limit },\r\n        cache: true,\r\n        cacheTtl: 5 * 60 * 1000, // 5 minutes\r\n      }),\r\n    markWord: (vocabularyId: number, isKnown: boolean) =>\r\n      apiClient.post('/vocabulary/mark', { vocabulary_id: vocabularyId, is_known: isKnown }),\r\n    bulkMarkWords: (vocabularyIds: number[], isKnown: boolean) =>\r\n      apiClient.post('/vocabulary/mark-bulk', { vocabulary_ids: vocabularyIds, is_known: isKnown }),\r\n    getProgress: (language = 'de') =>\r\n      apiClient.get('/vocabulary/progress', {\r\n        params: { language },\r\n        cache: true,\r\n        cacheTtl: 30 * 1000, // 30 seconds\r\n      }),\r\n    getStats: (language = 'de') =>\r\n      apiClient.get('/vocabulary/stats', {\r\n        params: { language },\r\n        cache: true,\r\n        cacheTtl: 60 * 1000, // 1 minute\r\n      }),\r\n  },\r\n\r\n  // Videos and processing\r\n  videos: {\r\n    getList: () => apiClient.get('/api/videos', { cache: true }),\r\n    getEpisodes: (series: string) =>\r\n      apiClient.get(`/api/videos/${series}`, { cache: true }),\r\n    getStreamUrl: (series: string, episode: string) => {\r\n      const base = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'\r\n      const token = localStorage.getItem('authToken')\r\n      const url = `${base}/api/videos/${encodeURIComponent(series)}/${encodeURIComponent(episode)}`\r\n      return token ? `${url}?token=${encodeURIComponent(token)}` : url\r\n    },\r\n  },\r\n\r\n  // Processing\r\n  processing: {\r\n    startTranscription: (series: string, episode: string) =>\r\n      apiClient.post('/process/transcribe', { series, episode }),\r\n    getProgress: (taskId: string) =>\r\n      apiClient.get(`/process/progress/${taskId}`),\r\n    prepareEpisode: (series: string, episode: string) =>\r\n      apiClient.post('/process/prepare-episode', { series, episode }),\r\n  },\r\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\services\\auth-interceptor.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ApiError' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":81,"column":47,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":81,"endColumn":66},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":118,"column":45,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":118,"endColumn":64}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport { OpenAPI } from '@/client/core/OpenAPI'\r\nimport { ApiError } from '@/client/core/ApiError'\r\nimport { logger } from './logger'\r\n\r\n// Token refresh endpoint\r\nconst refreshAccessToken = async (): Promise<string | null> => {\r\n  const refreshToken = localStorage.getItem('refresh_token')\r\n\r\n  if (!refreshToken) {\r\n    logger.warn('auth-interceptor', 'No refresh token available')\r\n    return null\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(`${OpenAPI.BASE}/api/auth/refresh`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ refresh_token: refreshToken }),\r\n    })\r\n\r\n    if (response.ok) {\r\n      const data = await response.json()\r\n      const newAccessToken = data.access_token\r\n\r\n      // Store the new access token\r\n      localStorage.setItem('access_token', newAccessToken)\r\n      localStorage.setItem('authToken', newAccessToken) // Legacy key\r\n\r\n      logger.info('auth-interceptor', 'Token refreshed successfully')\r\n      return newAccessToken\r\n    } else {\r\n      logger.error('auth-interceptor', `Token refresh failed: ${response.status}`)\r\n      return null\r\n    }\r\n  } catch (error) {\r\n    logger.error('auth-interceptor', 'Error refreshing token', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Track if we're currently refreshing to prevent multiple refresh attempts\r\nlet isRefreshing = false\r\nlet refreshPromise: Promise<string | null> | null = null\r\n\r\n// Request interceptor to add auth token\r\nexport const authRequestInterceptor = async (config: AxiosRequestConfig): Promise<AxiosRequestConfig> => {\r\n  // Get the current access token\r\n  const accessToken = localStorage.getItem('access_token') || localStorage.getItem('authToken')\r\n\r\n  if (accessToken) {\r\n    config.headers = config.headers || {}\r\n    config.headers['Authorization'] = `Bearer ${accessToken}`\r\n  }\r\n\r\n  return config\r\n}\r\n\r\n// Response interceptor to handle 401 errors and refresh token\r\nexport const authResponseInterceptor = async (response: AxiosResponse): Promise<AxiosResponse> => {\r\n  // If response is successful, just return it\r\n  if (response.status !== 401) {\r\n    return response\r\n  }\r\n\r\n  // If we're already refreshing, wait for that to complete\r\n  if (isRefreshing) {\r\n    if (refreshPromise) {\r\n      const newToken = await refreshPromise\r\n      if (newToken) {\r\n        // Retry the original request with the new token\r\n        const originalConfig = response.config\r\n        if (originalConfig) {\r\n          originalConfig.headers = originalConfig.headers || {}\r\n          originalConfig.headers['Authorization'] = `Bearer ${newToken}`\r\n\r\n          // Retry the request\r\n          try {\r\n            const retryResponse = await fetch(originalConfig.url!, {\r\n              method: originalConfig.method || 'GET',\r\n              headers: originalConfig.headers as Record<string, string>,\r\n              body: originalConfig.data ? JSON.stringify(originalConfig.data) : undefined,\r\n            })\r\n\r\n            return {\r\n              ...response,\r\n              status: retryResponse.status,\r\n              statusText: retryResponse.statusText,\r\n              data: await retryResponse.json(),\r\n            } as AxiosResponse\r\n          } catch (error) {\r\n            logger.error('auth-interceptor', 'Retry after refresh failed', error)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return response\r\n  }\r\n\r\n  // Start token refresh\r\n  isRefreshing = true\r\n  refreshPromise = refreshAccessToken()\r\n\r\n  try {\r\n    const newToken = await refreshPromise\r\n\r\n    if (newToken) {\r\n      // Retry the original request with the new token\r\n      const originalConfig = response.config\r\n      if (originalConfig) {\r\n        originalConfig.headers = originalConfig.headers || {}\r\n        originalConfig.headers['Authorization'] = `Bearer ${newToken}`\r\n\r\n        // Retry the request\r\n        try {\r\n          const retryResponse = await fetch(originalConfig.url!, {\r\n            method: originalConfig.method || 'GET',\r\n            headers: originalConfig.headers as Record<string, string>,\r\n            body: originalConfig.data ? JSON.stringify(originalConfig.data) : undefined,\r\n          })\r\n\r\n          return {\r\n            ...response,\r\n            status: retryResponse.status,\r\n            statusText: retryResponse.statusText,\r\n            data: await retryResponse.json(),\r\n          } as AxiosResponse\r\n        } catch (error) {\r\n          logger.error('auth-interceptor', 'Retry after refresh failed', error)\r\n        }\r\n      }\r\n    } else {\r\n      // Token refresh failed - clear tokens and redirect to login\r\n      logger.warn('auth-interceptor', 'Token refresh failed, clearing auth')\r\n      localStorage.removeItem('access_token')\r\n      localStorage.removeItem('refresh_token')\r\n      localStorage.removeItem('authToken')\r\n      localStorage.removeItem('user_id')\r\n\r\n      // Redirect to login (if not already there)\r\n      if (window.location.pathname !== '/login') {\r\n        window.location.href = '/login'\r\n      }\r\n    }\r\n  } finally {\r\n    isRefreshing = false\r\n    refreshPromise = null\r\n  }\r\n\r\n  return response\r\n}\r\n\r\n// Setup function to register interceptors\r\nexport const setupAuthInterceptors = () => {\r\n  // Register request interceptor\r\n  OpenAPI.interceptors.request.use(authRequestInterceptor)\r\n\r\n  // Register response interceptor\r\n  OpenAPI.interceptors.response.use(authResponseInterceptor)\r\n\r\n  // Also update the TOKEN function to use the new tokens\r\n  OpenAPI.TOKEN = async () => {\r\n    const token = localStorage.getItem('access_token') || localStorage.getItem('authToken')\r\n    return token ?? ''\r\n  }\r\n\r\n  logger.info('auth-interceptor', 'Auth interceptors registered')\r\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\services\\logger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[327,330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[327,330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2335,2338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2335,2338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-useless-catch","severity":2,"message":"Unnecessary try/catch wrapper.","line":194,"column":5,"nodeType":"TryStatement","messageId":"unnecessaryCatch","endLine":213,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":217,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":217,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5760,5763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5760,5763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":222,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":222,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"debug"},"fix":{"range":[5937,5990],"text":""},"desc":"Remove the console.debug()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6084,6087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6084,6087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":232,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":232,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"info"},"fix":{"range":[6259,6311],"text":""},"desc":"Remove the console.info()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":237,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6405,6408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6405,6408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":245,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6686,6689],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6686,6689],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":254,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":254,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7039,7042],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7039,7042],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7195,7198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7195,7198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":269,"column":53,"nodeType":"MemberExpression","messageId":"unexpected","endLine":269,"endColumn":66},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7789,7792],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7789,7792],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":281,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":281,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7940,7943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7940,7943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":312,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8673,8676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8673,8676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Frontend logging service for debugging and monitoring\r\n * Logs to console and can send logs to backend for file storage\r\n */\r\n\r\nexport enum LogLevel {\r\n  DEBUG = 0,\r\n  INFO = 1,\r\n  WARN = 2,\r\n  ERROR = 3,\r\n}\r\n\r\ninterface LogEntry {\r\n  timestamp: string\r\n  level: string\r\n  category: string\r\n  message: string\r\n  data?: any\r\n  error?: string\r\n  stack?: string\r\n  url?: string\r\n  userAgent?: string\r\n  userId?: string\r\n}\r\n\r\nclass Logger {\r\n  private logLevel: LogLevel = LogLevel.DEBUG\r\n  private logs: LogEntry[] = []\r\n  private maxLogs = 1000\r\n  private apiEnabled = true\r\n  private batchQueue: LogEntry[] = []\r\n  private readonly batchSize = 20 // Increased for efficiency\r\n  private readonly batchTimeout = 10000 // 10 seconds - less frequent sends\r\n  private batchTimer: ReturnType<typeof setTimeout> | null = null\r\n  private isSending = false\r\n\r\n  constructor() {\r\n    // Set log level based on environment\r\n    const envLogLevel = import.meta.env.VITE_LOG_LEVEL || 'DEBUG'\r\n    this.logLevel = LogLevel[envLogLevel as keyof typeof LogLevel] || LogLevel.DEBUG\r\n\r\n    // API logging can be disabled via environment variable if needed\r\n    this.apiEnabled = import.meta.env.VITE_ENABLE_API_LOGGING !== 'false'\r\n\r\n    // Set up global error handler\r\n    this.setupGlobalErrorHandler()\r\n\r\n    // Set up unhandled promise rejection handler\r\n    this.setupUnhandledRejectionHandler()\r\n\r\n    // Log frontend startup\r\n    this.info('Frontend Logger', 'Logger initialized', {\r\n      logLevel: LogLevel[this.logLevel],\r\n      apiEnabled: this.apiEnabled,\r\n      maxLogs: this.maxLogs\r\n    })\r\n  }\r\n\r\n  private setupGlobalErrorHandler() {\r\n    window.addEventListener('error', (event) => {\r\n      this.error('Global Error', 'Uncaught error', {\r\n        message: event.message,\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno,\r\n        error: event.error?.toString(),\r\n        stack: event.error?.stack\r\n      })\r\n    })\r\n  }\r\n\r\n  private setupUnhandledRejectionHandler() {\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      this.error('Unhandled Promise', 'Promise rejection', {\r\n        reason: event.reason?.toString(),\r\n        stack: event.reason?.stack\r\n      })\r\n    })\r\n  }\r\n\r\n  private createLogEntry(level: LogLevel, category: string, message: string, data?: any, error?: Error): LogEntry {\r\n    const entry: LogEntry = {\r\n      timestamp: new Date().toISOString(),\r\n      level: LogLevel[level],\r\n      category,\r\n      message,\r\n      url: window.location.href,\r\n      userAgent: navigator.userAgent\r\n    }\r\n\r\n    if (data !== undefined) {\r\n      entry.data = data\r\n    }\r\n\r\n    if (error) {\r\n      entry.error = error.toString()\r\n      entry.stack = error.stack\r\n    }\r\n\r\n    // Add user ID if available\r\n    const authStore = localStorage.getItem('auth-store')\r\n    if (authStore) {\r\n      try {\r\n        const parsed = JSON.parse(authStore)\r\n        if (parsed.state?.user?.id) {\r\n          entry.userId = parsed.state.user.id.toString()\r\n        }\r\n      } catch (e) {\r\n        // Ignore parsing errors\r\n      }\r\n    }\r\n\r\n    return entry\r\n  }\r\n\r\n  private shouldLog(level: LogLevel): boolean {\r\n    return level >= this.logLevel\r\n  }\r\n\r\n  private addLogEntry(entry: LogEntry) {\r\n    // Add to memory buffer\r\n    this.logs.push(entry)\r\n\r\n    // Keep only recent logs\r\n    if (this.logs.length > this.maxLogs) {\r\n      this.logs = this.logs.slice(-this.maxLogs)\r\n    }\r\n\r\n    // Send to backend if enabled (using batching)\r\n    if (this.apiEnabled) {\r\n      this.addToBatch(entry)\r\n    }\r\n  }\r\n\r\n  private addToBatch(entry: LogEntry) {\r\n    // Only send INFO and above to backend to avoid spam\r\n    if (LogLevel[entry.level as keyof typeof LogLevel] < LogLevel.INFO) {\r\n      return\r\n    }\r\n\r\n    this.batchQueue.push(entry)\r\n\r\n    // If batch is full, send immediately\r\n    if (this.batchQueue.length >= this.batchSize) {\r\n      this.flushBatch()\r\n    } else {\r\n      // Otherwise, schedule batch send\r\n      this.scheduleBatchSend()\r\n    }\r\n  }\r\n\r\n  private scheduleBatchSend() {\r\n    // Clear existing timer\r\n    if (this.batchTimer) {\r\n      clearTimeout(this.batchTimer)\r\n    }\r\n\r\n    // Schedule new batch send\r\n    this.batchTimer = setTimeout(() => {\r\n      this.flushBatch()\r\n    }, this.batchTimeout)\r\n  }\r\n\r\n  private async flushBatch() {\r\n    // Clear timer\r\n    if (this.batchTimer) {\r\n      clearTimeout(this.batchTimer)\r\n      this.batchTimer = null\r\n    }\r\n\r\n    // Skip if already sending or queue is empty\r\n    if (this.isSending || this.batchQueue.length === 0) {\r\n      return\r\n    }\r\n\r\n    // Take current batch and clear queue\r\n    const batch = [...this.batchQueue]\r\n    this.batchQueue = []\r\n    this.isSending = true\r\n\r\n    try {\r\n      await this.sendBatchToBackend(batch)\r\n    } catch (error) {\r\n      // Silently fail backend logging\r\n      if (import.meta.env.DEV) {\r\n        console.warn('Failed to send log batch:', error)\r\n      }\r\n    } finally {\r\n      this.isSending = false\r\n    }\r\n  }\r\n\r\n  private async sendBatchToBackend(batch: LogEntry[]) {\r\n    try {\r\n      const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || import.meta.env.VITE_API_URL || 'http://localhost:8000'\r\n\r\n      const controller = new AbortController()\r\n      const timeoutId = setTimeout(() => controller.abort(), 5000)\r\n\r\n      await fetch(`${API_BASE_URL}/api/debug/frontend-logs`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ logs: batch }),\r\n        signal: controller.signal\r\n      })\r\n\r\n      clearTimeout(timeoutId)\r\n    } catch (error) {\r\n      // Re-throw to be handled by caller\r\n      throw error\r\n    }\r\n  }\r\n\r\n\r\n  debug(category: string, message: string, data?: any) {\r\n    if (!this.shouldLog(LogLevel.DEBUG)) return\r\n\r\n    const entry = this.createLogEntry(LogLevel.DEBUG, category, message, data)\r\n    if (import.meta.env.DEV) {\r\n      console.debug(`[${category}] ${message}`, data || '')\r\n    }\r\n    this.addLogEntry(entry)\r\n  }\r\n\r\n  info(category: string, message: string, data?: any) {\r\n    if (!this.shouldLog(LogLevel.INFO)) return\r\n\r\n    const entry = this.createLogEntry(LogLevel.INFO, category, message, data)\r\n    if (import.meta.env.DEV) {\r\n      console.info(`[${category}] ${message}`, data || '')\r\n    }\r\n    this.addLogEntry(entry)\r\n  }\r\n\r\n  warn(category: string, message: string, data?: any) {\r\n    if (!this.shouldLog(LogLevel.WARN)) return\r\n\r\n    const entry = this.createLogEntry(LogLevel.WARN, category, message, data)\r\n    console.warn(`[${category}] ${message}`, data || '')\r\n    this.addLogEntry(entry)\r\n  }\r\n\r\n  error(category: string, message: string, data?: any, error?: Error) {\r\n    if (!this.shouldLog(LogLevel.ERROR)) return\r\n\r\n    const entry = this.createLogEntry(LogLevel.ERROR, category, message, data, error)\r\n    console.error(`[${category}] ${message}`, data || '', error || '')\r\n    this.addLogEntry(entry)\r\n  }\r\n\r\n  // API-specific logging methods\r\n  apiRequest(method: string, url: string, data?: any) {\r\n    this.debug('API', `Request: ${method} ${url}`, { method, url, data })\r\n  }\r\n\r\n  apiResponse(method: string, url: string, status: number, data?: any, duration?: number) {\r\n    const level = status >= 400 ? LogLevel.ERROR : LogLevel.DEBUG\r\n    const entry = this.createLogEntry(level, 'API', `Response: ${status} ${method} ${url}`, {\r\n      method,\r\n      url,\r\n      status,\r\n      data,\r\n      duration\r\n    })\r\n\r\n    if (import.meta.env.DEV) {\r\n      const logFn = status >= 400 ? console.error : console.debug\r\n      logFn(`[API] ${status} ${method} ${url}${duration ? ` (${duration}ms)` : ''}`, { data })\r\n    }\r\n    this.addLogEntry(entry)\r\n  }\r\n\r\n  // User interaction logging\r\n  userAction(action: string, component: string, data?: any) {\r\n    this.info('User Action', `${action} in ${component}`, data)\r\n  }\r\n\r\n  // Navigation logging\r\n  navigation(from: string, to: string, data?: any) {\r\n    this.info('Navigation', `${from} ÔåÆ ${to}`, data)\r\n  }\r\n\r\n  // Performance logging\r\n  performance(metric: string, value: number, unit = 'ms') {\r\n    this.debug('Performance', `${metric}: ${value}${unit}`, { metric, value, unit })\r\n  }\r\n\r\n  // Get recent logs for debugging\r\n  getRecentLogs(count = 50): LogEntry[] {\r\n    return this.logs.slice(-count)\r\n  }\r\n\r\n  // Clear logs\r\n  clearLogs() {\r\n    this.logs = []\r\n    this.info('Logger', 'Logs cleared')\r\n  }\r\n\r\n  // Export logs as JSON\r\n  exportLogs(): string {\r\n    return JSON.stringify(this.logs, null, 2)\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nexport const logger = new Logger()\r\n\r\n// Add to window for debugging\r\nif (typeof window !== 'undefined') {\r\n  (window as any).logger = logger\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\__tests__\\useAuthStore.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\__tests__\\useGameStore.test.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty arrow function.","line":175,"column":83,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":175,"endColumn":85}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest'\r\nimport { renderHook, act } from '@testing-library/react'\r\nimport { useGameStore } from '../useGameStore'\r\nimport * as sdk from '@/client/services.gen'\r\nimport type { VocabularyWord } from '@/types'\r\n\r\nvi.mock('@/services/api', () => ({}))\r\n\r\nvi.mock('@/client/services.gen', () => ({\r\n  getBlockingWordsApiVocabularyBlockingWordsGet: vi.fn(),\r\n  markWordKnownApiVocabularyMarkKnownPost: vi.fn(),\r\n}))\r\n\r\nconst mockWords: VocabularyWord[] = [\r\n  {\r\n    concept_id: '1',\r\n    word: 'hello',\r\n    translation: 'hola',\r\n    difficulty_level: 'beginner',\r\n    known: false\r\n  },\r\n  {\r\n    concept_id: '2',\r\n    word: 'goodbye',\r\n    translation: 'adi├│s',\r\n    difficulty_level: 'beginner',\r\n    known: false\r\n  }\r\n]\r\n\r\ndescribe('useGameStore', () => {\r\n  const sdkMock = vi.mocked(sdk)\r\n  beforeEach(() => {\r\n    vi.clearAllMocks()\r\n    useGameStore.getState().resetGame()\r\n  })\r\n\r\n  describe('Initial State', () => {\r\n    it('has correct initial state', () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      expect(result.current.gameSession).toBeNull()\r\n      expect(result.current.currentWords).toEqual([])\r\n      expect(result.current.currentWordIndex).toBe(0)\r\n      expect(result.current.showSubtitles).toBe(false)\r\n      expect(result.current.isProcessing).toBe(false)\r\n    })\r\n  })\r\n\r\n  describe('Game Management', () => {\r\n    it('starts new game with video path', () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n      })\r\n\r\n      expect(result.current.gameSession).toEqual({\r\n        video_path: 'test-video.mp4',\r\n        current_segment: 0,\r\n        segments: [],\r\n        user_progress: {},\r\n        completed: false\r\n      })\r\n    })\r\n\r\n    it('loads segment words from API', async () => {\r\n    const { result } = renderHook(() => useGameStore())\r\n\r\n      sdkMock.getBlockingWordsApiVocabularyBlockingWordsGet.mockResolvedValue({\r\n        blocking_words: mockWords,\r\n      })\r\n\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n      })\r\n\r\n      await act(async () => {\r\n        await result.current.loadSegmentWords(0)\r\n      })\r\n\r\n      expect(sdkMock.getBlockingWordsApiVocabularyBlockingWordsGet).toHaveBeenCalledWith({\r\n        videoPath: 'test-video.mp4',\r\n      })\r\n      expect(result.current.currentWords).toEqual(mockWords)\r\n    })\r\n\r\n    it('marks words as known via API', async () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      sdkMock.markWordKnownApiVocabularyMarkKnownPost.mockResolvedValue({ success: true })\r\n\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n        useGameStore.setState({\r\n          currentWords: mockWords,\r\n          gameSession: {\r\n            video_path: 'test-video.mp4',\r\n            current_segment: 0,\r\n            segments: [],\r\n            user_progress: {},\r\n            completed: false,\r\n          },\r\n        })\r\n      })\r\n\r\n      await act(async () => {\r\n        await result.current.markWordKnown('hello', true)\r\n      })\r\n\r\n      expect(sdkMock.markWordKnownApiVocabularyMarkKnownPost).toHaveBeenCalledWith({\r\n        requestBody: {\r\n          concept_id: '1',\r\n          known: true,\r\n        },\r\n      })\r\n    })\r\n\r\n    it('advances to next word', () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      // Set up initial state with words\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n        useGameStore.setState({ currentWords: mockWords })\r\n      })\r\n\r\n      expect(result.current.currentWordIndex).toBe(0)\r\n\r\n      act(() => {\r\n        result.current.nextWord()\r\n      })\r\n\r\n      expect(result.current.currentWordIndex).toBe(1)\r\n    })\r\n\r\n    it('toggles subtitles visibility', () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      expect(result.current.showSubtitles).toBe(false)\r\n\r\n      act(() => {\r\n        result.current.toggleSubtitles()\r\n      })\r\n\r\n      expect(result.current.showSubtitles).toBe(true)\r\n    })\r\n\r\n    it('resets game to initial state', () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      // Set up some state\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n        result.current.toggleSubtitles()\r\n      })\r\n\r\n      // Reset game\r\n      act(() => {\r\n        result.current.resetGame()\r\n      })\r\n\r\n      expect(result.current.gameSession).toBeNull()\r\n      expect(result.current.currentWords).toEqual([])\r\n      expect(result.current.currentWordIndex).toBe(0)\r\n      expect(result.current.showSubtitles).toBe(false)\r\n    })\r\n  })\r\n\r\n  describe('Error Handling', () => {\r\n    it('handles API errors gracefully', async () => {\r\n      const { result } = renderHook(() => useGameStore())\r\n\r\n      // Mock console.error to suppress error output during test\r\n      const consoleErrorSpy = vi.spyOn(console, 'error').mockImplementation(() => {})\r\n\r\n      sdkMock.getBlockingWordsApiVocabularyBlockingWordsGet.mockRejectedValue(new Error('API Error'))\r\n\r\n      act(() => {\r\n        result.current.startGame('test-video.mp4')\r\n      })\r\n\r\n      await act(async () => {\r\n        await result.current.loadSegmentWords(0)\r\n      })\r\n\r\n      expect(result.current.isProcessing).toBe(false)\r\n      expect(result.current.currentWords).toEqual([])\r\n      expect(consoleErrorSpy).toHaveBeenCalledWith('Failed to load segment words:', expect.any(Error))\r\n\r\n      consoleErrorSpy.mockRestore()\r\n    })\r\n  })\r\n})\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\useAppStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\useAuthStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\useGameStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VideoSegment' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'segmentStart' is defined but never used. Allowed unused args must match /^_/u.","line":48,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":48}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand'\r\nimport type { GameSession, VideoSegment, VocabularyWord } from '@/types'\r\nimport { getBlockingWordsApiVocabularyBlockingWordsGet, markWordKnownApiVocabularyMarkKnownPost } from '@/client/services.gen'\r\n\r\ninterface GameState {\r\n  gameSession: GameSession | null\r\n  currentWords: VocabularyWord[]\r\n  currentWordIndex: number\r\n  showSubtitles: boolean\r\n  isProcessing: boolean\r\n\r\n  // Actions\r\n  startGame: (videoPath: string) => void\r\n  loadSegmentWords: (segmentStart: number) => Promise<void>\r\n  markWordKnown: (word: string, known: boolean) => Promise<void>\r\n  nextWord: () => void\r\n  toggleSubtitles: () => void\r\n  nextSegment: () => Promise<void>\r\n  resetGame: () => void\r\n  reset: () => void\r\n}\r\n\r\nexport const useGameStore = create<GameState>((set, get) => ({\r\n  gameSession: null,\r\n  currentWords: [],\r\n  currentWordIndex: 0,\r\n  showSubtitles: false,\r\n  isProcessing: false,\r\n\r\n  startGame: (videoPath: string) => {\r\n    const initialSession: GameSession = {\r\n      video_path: videoPath,\r\n      current_segment: 0,\r\n      segments: [],\r\n      user_progress: {},\r\n      completed: false\r\n    }\r\n\r\n    set({\r\n      gameSession: initialSession,\r\n      currentWords: [],\r\n      currentWordIndex: 0,\r\n      showSubtitles: false,\r\n      isProcessing: false\r\n    })\r\n  },\r\n\r\n  loadSegmentWords: async (segmentStart: number) => {\r\n    const { gameSession } = get()\r\n    if (!gameSession) return\r\n\r\n    set({ isProcessing: true })\r\n\r\n    try {\r\n      const blockingWordsResponse = await getBlockingWordsApiVocabularyBlockingWordsGet({\r\n        videoPath: gameSession.video_path,\r\n      }) as { blocking_words?: VocabularyWord[] } | VocabularyWord[]\r\n\r\n      const words = Array.isArray(blockingWordsResponse)\r\n        ? blockingWordsResponse\r\n        : blockingWordsResponse?.blocking_words ?? []\r\n\r\n      set({\r\n        currentWords: words,\r\n        currentWordIndex: 0,\r\n        isProcessing: false\r\n      })\r\n    } catch (error) {\r\n      console.error('Failed to load segment words:', error)\r\n      set({ isProcessing: false })\r\n    }\r\n  },\r\n\r\n  markWordKnown: async (word: string, known: boolean) => {\r\n    const { gameSession, currentWords } = get()\r\n    if (!gameSession) return\r\n\r\n    try {\r\n      const targetWord = currentWords.find(w => w.word === word)\r\n      if (!targetWord) {\r\n        throw new Error(`Unknown word: ${word}`)\r\n      }\r\n\r\n      await markWordKnownApiVocabularyMarkKnownPost({\r\n        requestBody: {\r\n          lemma: targetWord.lemma,\r\n          word: targetWord.word,\r\n          language: 'de',\r\n          known,\r\n        },\r\n      })\r\n\r\n      // Update local progress using lemma as key\r\n      const wordKey = targetWord.lemma || targetWord.word\r\n      const updatedProgress = {\r\n        ...gameSession.user_progress,\r\n        [wordKey]: known\r\n      }\r\n\r\n      // Update current words\r\n      const updatedWords = currentWords.map(w =>\r\n        w.word === word ? { ...w, known } : w\r\n      )\r\n\r\n      set({\r\n        gameSession: {\r\n          ...gameSession,\r\n          user_progress: updatedProgress\r\n        },\r\n        currentWords: updatedWords\r\n      })\r\n    } catch (error) {\r\n      console.error('Failed to mark word:', error)\r\n      // Don't update state on error, but don't throw either\r\n    }\r\n  },\r\n\r\n  nextWord: () => {\r\n    const { currentWords, currentWordIndex } = get()\r\n    if (currentWordIndex < currentWords.length - 1) {\r\n      set({ currentWordIndex: currentWordIndex + 1 })\r\n    }\r\n  },\r\n\r\n  toggleSubtitles: () => {\r\n    set(state => ({ showSubtitles: !state.showSubtitles }))\r\n  },\r\n\r\n  nextSegment: async () => {\r\n    const { gameSession } = get()\r\n    if (!gameSession) return\r\n\r\n    const nextSegmentIndex = gameSession.current_segment + 1\r\n    const segmentStart = nextSegmentIndex * 300 // 5 minutes per segment\r\n\r\n    set({\r\n      gameSession: {\r\n        ...gameSession,\r\n        current_segment: nextSegmentIndex\r\n      },\r\n      currentWords: [],\r\n      currentWordIndex: 0\r\n    })\r\n\r\n    // Load words for next segment\r\n    await get().loadSegmentWords(segmentStart)\r\n  },\r\n\r\n  resetGame: () => {\r\n    set({\r\n      gameSession: null,\r\n      currentWords: [],\r\n      currentWordIndex: 0,\r\n      showSubtitles: false,\r\n      isProcessing: false\r\n    })\r\n  },\r\n\r\n  reset: () => {\r\n    set({\r\n      gameSession: null,\r\n      currentWords: [],\r\n      currentWordIndex: 0,\r\n      showSubtitles: false,\r\n      isProcessing: false\r\n    })\r\n  }\r\n}))\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\store\\useVocabularyStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\styles\\GlobalStyles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\styles\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\assertion-helpers.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[536,539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[536,539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[754,757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[754,757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1635,1638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1635,1638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1779,1782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1779,1782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1791,1794],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1791,1794],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1898,1901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1898,1901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1910,1913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1910,1913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Assertion helpers to keep frontend test bodies concise and follow CLAUDE.md rules\r\n */\r\nimport { expect } from 'vitest';\r\n\r\nexport const assertElementExists = (element: HTMLElement | null): void => {\r\n  expect(element).toBeTruthy();\r\n};\r\n\r\nexport const assertElementNotExists = (element: HTMLElement | null): void => {\r\n  expect(element).toBeFalsy();\r\n};\r\n\r\nexport const assertTextInDocument = (text: string | RegExp): void => {\r\n  expect(document.body).toHaveTextContent(text);\r\n};\r\n\r\nexport const assertApiCallMade = (mockFn: any, expectedArgs?: any): void => {\r\n  expect(mockFn).toHaveBeenCalled();\r\n  if (expectedArgs) {\r\n    expect(mockFn).toHaveBeenCalledWith(expectedArgs);\r\n  }\r\n};\r\n\r\nexport const assertNavigationCalled = (mockNavigate: any, expectedPath: string): void => {\r\n  expect(mockNavigate).toHaveBeenCalledWith(expectedPath);\r\n};\r\n\r\nexport const assertElementVisible = (element: HTMLElement): void => {\r\n  expect(element).toBeVisible();\r\n  expect(element).toBeInTheDocument();\r\n};\r\n\r\nexport const assertLoadingState = (): void => {\r\n  const spinner = document.querySelector('.loading-spinner');\r\n  expect(spinner).toBeTruthy();\r\n};\r\n\r\nexport const assertErrorMessage = (message: string): void => {\r\n  // Check if the specific error message exists in the document\r\n  const hasMessage = document.body.textContent?.includes(message) ||\r\n                    document.querySelector(`[data-testid*=\"error\"]`)?.textContent?.includes(message) ||\r\n                    document.querySelector('.error')?.textContent?.includes(message);\r\n  expect(hasMessage).toBeTruthy();\r\n};\r\n\r\nexport const assertArrayLength = (array: any[], expectedLength: number): void => {\r\n  expect(array).toHaveLength(expectedLength);\r\n};\r\n\r\nexport const assertMockResolvedValue = (mockFn: any, value: any): void => {\r\n  mockFn.mockResolvedValue(value);\r\n};\r\n\r\nexport const assertMockRejectedValue = (mockFn: any, error: any): void => {\r\n  mockFn.mockRejectedValue(error);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\contract\\auth.contract.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\contract\\schema-validation.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AuthResponseSchema' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'RegisterRequestSchema' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LoginRequestSchema' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":21}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest';\r\nimport {\r\n  validateUserResponse,\r\n  validateAuthResponse,\r\n  validateRegisterRequest,\r\n  validateLoginRequest,\r\n  SchemaValidationError,\r\n  UserResponseSchema,\r\n  AuthResponseSchema,\r\n  RegisterRequestSchema,\r\n  LoginRequestSchema,\r\n} from '../../utils/schema-validation';\r\n\r\ndescribe('Schema Validation Tests', () => {\r\n  describe('UserResponse Validation', () => {\r\n    it('should validate correct UserResponse', () => {\r\n      const validUser = {\r\n        id: 1,\r\n        username: 'testuser',\r\n        is_admin: false,\r\n        is_active: true,\r\n        created_at: '2025-01-01T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateUserResponse(validUser)).not.toThrow();\r\n      const result = validateUserResponse(validUser);\r\n      expect(result).toEqual(validUser);\r\n    });\r\n\r\n    it('should validate UserResponse with last_login', () => {\r\n      const validUser = {\r\n        id: 1,\r\n        username: 'testuser',\r\n        is_admin: false,\r\n        is_active: true,\r\n        created_at: '2025-01-01T00:00:00Z',\r\n        last_login: '2025-01-02T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateUserResponse(validUser)).not.toThrow();\r\n    });\r\n\r\n    it('should reject invalid UserResponse - missing required fields', () => {\r\n      const invalidUser = {\r\n        id: 1,\r\n        username: 'testuser',\r\n        // missing is_active, created_at\r\n      };\r\n\r\n      expect(() => validateUserResponse(invalidUser)).toThrow(SchemaValidationError);\r\n    });\r\n\r\n    it('should reject invalid UserResponse - wrong types', () => {\r\n      const invalidUser = {\r\n        id: '1', // should be number\r\n        username: 'testuser',\r\n        is_active: true,\r\n        created_at: '2024-01-01T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateUserResponse(invalidUser)).toThrow(SchemaValidationError);\r\n    });\r\n  });\r\n\r\n  describe('AuthResponse Validation', () => {\r\n    it('should validate correct AuthResponse', () => {\r\n      const validAuth = {\r\n        token: 'jwt-token-123',\r\n        user: {\r\n          id: 1,\r\n          username: 'testuser',\r\n          is_admin: false,\r\n          is_active: true,\r\n          created_at: '2025-01-01T00:00:00Z',\r\n        },\r\n        expires_at: '2025-01-02T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateAuthResponse(validAuth)).not.toThrow();\r\n      const result = validateAuthResponse(validAuth);\r\n      expect(result).toEqual(validAuth);\r\n    });\r\n\r\n    it('should reject invalid AuthResponse - missing token', () => {\r\n      const invalidAuth = {\r\n        user: {\r\n          id: 1,\r\n          username: 'testuser',\r\n          is_active: true,\r\n          created_at: '2024-01-01T00:00:00Z',\r\n        },\r\n        expires_at: '2024-01-02T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateAuthResponse(invalidAuth)).toThrow(SchemaValidationError);\r\n    });\r\n\r\n    it('should reject invalid AuthResponse - invalid user object', () => {\r\n      const invalidAuth = {\r\n        token: 'jwt-token-string',\r\n        user: {\r\n          id: 1,\r\n          username: 'testuser',\r\n          // missing required user fields\r\n        },\r\n        expires_at: '2024-01-02T00:00:00Z',\r\n      };\r\n\r\n      expect(() => validateAuthResponse(invalidAuth)).toThrow(SchemaValidationError);\r\n    });\r\n  });\r\n\r\n  describe('RegisterRequest Validation', () => {\r\n    it('should validate correct RegisterRequest', () => {\r\n      const validRegister = {\r\n        username: 'testuser',\r\n        password: 'password123',\r\n      };\r\n\r\n      expect(() => validateRegisterRequest(validRegister)).not.toThrow();\r\n      const result = validateRegisterRequest(validRegister);\r\n      expect(result).toEqual(validRegister);\r\n    });\r\n\r\n    it('should reject RegisterRequest with short password', () => {\r\n      const invalidRegister = {\r\n        username: 'testuser',\r\n        password: '123', // too short\r\n      };\r\n\r\n      expect(() => validateRegisterRequest(invalidRegister)).toThrow(SchemaValidationError);\r\n    });\r\n\r\n    it('should reject RegisterRequest with empty username', () => {\r\n      const invalidRegister = {\r\n        username: '', // empty\r\n        password: 'password123',\r\n      };\r\n\r\n      expect(() => validateRegisterRequest(invalidRegister)).toThrow(SchemaValidationError);\r\n    });\r\n\r\n    it('should reject RegisterRequest with missing fields', () => {\r\n      const invalidRegister = {\r\n        username: 'testuser',\r\n        // missing password\r\n      };\r\n\r\n      expect(() => validateRegisterRequest(invalidRegister)).toThrow(SchemaValidationError);\r\n    });\r\n  });\r\n\r\n  describe('LoginRequest Validation', () => {\r\n    it('should validate correct LoginRequest', () => {\r\n      const validLogin = {\r\n        username: 'testuser',\r\n        password: 'password123',\r\n      };\r\n\r\n      expect(() => validateLoginRequest(validLogin)).not.toThrow();\r\n      const result = validateLoginRequest(validLogin);\r\n      expect(result).toEqual(validLogin);\r\n    });\r\n\r\n    it('should reject LoginRequest with empty username', () => {\r\n      const invalidLogin = {\r\n        username: '', // empty\r\n        password: 'password123',\r\n      };\r\n\r\n      expect(() => validateLoginRequest(invalidLogin)).toThrow(SchemaValidationError);\r\n    });\r\n\r\n    it('should reject LoginRequest with empty password', () => {\r\n      const invalidLogin = {\r\n        username: 'testuser',\r\n        password: '', // empty\r\n      };\r\n\r\n      expect(() => validateLoginRequest(invalidLogin)).toThrow(SchemaValidationError);\r\n    });\r\n  });\r\n\r\n  describe('Schema Error Handling', () => {\r\n    it('should provide detailed error information', () => {\r\n      const invalidData = {\r\n        id: 'not-a-number',\r\n        username: 123, // wrong type\r\n      };\r\n\r\n      try {\r\n        validateUserResponse(invalidData);\r\n        expect.fail('Should have thrown SchemaValidationError');\r\n      } catch (error) {\r\n        expect(error).toBeInstanceOf(SchemaValidationError);\r\n        expect((error as SchemaValidationError).issues).toBeDefined();\r\n        expect((error as SchemaValidationError).issues.length).toBeGreaterThan(0);\r\n      }\r\n    });\r\n\r\n    it('should include context in error message', () => {\r\n      try {\r\n        validateUserResponse({});\r\n        expect.fail('Should have thrown SchemaValidationError');\r\n      } catch (error) {\r\n        expect(error).toBeInstanceOf(SchemaValidationError);\r\n        expect((error as SchemaValidationError).message).toContain('UserResponse');\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Direct Schema Usage', () => {\r\n    it('should work with direct schema parsing', () => {\r\n      const validUser = {\r\n        id: 1,\r\n        username: 'testuser',\r\n        is_admin: false,\r\n        is_active: true,\r\n        created_at: '2025-01-01T00:00:00Z',\r\n      };\r\n\r\n      const result = UserResponseSchema.parse(validUser);\r\n      expect(result).toEqual(validUser);\r\n    });\r\n\r\n    it('should provide safe parsing option', () => {\r\n      const invalidUser = { id: 'invalid' };\r\n\r\n      const result = UserResponseSchema.safeParse(invalidUser);\r\n      expect(result.success).toBe(false);\r\n\r\n      if (!result.success) {\r\n        expect(result.error.issues).toBeDefined();\r\n      }\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\integration\\api-connection.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\mocks\\framer-motion.ts","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":6,"column":10,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":37,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[215,218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[215,218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[225,228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[225,228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'initial' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'animate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'whileHover' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'whileTap' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'whileFocus' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'whileDrag' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'whileInView' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'variants' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'transition' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'drag' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragConstraints' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragElastic' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragMomentum' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragTransition' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":22,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragDirectionLock' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":23,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragPropagation' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onDrag' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":25,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onDragStart' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onDragEnd' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'layout' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'layoutId' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'style' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":30,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onAnimationComplete' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":31,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onAnimationStart' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[886,889],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[886,889],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1028,1031],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1028,1031],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1097,1100],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1097,1100],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1157,1160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1157,1160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1219,1222],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1219,1222],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1524,1527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1524,1527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":26,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { vi } from 'vitest';\r\n\r\n// Create a proxy-based motion mock that handles any HTML element\r\nconst createMotionComponent = (element: string) => {\r\n  return React.forwardRef((props: any, ref: any) => {\r\n    const {\r\n      initial,\r\n      animate,\r\n      exit,\r\n      whileHover,\r\n      whileTap,\r\n      whileFocus,\r\n      whileDrag,\r\n      whileInView,\r\n      variants,\r\n      transition,\r\n      drag,\r\n      dragConstraints,\r\n      dragElastic,\r\n      dragMomentum,\r\n      dragTransition,\r\n      dragDirectionLock,\r\n      dragPropagation,\r\n      onDrag,\r\n      onDragStart,\r\n      onDragEnd,\r\n      layout,\r\n      layoutId,\r\n      style,\r\n      onAnimationComplete,\r\n      onAnimationStart,\r\n      ...rest\r\n    } = props;\r\n\r\n    return React.createElement(element, { ...rest, ref }, props.children);\r\n  });\r\n};\r\n\r\nexport const motion = new Proxy({} as any, {\r\n  get: (_target, key: string) => {\r\n    return createMotionComponent(key);\r\n  }\r\n});\r\n\r\nexport const AnimatePresence = ({ children }: any) => children;\r\nexport const AnimateSharedLayout = ({ children }: any) => children;\r\nexport const LazyMotion = ({ children }: any) => children;\r\nexport const MotionConfig = ({ children }: any) => children;\r\n\r\nexport const useAnimation = () => ({\r\n  start: vi.fn(),\r\n  set: vi.fn(),\r\n  stop: vi.fn(),\r\n  mount: vi.fn(),\r\n});\r\n\r\nexport const useAnimationControls = () => ({\r\n  start: vi.fn(),\r\n  set: vi.fn(),\r\n  stop: vi.fn(),\r\n  mount: vi.fn(),\r\n});\r\n\r\nexport const useMotionValue = (initial: any) => ({\r\n  get: () => initial,\r\n  set: vi.fn(),\r\n  onChange: vi.fn(),\r\n  clearListeners: vi.fn(),\r\n  destroy: vi.fn(),\r\n});\r\n\r\nexport const useTransform = () => ({\r\n  get: vi.fn(),\r\n  set: vi.fn(),\r\n  onChange: vi.fn(),\r\n  clearListeners: vi.fn(),\r\n});\r\n\r\nexport const useSpring = () => ({\r\n  get: vi.fn(),\r\n  set: vi.fn(),\r\n  onChange: vi.fn(),\r\n  clearListeners: vi.fn(),\r\n});\r\n\r\nexport const useVelocity = () => ({\r\n  get: vi.fn(),\r\n  set: vi.fn(),\r\n  onChange: vi.fn(),\r\n  clearListeners: vi.fn(),\r\n});\r\n\r\nexport const useDragControls = () => ({\r\n  start: vi.fn(),\r\n});\r\n\r\nexport const useScroll = () => ({\r\n  scrollX: { get: () => 0 },\r\n  scrollY: { get: () => 0 },\r\n  scrollXProgress: { get: () => 0 },\r\n  scrollYProgress: { get: () => 0 },\r\n});\r\n\r\nexport const useInView = () => false;\r\nexport const usePresence = () => [true, vi.fn()];\r\nexport const useReducedMotion = () => false;\r\n\r\n// Shorthand\r\nexport const m = motion;\r\n\r\n// Feature detection\r\nexport const domAnimation = {};\r\nexport const domMax = {};\r\n\r\nexport default {\r\n  motion,\r\n  AnimatePresence,\r\n  AnimateSharedLayout,\r\n  LazyMotion,\r\n  MotionConfig,\r\n  useAnimation,\r\n  useAnimationControls,\r\n  useMotionValue,\r\n  useTransform,\r\n  useSpring,\r\n  useVelocity,\r\n  useDragControls,\r\n  useScroll,\r\n  useInView,\r\n  usePresence,\r\n  useReducedMotion,\r\n  m,\r\n  domAnimation,\r\n  domMax,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\setup.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2390,2393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2390,2393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2482,2485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2482,2485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2691,2694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2691,2694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2767,2770],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2767,2770],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2808,2811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2808,2811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty constructor.","line":152,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":152,"endColumn":19},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'disconnect'.","line":153,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":153,"endColumn":18},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'observe'.","line":154,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":154,"endColumn":15},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'unobserve'.","line":155,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":155,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4204,4207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4204,4207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty constructor.","line":165,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":165,"endColumn":19},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'disconnect'.","line":166,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":166,"endColumn":18},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'observe'.","line":167,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":167,"endColumn":15},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'unobserve'.","line":168,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":168,"endColumn":17},{"ruleId":"@typescript-eslint/no-var-requires","severity":2,"message":"Require statement not part of import statement.","line":213,"column":20,"nodeType":"CallExpression","messageId":"noVarReqs","endLine":213,"endColumn":36}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { expect, afterEach, vi } from 'vitest';\r\nimport { cleanup } from '@testing-library/react';\r\nimport * as matchers from '@testing-library/jest-dom/matchers';\r\nimport React from 'react';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport { act } from 'react';\r\n\r\n// extends Vitest's expect method with methods from react-testing-library\r\nexpect.extend(matchers);\r\n\r\n// runs a cleanup after each test case (e.g. clearing jsdom)\r\nafterEach(() => {\r\n  cleanup();\r\n});\r\n\r\n// Mock theme for styled-components\r\nconst mockTheme = {\r\n  colors: {\r\n    primary: '#FF6B6B',\r\n    primaryDark: '#EE5A52',\r\n    primaryLight: '#FF8787',\r\n    secondary: '#4ECDC4',\r\n    background: '#FFFFFF',\r\n    surface: '#F8F9FA',\r\n    surfaceHover: '#E9ECEF',\r\n    text: '#1A1A1A',\r\n    textSecondary: '#6C757D',\r\n    textLight: '#ADB5BD',\r\n    border: '#E1E4E8',\r\n    success: '#52C41A',\r\n    warning: '#FAAD14',\r\n    error: '#F5222D',\r\n    info: '#1890FF',\r\n    overlay: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  spacing: {\r\n    xs: '0.25rem',\r\n    sm: '0.5rem',\r\n    md: '1rem',\r\n    lg: '1.5rem',\r\n    xl: '2rem',\r\n    '2xl': '3rem',\r\n  },\r\n  breakpoints: {\r\n    xs: '0px',\r\n    sm: '576px',\r\n    md: '768px',\r\n    lg: '992px',\r\n    xl: '1200px',\r\n    '2xl': '1400px',\r\n  },\r\n  shadows: {\r\n    sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\r\n    md: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n    lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\r\n    xl: '0 20px 25px -5px rgba(0, 0, 0, 0.1)',\r\n  },\r\n  transitions: {\r\n    fast: '150ms ease-in-out',\r\n    normal: '250ms ease-in-out',\r\n    slow: '350ms ease-in-out',\r\n  },\r\n  typography: {\r\n    fontFamily: {\r\n      primary: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\r\n      mono: 'Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace',\r\n    },\r\n    fontSize: {\r\n      xs: '0.75rem',\r\n      sm: '0.875rem',\r\n      base: '1rem',\r\n      md: '1rem',\r\n      lg: '1.125rem',\r\n      xl: '1.25rem',\r\n      '2xl': '1.5rem',\r\n    },\r\n    fontWeight: {\r\n      light: '300',\r\n      normal: '400',\r\n      medium: '500',\r\n      semibold: '600',\r\n      bold: '700',\r\n    },\r\n  },\r\n  radius: {\r\n    sm: '0.125rem',\r\n    md: '0.375rem',\r\n    lg: '0.5rem',\r\n    xl: '1rem',\r\n    full: '9999px',\r\n  },\r\n  zIndex: {\r\n    modal: 1000,\r\n    popover: 900,\r\n    tooltip: 800,\r\n  },\r\n};\r\n\r\n// Make theme available globally for tests\r\n(global as any).mockTheme = mockTheme;\r\n\r\n// Helper to wrap components with theme provider\r\n(global as any).withTheme = (component: React.ReactElement) =>\r\n  React.createElement(ThemeProvider, { theme: mockTheme }, component);\r\n\r\n// Make React.act available globally to replace ReactDOMTestUtils.act\r\n(global as any).act = act;\r\n\r\n// Enhanced act wrapper for async operations\r\n(global as any).actAsync = async (fn: () => Promise<any>) => {\r\n  await act(async () => {\r\n    await fn();\r\n  });\r\n};\r\n\r\n// Suppress specific warnings that come from testing libraries\r\nconst originalConsoleWarn = console.warn;\r\nconst originalConsoleError = console.error;\r\n\r\nconsole.warn = (...args) => {\r\n  const message = args[0];\r\n  if (\r\n    typeof message === 'string' &&\r\n    (\r\n      message.includes('ReactDOMTestUtils.act') ||\r\n      message.includes('React Router Future Flag Warning') ||\r\n      (message.includes('An update to') && message.includes('was not wrapped in act')) ||\r\n      message.includes('Warning: `ReactDOMTestUtils.act` is deprecated')\r\n    )\r\n  ) {\r\n    return; // Suppress these warnings\r\n  }\r\n  originalConsoleWarn.apply(console, args);\r\n};\r\n\r\nconsole.error = (...args) => {\r\n  const message = args[0];\r\n  if (\r\n    typeof message === 'string' &&\r\n    (\r\n      message.includes('ReactDOMTestUtils.act') ||\r\n      (message.includes('An update to') && message.includes('was not wrapped in act'))\r\n    )\r\n  ) {\r\n    return; // Suppress these errors\r\n  }\r\n  originalConsoleError.apply(console, args);\r\n};\r\n\r\n// Mock IntersectionObserver\r\nclass MockIntersectionObserver {\r\n  constructor() {}\r\n  disconnect() {}\r\n  observe() {}\r\n  unobserve() {}\r\n  readonly root = null;\r\n  readonly rootMargin = '';\r\n  readonly thresholds = [];\r\n  takeRecords() { return [] };\r\n}\r\nglobal.IntersectionObserver = MockIntersectionObserver as any;\r\n\r\n// Mock ResizeObserver\r\nglobal.ResizeObserver = class ResizeObserver {\r\n  constructor() {}\r\n  disconnect() {}\r\n  observe() {}\r\n  unobserve() {}\r\n};\r\n\r\n// Mock matchMedia\r\nObject.defineProperty(window, 'matchMedia', {\r\n  writable: true,\r\n  value: vi.fn().mockImplementation(query => ({\r\n    matches: false,\r\n    media: query,\r\n    onchange: null,\r\n    addListener: vi.fn(), // deprecated\r\n    removeListener: vi.fn(), // deprecated\r\n    addEventListener: vi.fn(),\r\n    removeEventListener: vi.fn(),\r\n    dispatchEvent: vi.fn(),\r\n  })),\r\n});\r\n\r\n// Mock URL.createObjectURL\r\nglobal.URL.createObjectURL = vi.fn(() => 'mocked-url');\r\nglobal.URL.revokeObjectURL = vi.fn();\r\n\r\n// Mock localStorage\r\nconst localStorageMock = {\r\n  getItem: vi.fn(),\r\n  setItem: vi.fn(),\r\n  removeItem: vi.fn(),\r\n  clear: vi.fn(),\r\n  length: 0,\r\n  key: vi.fn(),\r\n};\r\nObject.defineProperty(window, 'localStorage', {\r\n  value: localStorageMock,\r\n  writable: true,\r\n  configurable: true\r\n});\r\n\r\n// Fix URLSearchParams for jsdom\r\nif (!global.URLSearchParams) {\r\n  global.URLSearchParams = URLSearchParams;\r\n}\r\n\r\n// Ensure DOM is properly set up for testing\r\nif (typeof global.document === 'undefined' || !global.document.body) {\r\n  // Create a basic document if it doesn't exist\r\n  const dom = new (require('jsdom')).JSDOM('<!doctype html><html><body></body></html>');\r\n  global.document = dom.window.document;\r\n  global.window = dom.window;\r\n\r\n  // Ensure body exists\r\n  if (!global.document.body) {\r\n    global.document.documentElement.appendChild(global.document.createElement('body'));\r\n  }\r\n}\r\n\r\n// Ensure DOM globals are available for tests\r\nObject.defineProperty(global.window, 'Node', {\r\n  value: global.window.Node,\r\n  writable: true,\r\n  configurable: true\r\n});\r\n\r\nObject.defineProperty(global.window, 'Element', {\r\n  value: global.window.Element,\r\n  writable: true,\r\n  configurable: true\r\n});\r\n\r\n// Framer-motion is mocked via resolve.alias in vitest.config.ts\r\n\r\n// Mock axios to prevent network requests in tests\r\nvi.mock('axios', async () => {\r\n  const actual = await vi.importActual('axios')\r\n  return {\r\n    ...actual,\r\n    default: {\r\n      create: vi.fn(() => ({\r\n        get: vi.fn(() => Promise.resolve({ data: {} })),\r\n        post: vi.fn(() => Promise.resolve({ data: {} })),\r\n        put: vi.fn(() => Promise.resolve({ data: {} })),\r\n        delete: vi.fn(() => Promise.resolve({ data: {} })),\r\n        interceptors: {\r\n          request: { use: vi.fn(), eject: vi.fn() },\r\n          response: { use: vi.fn(), eject: vi.fn() },\r\n        },\r\n      })),\r\n      get: vi.fn(() => Promise.resolve({ data: {} })),\r\n      post: vi.fn(() => Promise.resolve({ data: {} })),\r\n      put: vi.fn(() => Promise.resolve({ data: {} })),\r\n      delete: vi.fn(() => Promise.resolve({ data: {} })),\r\n    },\r\n  }\r\n})\r\n\r\n// Mock sessionStorage\r\nconst sessionStorageMock = {\r\n  getItem: vi.fn(),\r\n  setItem: vi.fn(),\r\n  removeItem: vi.fn(),\r\n  clear: vi.fn(),\r\n  length: 0,\r\n  key: vi.fn(),\r\n};\r\nObject.defineProperty(window, 'sessionStorage', {\r\n  value: sessionStorageMock,\r\n  writable: true,\r\n  configurable: true\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\subtitle-parsing.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\test-utils.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3098,3101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3098,3101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3150,3153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3150,3153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3170,3173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3170,3173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3191,3194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3191,3194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Move your component(s) to a separate file.","line":125,"column":7,"nodeType":"Identifier","messageId":"localComponents","endLine":125,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3976,3979],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3976,3979],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4245,4248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4245,4248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4499,4502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4499,4502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6661,6664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6661,6664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7415,7418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7415,7418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":302,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":302,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8252,8255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8252,8255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":304,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8352,8355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8352,8355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":305,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":305,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8387,8390],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8387,8390],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-namespace","severity":2,"message":"ES2015 module syntax is preferred over namespaces.","line":347,"column":3,"nodeType":"TSModuleDeclaration","messageId":"moduleSyntaxIsPreferred","endLine":352,"endColumn":4},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty constructor.","line":376,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":376,"endColumn":19},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'disconnect'.","line":377,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":377,"endColumn":18},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'observe'.","line":378,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":378,"endColumn":15},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'unobserve'.","line":382,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":382,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":383,"column":6,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":9,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10513,10516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10513,10516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty constructor.","line":387,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":387,"endColumn":19},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'disconnect'.","line":388,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":388,"endColumn":18},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'observe'.","line":389,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":389,"endColumn":15},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty method 'unobserve'.","line":390,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":390,"endColumn":17},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"This rule can't verify that `export *` only export components","line":394,"column":1,"nodeType":"ExportAllDeclaration","messageId":"exportAll","endLine":394,"endColumn":39}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Enhanced testing utilities for React components with improved architecture\r\n */\r\nimport React, { ReactElement } from 'react'\r\nimport { render, RenderOptions, RenderResult } from '@testing-library/react'\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport { Toaster } from 'react-hot-toast'\r\nimport userEvent from '@testing-library/user-event'\r\n\r\nimport { useAppStore } from '@/store/useAppStore'\r\nimport { useVocabularyStore } from '@/store/useVocabularyStore'\r\nimport { useAuthStore } from '@/store/useAuthStore'\r\nimport { useGameStore } from '@/store/useGameStore'\r\nimport ErrorBoundary from '@/components/common/ErrorBoundary'\r\n\r\n// Mock API client for testing\r\nexport const mockApiClient = {\r\n  get: jest.fn(),\r\n  post: jest.fn(),\r\n  put: jest.fn(),\r\n  delete: jest.fn(),\r\n  clearCache: jest.fn(),\r\n  clearCachePattern: jest.fn(),\r\n}\r\n\r\n// Mock API responses\r\nexport const mockApiResponses = {\r\n  auth: {\r\n    login: {\r\n      access_token: 'mock_token_123',\r\n      token_type: 'bearer',\r\n      expires_in: 3600,\r\n      user: {\r\n        id: 1,\r\n        username: 'testuser',\r\n        email: 'test@example.com',\r\n        is_active: true,\r\n        is_verified: true,\r\n        created_at: '2023-01-01T00:00:00Z',\r\n        last_login: null,\r\n      },\r\n    },\r\n    getCurrentUser: {\r\n      id: 1,\r\n      username: 'testuser',\r\n      email: 'test@example.com',\r\n      is_active: true,\r\n      is_verified: true,\r\n      created_at: '2023-01-01T00:00:00Z',\r\n      last_login: null,\r\n    },\r\n  },\r\n  vocabulary: {\r\n    search: [\r\n      {\r\n        id: 1,\r\n        word: 'der Hund',\r\n        lemma: 'Hund',\r\n        language: 'de',\r\n        difficulty_level: 'A1',\r\n        part_of_speech: 'noun',\r\n        gender: 'der',\r\n        translation_en: 'dog',\r\n        frequency_rank: 100,\r\n        created_at: '2023-01-01T00:00:00Z',\r\n        updated_at: '2023-01-01T00:00:00Z',\r\n      },\r\n    ],\r\n    getByLevel: [\r\n      {\r\n        id: 1,\r\n        word: 'der Hund',\r\n        lemma: 'Hund',\r\n        language: 'de',\r\n        difficulty_level: 'A1',\r\n        part_of_speech: 'noun',\r\n        gender: 'der',\r\n        translation_en: 'dog',\r\n        frequency_rank: 100,\r\n        created_at: '2023-01-01T00:00:00Z',\r\n        updated_at: '2023-01-01T00:00:00Z',\r\n      },\r\n      {\r\n        id: 2,\r\n        word: 'die Katze',\r\n        lemma: 'Katze',\r\n        language: 'de',\r\n        difficulty_level: 'A1',\r\n        part_of_speech: 'noun',\r\n        gender: 'die',\r\n        translation_en: 'cat',\r\n        frequency_rank: 150,\r\n        created_at: '2023-01-01T00:00:00Z',\r\n        updated_at: '2023-01-01T00:00:00Z',\r\n      },\r\n    ],\r\n    getStats: {\r\n      total_reviewed: 10,\r\n      known_words: 7,\r\n      unknown_words: 3,\r\n      percentage_known: 70.0,\r\n      level_breakdown: {\r\n        A1: 5,\r\n        A2: 3,\r\n        B1: 2,\r\n      },\r\n    },\r\n  },\r\n}\r\n\r\n// Test wrapper component with all providers\r\ninterface TestWrapperProps {\r\n  children: React.ReactNode\r\n  initialAuth?: {\r\n    isAuthenticated: boolean\r\n    user?: any\r\n    token?: string\r\n  }\r\n  initialVocabulary?: any\r\n  initialApp?: any\r\n  initialGame?: any\r\n}\r\n\r\nconst TestWrapper: React.FC<TestWrapperProps> = ({\r\n  children,\r\n  initialAuth,\r\n  initialVocabulary,\r\n  initialApp,\r\n  initialGame,\r\n}) => {\r\n  const queryClient = new QueryClient({\r\n    defaultOptions: {\r\n      queries: {\r\n        retry: false,\r\n        gcTime: 0,\r\n      },\r\n    },\r\n  })\r\n\r\n  // Initialize stores with test data\r\n  React.useEffect(() => {\r\n    if (initialAuth) {\r\n      const authStore = useAuthStore.getState()\r\n      if (initialAuth.isAuthenticated) {\r\n        authStore.setUser(initialAuth.user || mockApiResponses.auth.getCurrentUser)\r\n        authStore.setToken(initialAuth.token || 'mock_token_123')\r\n        authStore.setAuthenticated(true)\r\n      }\r\n    }\r\n\r\n    if (initialVocabulary) {\r\n      const vocabStore = useVocabularyStore.getState() as any\r\n      Object.keys(initialVocabulary).forEach((key) => {\r\n        if (typeof vocabStore[key] === 'function') {\r\n          vocabStore[key](initialVocabulary[key])\r\n        }\r\n      })\r\n    }\r\n\r\n    if (initialApp) {\r\n      const appStore = useAppStore.getState() as any\r\n      Object.keys(initialApp).forEach((key) => {\r\n        if (typeof appStore[key] === 'function') {\r\n          appStore[key](initialApp[key])\r\n        }\r\n      })\r\n    }\r\n\r\n    if (initialGame) {\r\n      const gameStore = useGameStore.getState() as any\r\n      Object.keys(initialGame).forEach((key) => {\r\n        if (typeof gameStore[key] === 'function') {\r\n          gameStore[key](initialGame[key])\r\n        }\r\n      })\r\n    }\r\n  }, [initialAuth, initialVocabulary, initialApp, initialGame])\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <QueryClientProvider client={queryClient}>\r\n        <BrowserRouter>\r\n          {children}\r\n          <Toaster />\r\n        </BrowserRouter>\r\n      </QueryClientProvider>\r\n    </ErrorBoundary>\r\n  )\r\n}\r\n\r\n// Custom render function with providers\r\ninterface CustomRenderOptions extends Omit<RenderOptions, 'wrapper'> {\r\n  wrapperProps?: TestWrapperProps\r\n}\r\n\r\nexport function renderWithProviders(\r\n  ui: ReactElement,\r\n  options: CustomRenderOptions = {}\r\n): RenderResult & { user: ReturnType<typeof userEvent.setup> } {\r\n  const { wrapperProps, ...renderOptions } = options\r\n\r\n  const Wrapper = ({ children }: { children: React.ReactNode }) => (\r\n    <TestWrapper {...wrapperProps}>{children}</TestWrapper>\r\n  )\r\n\r\n  const result = render(ui, { wrapper: Wrapper, ...renderOptions })\r\n  const user = userEvent.setup()\r\n\r\n  return {\r\n    ...result,\r\n    user,\r\n  }\r\n}\r\n\r\n// Helper functions for common test scenarios\r\nexport const createMockUser = (overrides = {}) => ({\r\n  id: 1,\r\n  username: 'testuser',\r\n  email: 'test@example.com',\r\n  is_active: true,\r\n  is_verified: true,\r\n  created_at: '2023-01-01T00:00:00Z',\r\n  last_login: null,\r\n  ...overrides,\r\n})\r\n\r\nexport const createMockVocabularyWord = (overrides = {}) => ({\r\n  id: 1,\r\n  word: 'der Hund',\r\n  lemma: 'Hund',\r\n  language: 'de',\r\n  difficulty_level: 'A1',\r\n  part_of_speech: 'noun',\r\n  gender: 'der',\r\n  translation_en: 'dog',\r\n  frequency_rank: 100,\r\n  created_at: '2023-01-01T00:00:00Z',\r\n  updated_at: '2023-01-01T00:00:00Z',\r\n  ...overrides,\r\n})\r\n\r\nexport const createMockProgress = (overrides = {}) => ({\r\n  id: 1,\r\n  user_id: 1,\r\n  vocabulary_id: 1,\r\n  lemma: 'Hund',\r\n  language: 'de',\r\n  is_known: false,\r\n  confidence_level: 0,\r\n  review_count: 0,\r\n  first_seen_at: '2023-01-01T00:00:00Z',\r\n  last_reviewed_at: null,\r\n  ...overrides,\r\n})\r\n\r\n// Mock API calls for testing\r\nexport const mockApi = (apiClient: any) => {\r\n  apiClient.get.mockImplementation((url: string) => {\r\n    if (url.includes('/auth/me')) {\r\n      return Promise.resolve({ data: mockApiResponses.auth.getCurrentUser, status: 200 })\r\n    }\r\n    if (url.includes('/vocabulary/search')) {\r\n      return Promise.resolve({ data: mockApiResponses.vocabulary.search, status: 200 })\r\n    }\r\n    if (url.includes('/vocabulary/level/')) {\r\n      return Promise.resolve({ data: mockApiResponses.vocabulary.getByLevel, status: 200 })\r\n    }\r\n    if (url.includes('/vocabulary/stats')) {\r\n      return Promise.resolve({ data: mockApiResponses.vocabulary.getStats, status: 200 })\r\n    }\r\n    return Promise.resolve({ data: [], status: 200 })\r\n  })\r\n\r\n  apiClient.post.mockImplementation((url: string, data: any) => {\r\n    if (url.includes('/auth/login')) {\r\n      return Promise.resolve({ data: mockApiResponses.auth.login, status: 200 })\r\n    }\r\n    if (url.includes('/vocabulary/mark')) {\r\n      return Promise.resolve({\r\n        data: createMockProgress({ is_known: data.is_known }),\r\n        status: 200,\r\n      })\r\n    }\r\n    return Promise.resolve({ data: {}, status: 200 })\r\n  })\r\n}\r\n\r\n// Test helpers for async operations\r\nexport const waitForApiCall = async (apiMethod: jest.Mock, timeout = 5000) => {\r\n  const startTime = Date.now()\r\n  while (Date.now() - startTime < timeout) {\r\n    if (apiMethod.mock.calls.length > 0) {\r\n      return\r\n    }\r\n    await new Promise((resolve) => setTimeout(resolve, 10))\r\n  }\r\n  throw new Error('API call timeout')\r\n}\r\n\r\n// Helper for testing error scenarios\r\nexport const mockApiError = (apiClient: any, status = 500, message = 'Server error') => {\r\n  const error = new Error(message)\r\n  ;(error as any).status = status\r\n  ;(error as any).response = { status, data: { detail: message } }\r\n\r\n  apiClient.get.mockRejectedValue(error)\r\n  apiClient.post.mockRejectedValue(error)\r\n  apiClient.put.mockRejectedValue(error)\r\n  apiClient.delete.mockRejectedValue(error)\r\n}\r\n\r\n// Store reset utilities\r\nexport const resetAllStores = () => {\r\n  useAppStore.getState().reset()\r\n  useVocabularyStore.getState().reset()\r\n  useAuthStore.getState().reset()\r\n  useGameStore.getState().reset()\r\n}\r\n\r\n// Custom matchers for testing\r\nexpect.extend({\r\n  toBeAuthenticated(received) {\r\n    const pass = received.isAuthenticated === true && received.user !== null\r\n    return {\r\n      message: () =>\r\n        pass\r\n          ? `Expected user not to be authenticated`\r\n          : `Expected user to be authenticated`,\r\n      pass,\r\n    }\r\n  },\r\n  toHaveLoadingState(received, expected) {\r\n    const pass = received.isLoading === expected\r\n    return {\r\n      message: () =>\r\n        pass\r\n          ? `Expected loading state not to be ${expected}`\r\n          : `Expected loading state to be ${expected}, but got ${received.isLoading}`,\r\n      pass,\r\n    }\r\n  },\r\n})\r\n\r\n// TypeScript declarations for custom matchers\r\ndeclare global {\r\n  namespace jest {\r\n    interface Matchers<R> {\r\n      toBeAuthenticated(): R\r\n      toHaveLoadingState(expected: boolean): R\r\n    }\r\n  }\r\n}\r\n\r\n// Performance testing helpers\r\nexport const measureRenderTime = (renderFn: () => void): number => {\r\n  const start = performance.now()\r\n  renderFn()\r\n  const end = performance.now()\r\n  return end - start\r\n}\r\n\r\nexport const measureAsyncOperation = async (operation: () => Promise<void>): Promise<number> => {\r\n  const start = performance.now()\r\n  await operation()\r\n  const end = performance.now()\r\n  return end - start\r\n}\r\n\r\n// Mock intersection observer for testing\r\nglobal.IntersectionObserver = class IntersectionObserver {\r\n  readonly root: Element | null = null\r\n  readonly rootMargin: string = ''\r\n  readonly thresholds: ReadonlyArray<number> = []\r\n\r\n  constructor() {}\r\n  disconnect() {}\r\n  observe() {}\r\n  takeRecords(): IntersectionObserverEntry[] {\r\n    return []\r\n  }\r\n  unobserve() {}\r\n} as any\r\n\r\n// Mock ResizeObserver for testing\r\nglobal.ResizeObserver = class ResizeObserver {\r\n  constructor() {}\r\n  disconnect() {}\r\n  observe() {}\r\n  unobserve() {}\r\n}\r\n\r\n// Export everything for easy importing\r\nexport * from '@testing-library/react'\r\nexport { renderWithProviders as render }\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\test\\utils.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":35,"column":28,"nodeType":"Identifier","messageId":"namedExport","endLine":35,"endColumn":36},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only export components. Use a new file to share constant or functions between components.","line":47,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * DEPRECATED: Legacy SRT parsing utility\r\n *\r\n * This file contained duplicate SRT parsing logic that has been replaced\r\n * with a proper API-based approach. The frontend no longer parses SRT files\r\n * directly - instead, it uses the backend API as the single source of truth.\r\n *\r\n * Migration Guide:\r\n * ================\r\n *\r\n * OLD APPROACH (deprecated):\r\n * ```ts\r\n * import { parseSRT } from './utils'\r\n * const parsed = parseSRT(srtContent)\r\n * ```\r\n *\r\n * NEW APPROACH (recommended):\r\n * ```ts\r\n * import { srtApi } from '../utils/srtApi'\r\n * const result = await srtApi.parseSRTContent(srtContent)\r\n * const segments = result.segments\r\n * ```\r\n *\r\n * Benefits of the new approach:\r\n * - Single source of truth for SRT parsing logic (backend)\r\n * - Better error handling and validation\r\n * - Consistent parsing behavior across the application\r\n * - Proper testing with mocked API responses\r\n * - No code duplication between frontend and backend\r\n *\r\n * For proper tests, see: subtitle-parsing.test.ts\r\n */\r\n\r\n// Re-export the API client for migration compatibility\r\nexport { srtApi as SRTApi, srtUtils } from '../utils/srtApi'\r\n\r\nconsole.warn(\r\n  'DEPRECATION WARNING: This test utility file is deprecated. ' +\r\n  'Use the new SRT API client from ../utils/srtApi instead. ' +\r\n  'See subtitle-parsing.test.ts for proper test examples.'\r\n)\r\n\r\n/**\r\n * DEPRECATED: Legacy synchronous SRT parser for backward compatibility\r\n * Only used in deprecated tests. New code should use srtApi.parseSRTContent()\r\n */\r\nexport function parseSRT(content: string): Array<{ start: number; end: number; text: string; translation: string }> {\r\n  if (!content.trim()) return []\r\n\r\n  const blocks = content.split(/\\n\\s*\\n/).filter(block => block.trim())\r\n  const result: Array<{ start: number; end: number; text: string; translation: string }> = []\r\n\r\n  for (const block of blocks) {\r\n    const lines = block.split('\\n').filter(line => line.trim())\r\n    if (lines.length < 3) continue // Need at least index, timestamp, text\r\n\r\n    const timestampLine = lines[1]\r\n    const timestampMatch = timestampLine.match(/(\\d{2}:\\d{2}:\\d{2},\\d{3}) --> (\\d{2}:\\d{2}:\\d{2},\\d{3})/)\r\n    if (!timestampMatch) continue\r\n\r\n    const [, startStr, endStr] = timestampMatch\r\n\r\n    // Parse timestamps to seconds\r\n    const start = parseTimestamp(startStr)\r\n    const end = parseTimestamp(endStr)\r\n\r\n    // Get text lines\r\n    const textLines = lines.slice(2)\r\n    let text = ''\r\n    let translation = ''\r\n\r\n    for (const line of textLines) {\r\n      if (line.includes('|')) {\r\n        const parts = line.split('|').map(p => p.trim())\r\n        text = parts[0] || ''\r\n        translation = parts[1] || ''\r\n      } else {\r\n        text += (text ? '\\n' : '') + line\r\n      }\r\n    }\r\n\r\n    result.push({ start, end, text, translation })\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nfunction parseTimestamp(timestamp: string): number {\r\n  const match = timestamp.match(/(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})/)\r\n  if (!match) return 0\r\n\r\n  const [, hours, minutes, seconds, milliseconds] = match.map(Number)\r\n  return hours * 3600 + minutes * 60 + seconds + milliseconds / 1000\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\types\\fastapi-users.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\types\\heroicons.d.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-interface","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":35,"column":20,"nodeType":"Identifier","messageId":"noEmptyWithSuper","endLine":35,"endColumn":28,"suggestions":[{"messageId":"noEmptyWithSuper","fix":{"range":[1241,1309],"text":"type HeroIcon = ComponentType<SVGProps<SVGSVGElement>>"},"desc":"An interface declaring no members is equivalent to its supertype."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Type declarations for @heroicons/react\r\ndeclare module '@heroicons/react/24/solid' {\r\n  import { ComponentType, SVGProps } from 'react'\r\n\r\n  type HeroIcon = ComponentType<SVGProps<SVGSVGElement> & { className?: string }>\r\n\r\n  export const PlayIcon: HeroIcon\r\n  export const PauseIcon: HeroIcon\r\n  export const SpeakerWaveIcon: HeroIcon\r\n  export const SpeakerXMarkIcon: HeroIcon\r\n  export const CheckCircleIcon: HeroIcon\r\n  export const ArrowLeftIcon: HeroIcon\r\n  export const ExclamationTriangleIcon: HeroIcon\r\n  export const ClockIcon: HeroIcon\r\n  export const CheckIcon: HeroIcon\r\n  export const XMarkIcon: HeroIcon\r\n  export const ChevronDownIcon: HeroIcon\r\n  export const ChevronUpIcon: HeroIcon\r\n  export const ChevronRightIcon: HeroIcon\r\n  export const MagnifyingGlassIcon: HeroIcon\r\n  export const HeartIcon: HeroIcon\r\n  export const StarIcon: HeroIcon\r\n  export const EyeIcon: HeroIcon\r\n  export const EyeSlashIcon: HeroIcon\r\n  export const PlusIcon: HeroIcon\r\n  export const MinusIcon: HeroIcon\r\n  export const ForwardIcon: HeroIcon\r\n  export const LanguageIcon: HeroIcon\r\n  export const ArrowPathIcon: HeroIcon\r\n}\r\n\r\ndeclare module '@heroicons/react/24/outline' {\r\n  import { ComponentType, SVGProps } from 'react'\r\n\r\n  export interface HeroIcon extends ComponentType<SVGProps<SVGSVGElement>> {}\r\n\r\n  export const PlayIcon: HeroIcon\r\n  export const PauseIcon: HeroIcon\r\n  export const SpeakerWaveIcon: HeroIcon\r\n  export const SpeakerXMarkIcon: HeroIcon\r\n  export const CheckCircleIcon: HeroIcon\r\n  export const ArrowLeftIcon: HeroIcon\r\n  export const ExclamationTriangleIcon: HeroIcon\r\n  export const ClockIcon: HeroIcon\r\n  export const CheckIcon: HeroIcon\r\n  export const XMarkIcon: HeroIcon\r\n\r\n  // Add more icons as needed\r\n  const Icons: Record<string, HeroIcon>\r\n  export = Icons\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\types\\subtitle.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\utils\\contract-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\utils\\error-formatter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[578,581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[578,581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1169,1172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1169,1172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1388,1391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1388,1391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1536,1539],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1536,1539],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1688,1691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1688,1691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Centralized error message formatting\r\n * Extracts user-friendly error messages from API errors\r\n */\r\n\r\nexport interface ApiError {\r\n  body?: {\r\n    detail?: string\r\n  }\r\n  message?: string\r\n  status?: number\r\n  response?: {\r\n    data?: {\r\n      detail?: string | Array<{ msg?: string }>\r\n    }\r\n    status?: number\r\n  }\r\n}\r\n\r\n/**\r\n * Format API error into user-friendly message\r\n * @param error - Error object from API call\r\n * @param fallback - Default message if no specific error found\r\n * @returns Formatted error message\r\n */\r\nexport function formatApiError(error: any, fallback: string): string {\r\n  if (!error) return fallback\r\n\r\n  // Try different error structures\r\n  if (error?.body?.detail) return error.body.detail\r\n  if (error?.response?.data?.detail) {\r\n    const detail = error.response.data.detail\r\n    // Handle array of validation errors\r\n    if (Array.isArray(detail)) {\r\n      return detail.map(err => err.msg || JSON.stringify(err)).join('; ')\r\n    }\r\n    return detail\r\n  }\r\n  if (error?.message) return error.message\r\n\r\n  return fallback\r\n}\r\n\r\n/**\r\n * Check if error is a specific HTTP status code\r\n */\r\nexport function isHttpError(error: any, statusCode: number): boolean {\r\n  return error?.status === statusCode || error?.response?.status === statusCode\r\n}\r\n\r\n/**\r\n * Check if error is authentication related (401)\r\n */\r\nexport function isAuthError(error: any): boolean {\r\n  return isHttpError(error, 401)\r\n}\r\n\r\n/**\r\n * Check if error is rate limiting (429)\r\n */\r\nexport function isRateLimitError(error: any): boolean {\r\n  return isHttpError(error, 429)\r\n}\r\n\r\n/**\r\n * Get retry-after header from rate limit error\r\n */\r\nexport function getRetryAfter(error: any): number {\r\n  const retryAfter = error?.response?.headers?.['retry-after']\r\n    || error?.headers?.['retry-after']\r\n\r\n  return retryAfter ? parseInt(retryAfter, 10) : 60\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\utils\\schema-validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\utils\\srtApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\utils\\token-storage.ts","messages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":16,"column":59,"nodeType":"BlockStatement","messageId":"unexpected","endLine":16,"endColumn":61,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[459,459],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":23,"column":61,"nodeType":"BlockStatement","messageId":"unexpected","endLine":23,"endColumn":63,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[667,667],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":31,"column":13,"nodeType":"BlockStatement","messageId":"unexpected","endLine":31,"endColumn":15,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[839,839],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Token storage utility used by tests\n// Keeps API simple and synchronous for unit/integration tests\n\nconst TOKEN_KEY = 'auth_token';\nconst REFRESH_KEY = 'refresh_token';\n\nlet memToken: string | null = null;\nlet memRefresh: string | null = null;\n\nexport const tokenStorage = {\n  getToken(): string | null {\n    return memToken ?? null;\n  },\n  setToken(token: string) {\n    memToken = token ?? null;\n    try { localStorage.setItem(TOKEN_KEY, token); } catch {}\n  },\n  getRefreshToken(): string | null {\n    return memRefresh ?? null;\n  },\n  setRefreshToken(token: string) {\n    memRefresh = token ?? null;\n    try { localStorage.setItem(REFRESH_KEY, token); } catch {}\n  },\n  clear() {\n    memToken = null;\n    memRefresh = null;\n    try {\n      localStorage.removeItem(TOKEN_KEY);\n      localStorage.removeItem(REFRESH_KEY);\n    } catch {}\n  },\n  isTokenExpired(_token: string): boolean {\n    // For tests we assume tokens never expire unless explicitly mocked\n    return false;\n  },\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Jonandrop\\IdeaProjects\\LangPlug\\src\\frontend\\src\\vite-env.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[357,360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[357,360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[400,403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[400,403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-var","severity":2,"message":"Unexpected var, use let or const instead.","line":19,"column":3,"nodeType":"VariableDeclaration","messageId":"unexpectedVar","endLine":25,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[596,599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[596,599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[616,619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[616,619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[797,800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[797,800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[932,935],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[932,935],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/// <reference types=\"vite/client\" />\r\n\r\ninterface ImportMetaEnv {\r\n  readonly VITE_API_BASE_URL: string\r\n}\r\n\r\ninterface ImportMeta {\r\n  readonly env: ImportMetaEnv\r\n}\r\n\r\n// Global test utilities available in all test files\r\ndeclare global {\r\n  const act: (callback: () => void | Promise<void>) => void | Promise<void>\r\n  const actAsync: (fn: () => Promise<any>) => Promise<void>\r\n  const mockTheme: any\r\n  const withTheme: (component: React.ReactElement) => React.ReactElement\r\n\r\n  // Node.js global object with index signature for tests\r\n  var global: typeof globalThis & {\r\n    [key: string]: any\r\n    mockTheme: any\r\n    withTheme: (component: React.ReactElement) => React.ReactElement\r\n    act: (callback: () => void | Promise<void>) => void | Promise<void>\r\n    actAsync: (fn: () => Promise<any>) => Promise<void>\r\n  }\r\n\r\n  // Allow index signature access to globalThis for tests\r\n  interface globalThis {\r\n    [key: string]: any\r\n  }\r\n}\r\n","usedDeprecatedRules":[]}]
